/*! For license information please see chunk.20_e510831dd51e7b23f9b1.js.LICENSE.txt */
(self["webpackJsonp_4d91938c-48ff-458b-b9dd-16a4b75f946d_0.0.1"]=self["webpackJsonp_4d91938c-48ff-458b-b9dd-16a4b75f946d_0.0.1"]||[]).push([[20],{5451:()=>{function e(e,t,n){if(n||2===arguments.length)for(var a,i=0,r=t.length;i<r;i++)!a&&i in t||(a||(a=Array.prototype.slice.call(t,0,i)),a[i]=t[i]);return e.concat(a||Array.prototype.slice.call(t))}var t={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},n=/([astvzqmhlc])([^astvzqmhlc]*)/gi,a=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi;function i(e,t){var n=e.x*Math.cos(t)-e.y*Math.sin(t),a=e.y*Math.cos(t)+e.x*Math.sin(t);e.x=n,e.y=a}function r(e,t,n){e.x+=t,e.y+=n}function o(e,t){e.x*=t,e.y*=t}var s=function(){function i(r){var o;this.commands=[],r&&r instanceof i?(o=this.commands).push.apply(o,r.commands):r&&(this.commands=function(i){var r=[],o=String(i).trim();return"M"!==o[0]&&"m"!==o[0]||o.replace(n,function(n,i,o){var s=function(e){var t=e.match(a);return t?t.map(Number):[]}(o),c=i.toLowerCase(),d=i;if("m"===c&&s.length>2&&(r.push(e([d],s.splice(0,2),!0)),c="l",d="m"===d?"l":"L"),s.length<t[c])return"";for(r.push(e([d],s.splice(0,t[c]),!0));s.length>=t[c]&&s.length&&t[c];)r.push(e([d],s.splice(0,t[c]),!0));return""}),r}(r))}return i.prototype.addPath=function(e){var t;e&&e instanceof i&&(t=this.commands).push.apply(t,e.commands)},i.prototype.moveTo=function(e,t){this.commands.push(["M",e,t])},i.prototype.lineTo=function(e,t){this.commands.push(["L",e,t])},i.prototype.arc=function(e,t,n,a,i,r){this.commands.push(["AC",e,t,n,a,i,!!r])},i.prototype.arcTo=function(e,t,n,a,i){this.commands.push(["AT",e,t,n,a,i])},i.prototype.ellipse=function(e,t,n,a,i,r,o,s){this.commands.push(["E",e,t,n,a,i,r,o,!!s])},i.prototype.closePath=function(){this.commands.push(["Z"])},i.prototype.bezierCurveTo=function(e,t,n,a,i,r){this.commands.push(["C",e,t,n,a,i,r])},i.prototype.quadraticCurveTo=function(e,t,n,a){this.commands.push(["Q",e,t,n,a])},i.prototype.rect=function(e,t,n,a){this.commands.push(["R",e,t,n,a])},i.prototype.roundRect=function(e,t,n,a,i){void 0===i?this.commands.push(["RR",e,t,n,a,0]):this.commands.push(["RR",e,t,n,a,i])},i}();function c(e,t){var n,a,s,c,d,l,u,f,p,m,_,h,b,g,v,y,S,D,I,x,C,O=0,w=0,E=null,A=null,L=null,k=null,M=null,P=null;e.beginPath();for(var T=0;T<t.length;++T){"S"!==(D=t[T][0])&&"s"!==D&&"C"!==D&&"c"!==D&&(E=null,A=null),"T"!==D&&"t"!==D&&"Q"!==D&&"q"!==D&&(L=null,k=null);var U=void 0;switch(D){case"m":case"M":U=t[T],"m"===D?(O+=U[1],w+=U[2]):(O=U[1],w=U[2]),"M"!==D&&M||(M={x:O,y:w}),e.moveTo(O,w);break;case"l":O+=(U=t[T])[1],w+=U[2],e.lineTo(O,w);break;case"L":O=(U=t[T])[1],w=U[2],e.lineTo(O,w);break;case"H":O=(U=t[T])[1],e.lineTo(O,w);break;case"h":O+=(U=t[T])[1],e.lineTo(O,w);break;case"V":w=(U=t[T])[1],e.lineTo(O,w);break;case"v":w+=(U=t[T])[1],e.lineTo(O,w);break;case"a":case"A":if(U=t[T],null===P)throw new Error("This should never happen");"a"===D?(O+=U[6],w+=U[7]):(O=U[6],w=U[7]),g=U[1],v=U[2],u=U[3]*Math.PI/180,s=!!U[4],c=!!U[5],d={x:O,y:w},i(l={x:(P.x-d.x)/2,y:(P.y-d.y)/2},-u),(f=l.x*l.x/(g*g)+l.y*l.y/(v*v))>1&&(g*=f=Math.sqrt(f),v*=f),p=g*g*v*v,m=g*g*l.y*l.y+v*v*l.x*l.x,o(I={x:g*l.y/v,y:-v*l.x/g},c!==s?Math.sqrt((p-m)/m)||0:-Math.sqrt((p-m)/m)||0),a=Math.atan2((l.y-I.y)/v,(l.x-I.x)/g),n=Math.atan2(-(l.y+I.y)/v,-(l.x+I.x)/g),i(I,u),r(I,(d.x+P.x)/2,(d.y+P.y)/2),e.save(),e.translate(I.x,I.y),e.rotate(u),e.scale(g,v),e.arc(0,0,1,a,n,!c),e.restore();break;case"C":E=(U=t[T])[3],A=U[4],O=U[5],w=U[6],e.bezierCurveTo(U[1],U[2],E,A,O,w);break;case"c":U=t[T],e.bezierCurveTo(U[1]+O,U[2]+w,U[3]+O,U[4]+w,U[5]+O,U[6]+w),E=U[3]+O,A=U[4]+w,O+=U[5],w+=U[6];break;case"S":U=t[T],null!==E&&null!==A||(E=O,A=w),e.bezierCurveTo(2*O-E,2*w-A,U[1],U[2],U[3],U[4]),E=U[1],A=U[2],O=U[3],w=U[4];break;case"s":U=t[T],null!==E&&null!==A||(E=O,A=w),e.bezierCurveTo(2*O-E,2*w-A,U[1]+O,U[2]+w,U[3]+O,U[4]+w),E=U[1]+O,A=U[2]+w,O+=U[3],w+=U[4];break;case"Q":L=(U=t[T])[1],k=U[2],O=U[3],w=U[4],e.quadraticCurveTo(L,k,O,w);break;case"q":L=(U=t[T])[1]+O,k=U[2]+w,O+=U[3],w+=U[4],e.quadraticCurveTo(L,k,O,w);break;case"T":null!==L&&null!==k||(L=O,k=w),L=2*O-L,k=2*w-k,O=(U=t[T])[1],w=U[2],e.quadraticCurveTo(L,k,O,w);break;case"t":null!==L&&null!==k||(L=O,k=w),L=2*O-L,k=2*w-k,O+=(U=t[T])[1],w+=U[2],e.quadraticCurveTo(L,k,O,w);break;case"z":case"Z":M&&(O=M.x,w=M.y),M=null,e.closePath();break;case"AC":O=(U=t[T])[1],w=U[2],b=U[3],a=U[4],n=U[5],x=U[6],e.arc(O,w,b,a,n,x);break;case"AT":_=(U=t[T])[1],h=U[2],O=U[3],w=U[4],b=U[5],e.arcTo(_,h,O,w,b);break;case"E":O=(U=t[T])[1],w=U[2],g=U[3],v=U[4],u=U[5],a=U[6],n=U[7],x=U[8],e.save(),e.translate(O,w),e.rotate(u),e.scale(g,v),e.arc(0,0,1,a,n,x),e.restore();break;case"R":O=(U=t[T])[1],w=U[2],y=U[3],S=U[4],M={x:O,y:w},e.rect(O,w,y,S);break;case"RR":O=(U=t[T])[1],w=U[2],y=U[3],S=U[4],C=U[5],M={x:O,y:w},e.roundRect(O,w,y,S,C)}P?(P.x=O,P.y=w):P={x:O,y:w}}}function d(e,t,n,a,i){var r=this;if(void 0===i&&(i=0),"number"==typeof i&&(i=[i]),Array.isArray(i)){if(0===i.length||i.length>4)throw new RangeError("Failed to execute 'roundRect' on '".concat(this.constructor.name,"': ").concat(i.length," radii provided. Between one and four radii are necessary."));if(i.forEach(function(e){if(e<0)throw new RangeError("Failed to execute 'roundRect' on '".concat(r.constructor.name,"': Radius value ").concat(e," is negative."))}),1===i.length&&0===i[0])return this.rect(e,t,n,a);var o,s,c,d=Math.min(n,a)/2,l=o=s=c=Math.min(d,i[0]);2===i.length&&(o=c=Math.min(d,i[1])),3===i.length&&(o=c=Math.min(d,i[1]),s=Math.min(d,i[2])),4===i.length&&(o=Math.min(d,i[1]),s=Math.min(d,i[2]),c=Math.min(d,i[3])),this.moveTo(e,t+a-c),this.arcTo(e,t,e+l,t,l),this.arcTo(e+n,t,e+n,t+o,o),this.arcTo(e+n,t+a,e+n-s,t+a,s),this.arcTo(e,t+a,e,t+a-c,c),this.moveTo(e,t)}}!function(e){if(e&&e.CanvasRenderingContext2D&&!e.Path2D){var t=e.CanvasRenderingContext2D,n=t.prototype.fill,a=t.prototype.stroke,i=t.prototype.isPointInPath;t.prototype.fill=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!(e[0]instanceof s))return i=e[0]||"nonzero",n.apply(this,[i]);var a=e[0],i=e[1]||"nonzero";c(this,a.commands),n.apply(this,[i])},t.prototype.stroke=function(e){e&&c(this,e.commands),a.apply(this)},t.prototype.isPointInPath=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(e[0]instanceof s){var n=e[0],a=e[1],r=e[2],o=e[3]||"nonzero";return c(this,n.commands),i.apply(this,[a,r,o])}return i.apply(this,e)},e.Path2D=s}}(window),function(e){if(e&&e.CanvasRenderingContext2D){var t=e.CanvasRenderingContext2D,n=e.Path2D;t&&!t.prototype.roundRect&&(t.prototype.roundRect=d),n&&!n.prototype.roundRect&&(n.prototype.roundRect=d)}}(window)}
,20:(module,__unused_webpack_exports,__webpack_require__)=>{var root,factory;root=globalThis,factory=()=>(()=>{"use strict";var __webpack_modules__=[,(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationReplyType=t.AnnotationPrefix=t.AnnotationMode=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=function(e,t){e||s(t)},t.bytesToString=l,t.createValidAbsoluteUrl=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;try{if(n&&"string"==typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);t?.length>=2&&(e=`http://${e}`)}if(n.tryConvertEncoding)try{e=m(e)}catch{}}const a=t?new URL(e,t):new URL(e);if(function(e){switch(e?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(a))return a}catch{}return null},t.getModificationDate=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return[e.getUTCFullYear().toString(),(e.getUTCMonth()+1).toString().padStart(2,"0"),e.getUTCDate().toString().padStart(2,"0"),e.getUTCHours().toString().padStart(2,"0"),e.getUTCMinutes().toString().padStart(2,"0"),e.getUTCSeconds().toString().padStart(2,"0")].join("")},t.getUuid=function(){if("undefined"!=typeof crypto&&"function"==typeof crypto?.randomUUID)return crypto.randomUUID();const e=new Uint8Array(32);if("undefined"!=typeof crypto&&"function"==typeof crypto?.getRandomValues)crypto.getRandomValues(e);else for(let t=0;t<32;t++)e[t]=Math.floor(255*Math.random());return l(e)},t.getVerbosityLevel=function(){return r},t.info=function(e){r>=i.INFOS&&console.log(`Info: ${e}`)},t.isArrayBuffer=function(e){return"object"==typeof e&&void 0!==e?.byteLength},t.isArrayEqual=function(e,t){if(e.length!==t.length)return!1;for(let n=0,a=e.length;n<a;n++)if(e[n]!==t[n])return!1;return!0},t.isNodeJS=void 0,t.normalizeUnicode=function(e){return _||(_=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,h=new Map([["ﬅ","ſt"]])),e.replaceAll(_,(e,t,n)=>t?t.normalize("NFKC"):h.get(n))},t.objectFromMap=function(e){const t=Object.create(null);for(const[n,a]of e)t[n]=a;return t},t.objectSize=function(e){return Object.keys(e).length},t.setVerbosityLevel=function(e){Number.isInteger(e)&&(r=e)},t.shadow=c,t.string32=function(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)},t.stringToBytes=u,t.stringToPDFString=function(e){if(e[0]>="ï"){let t;if("þ"===e[0]&&"ÿ"===e[1]?t="utf-16be":"ÿ"===e[0]&&"þ"===e[1]?t="utf-16le":"ï"===e[0]&&"»"===e[1]&&"¿"===e[2]&&(t="utf-8"),t)try{const n=new TextDecoder(t,{fatal:!0}),a=u(e);return n.decode(a)}catch(e){o(`stringToPDFString: "${e}".`)}}const t=[];for(let n=0,a=e.length;n<a;n++){const a=p[e.charCodeAt(n)];t.push(a?String.fromCharCode(a):e.charAt(n))}return t.join("")},t.stringToUTF8String=m,t.unreachable=s,t.utf8StringToString=function(e){return unescape(encodeURIComponent(e))},t.warn=o,n(2),n(84),n(86),n(87),n(89),n(93),n(101),n(102),n(105),n(107),n(109),n(113),n(116),n(123);const a=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);t.isNodeJS=a,t.IDENTITY_MATRIX=[1,0,0,1,0,0],t.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],t.MAX_IMAGE_SIZE_TO_CACHE=1e7,t.LINE_FACTOR=1.35,t.LINE_DESCENT_FACTOR=.35,t.BASELINE_FACTOR=.35/1.35,t.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},t.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},t.AnnotationEditorPrefix="pdfjs_internal_editor_",t.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15},t.AnnotationEditorParamsType={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23},t.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},t.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},t.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},t.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},t.AnnotationReplyType={GROUP:"Group",REPLY:"R"},t.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},t.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},t.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},t.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},t.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},t.PageActionEventType={O:"PageOpen",C:"PageClose"};const i={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=i,t.CMapCompressionType={NONE:0,BINARY:1},t.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},t.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let r=i.WARNINGS;function o(e){r>=i.WARNINGS&&console.log(`Warning: ${e}`)}function s(e){throw new Error(e)}function c(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(e,t,{value:n,enumerable:!a,configurable:!0,writable:!1}),n}const d=function(){function e(t,n){this.constructor===e&&s("Cannot initialize BaseException."),this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();function l(e){"object"==typeof e&&void 0!==e?.length||s("Invalid argument for bytesToString");const t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);const a=[];for(let i=0;i<t;i+=n){const r=Math.min(i+n,t),o=e.subarray(i,r);a.push(String.fromCharCode.apply(null,o))}return a.join("")}function u(e){"string"!=typeof e&&s("Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let a=0;a<t;++a)n[a]=255&e.charCodeAt(a);return n}t.BaseException=d,t.PasswordException=class extends d{constructor(e,t){super(e,"PasswordException"),this.code=t}},t.UnknownErrorException=class extends d{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}},t.InvalidPDFException=class extends d{constructor(e){super(e,"InvalidPDFException")}},t.MissingPDFException=class extends d{constructor(e){super(e,"MissingPDFException")}},t.UnexpectedResponseException=class extends d{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}},t.FormatError=class extends d{constructor(e){super(e,"FormatError")}},t.AbortException=class extends d{constructor(e){super(e,"AbortException")}},t.FeatureTest=class{static get isLittleEndian(){return c(this,"isLittleEndian",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return c(this,"isEvalSupported",function(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return c(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}static get platform(){return"undefined"==typeof navigator?c(this,"platform",{isWin:!1,isMac:!1}):c(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return c(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}};const f=[...Array(256).keys()].map(e=>e.toString(16).padStart(2,"0"));t.Util=class{static makeHexColor(e,t,n){return`#${f[e]}${f[t]}${f[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[1],t[1]=n),t[0]*=e[0],t[1]*=e[0],e[3]<0&&(n=t[2],t[2]=t[3],t[3]=n),t[2]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[2],t[2]=n,n=t[1],t[1]=t[3],t[3]=n,e[1]<0&&(n=t[2],t[2]=t[3],t[3]=n),t[2]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[1],t[1]=n),t[0]*=e[2],t[1]*=e[2]),t[0]+=e[4],t[1]+=e[4],t[2]+=e[5],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){return[e[0]*t[0]+e[1]*t[2]+t[4],e[0]*t[1]+e[1]*t[3]+t[5]]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2];return[(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),a=this.applyTransform(e.slice(2,4),t),i=this.applyTransform([e[0],e[3]],t),r=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],a[0],i[0],r[0]),Math.min(n[1],a[1],i[1],r[1]),Math.max(n[0],a[0],i[0],r[0]),Math.max(n[1],a[1],i[1],r[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],a=e[0]*t[1]+e[1]*t[3],i=e[2]*t[0]+e[3]*t[2],r=e[2]*t[1]+e[3]*t[3],o=(n+r)/2,s=Math.sqrt((n+r)**2-4*(n*r-i*a))/2,c=o+s||1,d=o-s||1;return[Math.sqrt(c),Math.sqrt(d)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),a=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>a)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),r=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>r?null:[n,i,a,r]}static bezierBoundingBox(e,t,n,a,i,r,o,s){const c=[],d=[[],[]];let l,u,f,p,m,_,h,b;for(let d=0;d<2;++d)if(0===d?(u=6*e-12*n+6*i,l=-3*e+9*n-9*i+3*o,f=3*n-3*e):(u=6*t-12*a+6*r,l=-3*t+9*a-9*r+3*s,f=3*a-3*t),Math.abs(l)<1e-12){if(Math.abs(u)<1e-12)continue;p=-f/u,0<p&&p<1&&c.push(p)}else h=u*u-4*f*l,b=Math.sqrt(h),h<0||(m=(-u+b)/(2*l),0<m&&m<1&&c.push(m),_=(-u-b)/(2*l),0<_&&_<1&&c.push(_));let g,v=c.length;const y=v;for(;v--;)p=c[v],g=1-p,d[0][v]=g*g*g*e+3*g*g*p*n+3*g*p*p*i+p*p*p*o,d[1][v]=g*g*g*t+3*g*g*p*a+3*g*p*p*r+p*p*p*s;return d[0][y]=e,d[1][y]=t,d[0][y+1]=o,d[1][y+1]=s,d[0].length=d[1].length=y+2,[Math.min(...d[0]),Math.min(...d[1]),Math.max(...d[0]),Math.max(...d[1])]}};const p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function m(e){return decodeURIComponent(escape(e))}t.PromiseCapability=class{#e=!1;constructor(){this.promise=new Promise((e,t)=>{this.resolve=t=>{this.#e=!0,e(t)},this.reject=e=>{this.#e=!0,t(e)}})}get settled(){return this.#e}};let _=null,h=null;t.AnnotationPrefix="pdfjs_internal_id_"},(e,t,n)=>{var a=n(3),i=n(4),r=n(69),o=n(70),s="WebAssembly",c=i[s],d=7!==Error("e",{cause:7}).cause,l=function(e,t){var n={};n[e]=o(e,t,d),a({global:!0,constructor:!0,arity:1,forced:d},n)},u=function(e,t){if(c&&c[e]){var n={};n[e]=o(s+"."+e,t,d),a({target:s,stat:!0,constructor:!0,arity:1,forced:d},n)}};l("Error",function(e){return function(t){return r(e,this,arguments)}}),l("EvalError",function(e){return function(t){return r(e,this,arguments)}}),l("RangeError",function(e){return function(t){return r(e,this,arguments)}}),l("ReferenceError",function(e){return function(t){return r(e,this,arguments)}}),l("SyntaxError",function(e){return function(t){return r(e,this,arguments)}}),l("TypeError",function(e){return function(t){return r(e,this,arguments)}}),l("URIError",function(e){return function(t){return r(e,this,arguments)}}),u("CompileError",function(e){return function(t){return r(e,this,arguments)}}),u("LinkError",function(e){return function(t){return r(e,this,arguments)}}),u("RuntimeError",function(e){return function(t){return r(e,this,arguments)}})},(e,t,n)=>{var a=n(4),i=n(5).f,r=n(44),o=n(48),s=n(38),c=n(56),d=n(68);e.exports=function(e,t){var n,l,u,f,p,m=e.target,_=e.global,h=e.stat;if(n=_?a:h?a[m]||s(m,{}):(a[m]||{}).prototype)for(l in t){if(f=t[l],u=e.dontCallGetSet?(p=i(n,l))&&p.value:n[l],!d(_?l:m+(h?".":"#")+l,e.forced)&&void 0!==u){if(typeof f==typeof u)continue;c(f,u)}(e.sham||u&&u.sham)&&r(f,"sham",!0),o(n,l,f,e)}}},function(e){var t=function(e){return e&&e.Math===Math&&e};e.exports=t("object"==typeof globalThis&&globalThis)||t("object"==typeof window&&window)||t("object"==typeof self&&self)||t("object"==typeof __webpack_require__.g&&__webpack_require__.g)||function(){return this}()||this||Function("return this")()},(e,t,n)=>{var a=n(6),i=n(8),r=n(10),o=n(11),s=n(12),c=n(18),d=n(39),l=n(42),u=Object.getOwnPropertyDescriptor;t.f=a?u:function(e,t){if(e=s(e),t=c(t),l)try{return u(e,t)}catch(e){}if(d(e,t))return o(!i(r.f,e,t),e[t])}},(e,t,n)=>{var a=n(7);e.exports=!a(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})},e=>{e.exports=function(e){try{return!!e()}catch(e){return!0}}},(e,t,n)=>{var a=n(9),i=Function.prototype.call;e.exports=a?i.bind(i):function(){return i.apply(i,arguments)}},(e,t,n)=>{var a=n(7);e.exports=!a(function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")})},(e,t)=>{var n={}.propertyIsEnumerable,a=Object.getOwnPropertyDescriptor,i=a&&!n.call({1:2},1);t.f=i?function(e){var t=a(this,e);return!!t&&t.enumerable}:n},e=>{e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},(e,t,n)=>{var a=n(13),i=n(16);e.exports=function(e){return a(i(e))}},(e,t,n)=>{var a=n(14),i=n(7),r=n(15),o=Object,s=a("".split);e.exports=i(function(){return!o("z").propertyIsEnumerable(0)})?function(e){return"String"===r(e)?s(e,""):o(e)}:o},(e,t,n)=>{var a=n(9),i=Function.prototype,r=i.call,o=a&&i.bind.bind(r,r);e.exports=a?o:function(e){return function(){return r.apply(e,arguments)}}},(e,t,n)=>{var a=n(14),i=a({}.toString),r=a("".slice);e.exports=function(e){return r(i(e),8,-1)}},(e,t,n)=>{var a=n(17),i=TypeError;e.exports=function(e){if(a(e))throw i("Can't call method on "+e);return e}},e=>{e.exports=function(e){return null==e}},(e,t,n)=>{var a=n(19),i=n(23);e.exports=function(e){var t=a(e,"string");return i(t)?t:t+""}},(e,t,n)=>{var a=n(8),i=n(20),r=n(23),o=n(30),s=n(33),c=n(34),d=TypeError,l=c("toPrimitive");e.exports=function(e,t){if(!i(e)||r(e))return e;var n,c=o(e,l);if(c){if(void 0===t&&(t="default"),n=a(c,e,t),!i(n)||r(n))return n;throw d("Can't convert object to primitive value")}return void 0===t&&(t="number"),s(e,t)}},(e,t,n)=>{var a=n(21),i=n(22),r=i.all;e.exports=i.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:a(e)||e===r}:function(e){return"object"==typeof e?null!==e:a(e)}},(e,t,n)=>{var a=n(22),i=a.all;e.exports=a.IS_HTMLDDA?function(e){return"function"==typeof e||e===i}:function(e){return"function"==typeof e}},e=>{var t="object"==typeof document&&document.all,n=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:n}},(e,t,n)=>{var a=n(24),i=n(21),r=n(25),o=n(26),s=Object;e.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=a("Symbol");return i(t)&&r(t.prototype,s(e))}},(e,t,n)=>{var a=n(4),i=n(21);e.exports=function(e,t){return arguments.length<2?(n=a[e],i(n)?n:void 0):a[e]&&a[e][t];var n}},(e,t,n)=>{var a=n(14);e.exports=a({}.isPrototypeOf)},(e,t,n)=>{var a=n(27);e.exports=a&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},(e,t,n)=>{var a=n(28),i=n(7),r=n(4).String;e.exports=!!Object.getOwnPropertySymbols&&!i(function(){var e=Symbol("symbol detection");return!r(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&a&&a<41})},(e,t,n)=>{var a,i,r=n(4),o=n(29),s=r.process,c=r.Deno,d=s&&s.versions||c&&c.version,l=d&&d.v8;l&&(i=(a=l.split("."))[0]>0&&a[0]<4?1:+(a[0]+a[1])),!i&&o&&(!(a=o.match(/Edge\/(\d+)/))||a[1]>=74)&&(a=o.match(/Chrome\/(\d+)/))&&(i=+a[1]),e.exports=i},e=>{e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},(e,t,n)=>{var a=n(31),i=n(17);e.exports=function(e,t){var n=e[t];return i(n)?void 0:a(n)}},(e,t,n)=>{var a=n(21),i=n(32),r=TypeError;e.exports=function(e){if(a(e))return e;throw r(i(e)+" is not a function")}},e=>{var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},(e,t,n)=>{var a=n(8),i=n(21),r=n(20),o=TypeError;e.exports=function(e,t){var n,s;if("string"===t&&i(n=e.toString)&&!r(s=a(n,e)))return s;if(i(n=e.valueOf)&&!r(s=a(n,e)))return s;if("string"!==t&&i(n=e.toString)&&!r(s=a(n,e)))return s;throw o("Can't convert object to primitive value")}},(e,t,n)=>{var a=n(4),i=n(35),r=n(39),o=n(41),s=n(27),c=n(26),d=a.Symbol,l=i("wks"),u=c?d.for||d:d&&d.withoutSetter||o;e.exports=function(e){return r(l,e)||(l[e]=s&&r(d,e)?d[e]:u("Symbol."+e)),l[e]}},(e,t,n)=>{var a=n(36),i=n(37);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.32.2",mode:a?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.32.2/LICENSE",source:"https://github.com/zloirock/core-js"})},e=>{e.exports=!1},(e,t,n)=>{var a=n(4),i=n(38),r="__core-js_shared__",o=a[r]||i(r,{});e.exports=o},(e,t,n)=>{var a=n(4),i=Object.defineProperty;e.exports=function(e,t){try{i(a,e,{value:t,configurable:!0,writable:!0})}catch(n){a[e]=t}return t}},(e,t,n)=>{var a=n(14),i=n(40),r=a({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return r(i(e),t)}},(e,t,n)=>{var a=n(16),i=Object;e.exports=function(e){return i(a(e))}},(e,t,n)=>{var a=n(14),i=0,r=Math.random(),o=a(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++i+r,36)}},(e,t,n)=>{var a=n(6),i=n(7),r=n(43);e.exports=!a&&!i(function(){return 7!==Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a})},(e,t,n)=>{var a=n(4),i=n(20),r=a.document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},(e,t,n)=>{var a=n(6),i=n(45),r=n(11);e.exports=a?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},(e,t,n)=>{var a=n(6),i=n(42),r=n(46),o=n(47),s=n(18),c=TypeError,d=Object.defineProperty,l=Object.getOwnPropertyDescriptor,u="enumerable",f="configurable",p="writable";t.f=a?r?function(e,t,n){if(o(e),t=s(t),o(n),"function"==typeof e&&"prototype"===t&&"value"in n&&p in n&&!n[p]){var a=l(e,t);a&&a[p]&&(e[t]=n.value,n={configurable:f in n?n[f]:a[f],enumerable:u in n?n[u]:a[u],writable:!1})}return d(e,t,n)}:d:function(e,t,n){if(o(e),t=s(t),o(n),i)try{return d(e,t,n)}catch(e){}if("get"in n||"set"in n)throw c("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},(e,t,n)=>{var a=n(6),i=n(7);e.exports=a&&i(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},(e,t,n)=>{var a=n(20),i=String,r=TypeError;e.exports=function(e){if(a(e))return e;throw r(i(e)+" is not an object")}},(e,t,n)=>{var a=n(21),i=n(45),r=n(49),o=n(38);e.exports=function(e,t,n,s){s||(s={});var c=s.enumerable,d=void 0!==s.name?s.name:t;if(a(n)&&r(n,d,s),s.global)c?e[t]=n:o(t,n);else{try{s.unsafe?e[t]&&(c=!0):delete e[t]}catch(e){}c?e[t]=n:i.f(e,t,{value:n,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return e}},(e,t,n)=>{var a=n(14),i=n(7),r=n(21),o=n(39),s=n(6),c=n(50).CONFIGURABLE,d=n(51),l=n(52),u=l.enforce,f=l.get,p=String,m=Object.defineProperty,_=a("".slice),h=a("".replace),b=a([].join),g=s&&!i(function(){return 8!==m(function(){},"length",{value:8}).length}),v=String(String).split("String"),y=e.exports=function(e,t,n){"Symbol("===_(p(t),0,7)&&(t="["+h(p(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!o(e,"name")||c&&e.name!==t)&&(s?m(e,"name",{value:t,configurable:!0}):e.name=t),g&&n&&o(n,"arity")&&e.length!==n.arity&&m(e,"length",{value:n.arity});try{n&&o(n,"constructor")&&n.constructor?s&&m(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var a=u(e);return o(a,"source")||(a.source=b(v,"string"==typeof t?t:"")),e};Function.prototype.toString=y(function(){return r(this)&&f(this).source||d(this)},"toString")},(e,t,n)=>{var a=n(6),i=n(39),r=Function.prototype,o=a&&Object.getOwnPropertyDescriptor,s=i(r,"name"),c=s&&"something"===function(){}.name,d=s&&(!a||a&&o(r,"name").configurable);e.exports={EXISTS:s,PROPER:c,CONFIGURABLE:d}},(e,t,n)=>{var a=n(14),i=n(21),r=n(37),o=a(Function.toString);i(r.inspectSource)||(r.inspectSource=function(e){return o(e)}),e.exports=r.inspectSource},(e,t,n)=>{var a,i,r,o=n(53),s=n(4),c=n(20),d=n(44),l=n(39),u=n(37),f=n(54),p=n(55),m="Object already initialized",_=s.TypeError,h=s.WeakMap;if(o||u.state){var b=u.state||(u.state=new h);b.get=b.get,b.has=b.has,b.set=b.set,a=function(e,t){if(b.has(e))throw _(m);return t.facade=e,b.set(e,t),t},i=function(e){return b.get(e)||{}},r=function(e){return b.has(e)}}else{var g=f("state");p[g]=!0,a=function(e,t){if(l(e,g))throw _(m);return t.facade=e,d(e,g,t),t},i=function(e){return l(e,g)?e[g]:{}},r=function(e){return l(e,g)}}e.exports={set:a,get:i,has:r,enforce:function(e){return r(e)?i(e):a(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw _("Incompatible receiver, "+e+" required");return n}}}},(e,t,n)=>{var a=n(4),i=n(21),r=a.WeakMap;e.exports=i(r)&&/native code/.test(String(r))},(e,t,n)=>{var a=n(35),i=n(41),r=a("keys");e.exports=function(e){return r[e]||(r[e]=i(e))}},e=>{e.exports={}},(e,t,n)=>{var a=n(39),i=n(57),r=n(5),o=n(45);e.exports=function(e,t,n){for(var s=i(t),c=o.f,d=r.f,l=0;l<s.length;l++){var u=s[l];a(e,u)||n&&a(n,u)||c(e,u,d(t,u))}}},(e,t,n)=>{var a=n(24),i=n(14),r=n(58),o=n(67),s=n(47),c=i([].concat);e.exports=a("Reflect","ownKeys")||function(e){var t=r.f(s(e)),n=o.f;return n?c(t,n(e)):t}},(e,t,n)=>{var a=n(59),i=n(66).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return a(e,i)}},(e,t,n)=>{var a=n(14),i=n(39),r=n(12),o=n(60).indexOf,s=n(55),c=a([].push);e.exports=function(e,t){var n,a=r(e),d=0,l=[];for(n in a)!i(s,n)&&i(a,n)&&c(l,n);for(;t.length>d;)i(a,n=t[d++])&&(~o(l,n)||c(l,n));return l}},(e,t,n)=>{var a=n(12),i=n(61),r=n(64),o=function(e){return function(t,n,o){var s,c=a(t),d=r(c),l=i(o,d);if(e&&n!=n){for(;d>l;)if((s=c[l++])!=s)return!0}else for(;d>l;l++)if((e||l in c)&&c[l]===n)return e||l||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},(e,t,n)=>{var a=n(62),i=Math.max,r=Math.min;e.exports=function(e,t){var n=a(e);return n<0?i(n+t,0):r(n,t)}},(e,t,n)=>{var a=n(63);e.exports=function(e){var t=+e;return t!=t||0===t?0:a(t)}},e=>{var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var a=+e;return(a>0?n:t)(a)}},(e,t,n)=>{var a=n(65);e.exports=function(e){return a(e.length)}},(e,t,n)=>{var a=n(62),i=Math.min;e.exports=function(e){return e>0?i(a(e),9007199254740991):0}},e=>{e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},(e,t)=>{t.f=Object.getOwnPropertySymbols},(e,t,n)=>{var a=n(7),i=n(21),r=/#|\.prototype\./,o=function(e,t){var n=c[s(e)];return n===l||n!==d&&(i(t)?a(t):!!t)},s=o.normalize=function(e){return String(e).replace(r,".").toLowerCase()},c=o.data={},d=o.NATIVE="N",l=o.POLYFILL="P";e.exports=o},(e,t,n)=>{var a=n(9),i=Function.prototype,r=i.apply,o=i.call;e.exports="object"==typeof Reflect&&Reflect.apply||(a?o.bind(r):function(){return o.apply(r,arguments)})},(e,t,n)=>{var a=n(24),i=n(39),r=n(44),o=n(25),s=n(71),c=n(56),d=n(74),l=n(75),u=n(76),f=n(80),p=n(81),m=n(6),_=n(36);e.exports=function(e,t,n,h){var b="stackTraceLimit",g=h?2:1,v=e.split("."),y=v[v.length-1],S=a.apply(null,v);if(S){var D=S.prototype;if(!_&&i(D,"cause")&&delete D.cause,!n)return S;var I=a("Error"),x=t(function(e,t){var n=u(h?t:e,void 0),a=h?new S(e):new S;return void 0!==n&&r(a,"message",n),p(a,x,a.stack,2),this&&o(D,this)&&l(a,this,x),arguments.length>g&&f(a,arguments[g]),a});if(x.prototype=D,"Error"!==y?s?s(x,I):c(x,I,{name:!0}):m&&b in S&&(d(x,S,b),d(x,S,"prepareStackTrace")),c(x,S),!_)try{D.name!==y&&r(D,"name",y),D.constructor=x}catch(e){}return x}}},(e,t,n)=>{var a=n(72),i=n(47),r=n(73);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=a(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,a){return i(n),r(a),t?e(n,a):n.__proto__=a,n}}():void 0)},(e,t,n)=>{var a=n(14),i=n(31);e.exports=function(e,t,n){try{return a(i(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}}},(e,t,n)=>{var a=n(21),i=String,r=TypeError;e.exports=function(e){if("object"==typeof e||a(e))return e;throw r("Can't set "+i(e)+" as a prototype")}},(e,t,n)=>{var a=n(45).f;e.exports=function(e,t,n){n in e||a(e,n,{configurable:!0,get:function(){return t[n]},set:function(e){t[n]=e}})}},(e,t,n)=>{var a=n(21),i=n(20),r=n(71);e.exports=function(e,t,n){var o,s;return r&&a(o=t.constructor)&&o!==n&&i(s=o.prototype)&&s!==n.prototype&&r(e,s),e}},(e,t,n)=>{var a=n(77);e.exports=function(e,t){return void 0===e?arguments.length<2?"":t:a(e)}},(e,t,n)=>{var a=n(78),i=String;e.exports=function(e){if("Symbol"===a(e))throw TypeError("Cannot convert a Symbol value to a string");return i(e)}},(e,t,n)=>{var a=n(79),i=n(21),r=n(15),o=n(34)("toStringTag"),s=Object,c="Arguments"===r(function(){return arguments}());e.exports=a?r:function(e){var t,n,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=s(e),o))?n:c?r(t):"Object"===(a=r(t))&&i(t.callee)?"Arguments":a}},(e,t,n)=>{var a={};a[n(34)("toStringTag")]="z",e.exports="[object z]"===String(a)},(e,t,n)=>{var a=n(20),i=n(44);e.exports=function(e,t){a(t)&&"cause"in t&&i(e,"cause",t.cause)}},(e,t,n)=>{var a=n(44),i=n(82),r=n(83),o=Error.captureStackTrace;e.exports=function(e,t,n,s){r&&(o?o(e,t):a(e,"stack",i(n,s)))}},(e,t,n)=>{var a=n(14),i=Error,r=a("".replace),o=String(i("zxcasd").stack),s=/\n\s*at [^:]*:[^\n]*/,c=s.test(o);e.exports=function(e,t){if(c&&"string"==typeof e&&!i.prepareStackTrace)for(;t--;)e=r(e,s,"");return e}},(e,t,n)=>{var a=n(7),i=n(11);e.exports=!a(function(){var e=Error("a");return!("stack"in e)||(Object.defineProperty(e,"stack",i(1,7)),7!==e.stack)})},(e,t,n)=>{var a=n(48),i=n(14),r=n(77),o=n(85),s=URLSearchParams,c=s.prototype,d=i(c.append),l=i(c.delete),u=i(c.forEach),f=i([].push),p=new s("a=1&a=2&b=3");p.delete("a",1),p.delete("b",void 0),p+""!="a=2"&&a(c,"delete",function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return l(this,e);var a=[];u(this,function(e,t){f(a,{key:t,value:e})}),o(t,1);for(var i,s=r(e),c=r(n),p=0,m=0,_=!1,h=a.length;p<h;)i=a[p++],_||i.key===s?(_=!0,l(this,i.key)):m++;for(;m<h;)(i=a[m++]).key===s&&i.value===c||d(this,i.key,i.value)},{enumerable:!0,unsafe:!0})},e=>{var t=TypeError;e.exports=function(e,n){if(e<n)throw t("Not enough arguments");return e}},(e,t,n)=>{var a=n(48),i=n(14),r=n(77),o=n(85),s=URLSearchParams,c=s.prototype,d=i(c.getAll),l=i(c.has),u=new s("a=1");!u.has("a",2)&&u.has("a",void 0)||a(c,"has",function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&void 0===n)return l(this,e);var a=d(this,e);o(t,1);for(var i=r(n),s=0;s<a.length;)if(a[s++]===i)return!0;return!1},{enumerable:!0,unsafe:!0})},(e,t,n)=>{var a=n(6),i=n(14),r=n(88),o=URLSearchParams.prototype,s=i(o.forEach);a&&!("size"in o)&&r(o,"size",{get:function(){var e=0;return s(this,function(){e++}),e},configurable:!0,enumerable:!0})},(e,t,n)=>{var a=n(49),i=n(45);e.exports=function(e,t,n){return n.get&&a(n.get,t,{getter:!0}),n.set&&a(n.set,t,{setter:!0}),i.f(e,t,n)}},(e,t,n)=>{var a=n(3),i=n(40),r=n(64),o=n(90),s=n(92);a({target:"Array",proto:!0,arity:1,forced:n(7)(function(){return 4294967297!==[].push.call({length:4294967296},1)})||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}()},{push:function(e){var t=i(this),n=r(t),a=arguments.length;s(n+a);for(var c=0;c<a;c++)t[n]=arguments[c],n++;return o(t,n),n}})},(e,t,n)=>{var a=n(6),i=n(91),r=TypeError,o=Object.getOwnPropertyDescriptor,s=a&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=s?function(e,t){if(i(e)&&!o(e,"length").writable)throw r("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},(e,t,n)=>{var a=n(15);e.exports=Array.isArray||function(e){return"Array"===a(e)}},e=>{var t=TypeError;e.exports=function(e){if(e>9007199254740991)throw t("Maximum allowed index exceeded");return e}},(e,t,n)=>{var a=n(94),i=n(98).findLast,r=a.aTypedArray;(0,a.exportTypedArrayMethod)("findLast",function(e){return i(r(this),e,arguments.length>1?arguments[1]:void 0)})},(e,t,n)=>{var a,i,r,o=n(95),s=n(6),c=n(4),d=n(21),l=n(20),u=n(39),f=n(78),p=n(32),m=n(44),_=n(48),h=n(88),b=n(25),g=n(96),v=n(71),y=n(34),S=n(41),D=n(52),I=D.enforce,x=D.get,C=c.Int8Array,O=C&&C.prototype,w=c.Uint8ClampedArray,E=w&&w.prototype,A=C&&g(C),L=O&&g(O),k=Object.prototype,M=c.TypeError,P=y("toStringTag"),T=S("TYPED_ARRAY_TAG"),U="TypedArrayConstructor",F=o&&!!v&&"Opera"!==f(c.opera),H=!1,R={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},N={BigInt64Array:8,BigUint64Array:8},B=function(e){var t=g(e);if(l(t)){var n=x(t);return n&&u(n,U)?n[U]:B(t)}},j=function(e){if(!l(e))return!1;var t=f(e);return u(R,t)||u(N,t)};for(a in R)(r=(i=c[a])&&i.prototype)?I(r)[U]=i:F=!1;for(a in N)(r=(i=c[a])&&i.prototype)&&(I(r)[U]=i);if((!F||!d(A)||A===Function.prototype)&&(A=function(){throw M("Incorrect invocation")},F))for(a in R)c[a]&&v(c[a],A);if((!F||!L||L===k)&&(L=A.prototype,F))for(a in R)c[a]&&v(c[a].prototype,L);if(F&&g(E)!==L&&v(E,L),s&&!u(L,P))for(a in H=!0,h(L,P,{configurable:!0,get:function(){return l(this)?this[T]:void 0}}),R)c[a]&&m(c[a],T,a);e.exports={NATIVE_ARRAY_BUFFER_VIEWS:F,TYPED_ARRAY_TAG:H&&T,aTypedArray:function(e){if(j(e))return e;throw M("Target is not a typed array")},aTypedArrayConstructor:function(e){if(d(e)&&(!v||b(A,e)))return e;throw M(p(e)+" is not a typed array constructor")},exportTypedArrayMethod:function(e,t,n,a){if(s){if(n)for(var i in R){var r=c[i];if(r&&u(r.prototype,e))try{delete r.prototype[e]}catch(n){try{r.prototype[e]=t}catch(e){}}}L[e]&&!n||_(L,e,n?t:F&&O[e]||t,a)}},exportTypedArrayStaticMethod:function(e,t,n){var a,i;if(s){if(v){if(n)for(a in R)if((i=c[a])&&u(i,e))try{delete i[e]}catch(e){}if(A[e]&&!n)return;try{return _(A,e,n?t:F&&A[e]||t)}catch(e){}}for(a in R)!(i=c[a])||i[e]&&!n||_(i,e,t)}},getTypedArrayConstructor:B,isView:function(e){if(!l(e))return!1;var t=f(e);return"DataView"===t||u(R,t)||u(N,t)},isTypedArray:j,TypedArray:A,TypedArrayPrototype:L}},e=>{e.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},(e,t,n)=>{var a=n(39),i=n(21),r=n(40),o=n(54),s=n(97),c=o("IE_PROTO"),d=Object,l=d.prototype;e.exports=s?d.getPrototypeOf:function(e){var t=r(e);if(a(t,c))return t[c];var n=t.constructor;return i(n)&&t instanceof n?n.prototype:t instanceof d?l:null}},(e,t,n)=>{var a=n(7);e.exports=!a(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},(e,t,n)=>{var a=n(99),i=n(13),r=n(40),o=n(64),s=function(e){var t=1===e;return function(n,s,c){for(var d,l=r(n),u=i(l),f=a(s,c),p=o(u);p-- >0;)if(f(d=u[p],p,l))switch(e){case 0:return d;case 1:return p}return t?-1:void 0}};e.exports={findLast:s(0),findLastIndex:s(1)}},(e,t,n)=>{var a=n(100),i=n(31),r=n(9),o=a(a.bind);e.exports=function(e,t){return i(e),void 0===t?e:r?o(e,t):function(){return e.apply(t,arguments)}}},(e,t,n)=>{var a=n(15),i=n(14);e.exports=function(e){if("Function"===a(e))return i(e)}},(e,t,n)=>{var a=n(94),i=n(98).findLastIndex,r=a.aTypedArray;(0,a.exportTypedArrayMethod)("findLastIndex",function(e){return i(r(this),e,arguments.length>1?arguments[1]:void 0)})},(e,t,n)=>{var a=n(4),i=n(8),r=n(94),o=n(64),s=n(103),c=n(40),d=n(7),l=a.RangeError,u=a.Int8Array,f=u&&u.prototype,p=f&&f.set,m=r.aTypedArray,_=r.exportTypedArrayMethod,h=!d(function(){var e=new Uint8ClampedArray(2);return i(p,e,{length:1,0:3},1),3!==e[1]}),b=h&&r.NATIVE_ARRAY_BUFFER_VIEWS&&d(function(){var e=new u(2);return e.set(1),e.set("2",1),0!==e[0]||2!==e[1]});_("set",function(e){m(this);var t=s(arguments.length>1?arguments[1]:void 0,1),n=c(e);if(h)return i(p,this,n,t);var a=this.length,r=o(n),d=0;if(r+t>a)throw l("Wrong length");for(;d<r;)this[t+d]=n[d++]},!h||b)},(e,t,n)=>{var a=n(104),i=RangeError;e.exports=function(e,t){var n=a(e);if(n%t)throw i("Wrong offset");return n}},(e,t,n)=>{var a=n(62),i=RangeError;e.exports=function(e){var t=a(e);if(t<0)throw i("The argument can't be less than 0");return t}},(e,t,n)=>{var a=n(106),i=n(94),r=i.aTypedArray,o=i.exportTypedArrayMethod,s=i.getTypedArrayConstructor;o("toReversed",function(){return a(r(this),s(this))})},(e,t,n)=>{var a=n(64);e.exports=function(e,t){for(var n=a(e),i=new t(n),r=0;r<n;r++)i[r]=e[n-r-1];return i}},(e,t,n)=>{var a=n(94),i=n(14),r=n(31),o=n(108),s=a.aTypedArray,c=a.getTypedArrayConstructor,d=a.exportTypedArrayMethod,l=i(a.TypedArrayPrototype.sort);d("toSorted",function(e){void 0!==e&&r(e);var t=s(this),n=o(c(t),t);return l(n,e)})},(e,t,n)=>{var a=n(64);e.exports=function(e,t){for(var n=0,i=a(t),r=new e(i);i>n;)r[n]=t[n++];return r}},(e,t,n)=>{var a=n(110),i=n(94),r=n(111),o=n(62),s=n(112),c=i.aTypedArray,d=i.getTypedArrayConstructor,l=i.exportTypedArrayMethod,u=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(e){return 8===e}}();l("with",{with:function(e,t){var n=c(this),i=o(e),l=r(n)?s(t):+t;return a(n,d(n),i,l)}}.with,!u)},(e,t,n)=>{var a=n(64),i=n(62),r=RangeError;e.exports=function(e,t,n,o){var s=a(e),c=i(n),d=c<0?s+c:c;if(d>=s||d<0)throw r("Incorrect index");for(var l=new t(s),u=0;u<s;u++)l[u]=u===d?o:e[u];return l}},(e,t,n)=>{var a=n(78);e.exports=function(e){var t=a(e);return"BigInt64Array"===t||"BigUint64Array"===t}},(e,t,n)=>{var a=n(19),i=TypeError;e.exports=function(e){var t=a(e,"number");if("number"==typeof t)throw i("Can't convert number to bigint");return BigInt(t)}},(e,t,n)=>{var a=n(6),i=n(88),r=n(114),o=ArrayBuffer.prototype;a&&!("detached"in o)&&i(o,"detached",{configurable:!0,get:function(){return r(this)}})},(e,t,n)=>{var a=n(14),i=n(115),r=a(ArrayBuffer.prototype.slice);e.exports=function(e){if(0!==i(e))return!1;try{return r(e,0,0),!1}catch(e){return!0}}},(e,t,n)=>{var a=n(72),i=n(15),r=TypeError;e.exports=a(ArrayBuffer.prototype,"byteLength","get")||function(e){if("ArrayBuffer"!==i(e))throw r("ArrayBuffer expected");return e.byteLength}},(e,t,n)=>{var a=n(3),i=n(117);i&&a({target:"ArrayBuffer",proto:!0},{transfer:function(){return i(this,arguments.length?arguments[0]:void 0,!0)}})},(e,t,n)=>{var a=n(4),i=n(14),r=n(72),o=n(118),s=n(114),c=n(115),d=n(119),l=a.TypeError,u=a.structuredClone,f=a.ArrayBuffer,p=a.DataView,m=Math.min,_=f.prototype,h=p.prototype,b=i(_.slice),g=r(_,"resizable","get"),v=r(_,"maxByteLength","get"),y=i(h.getInt8),S=i(h.setInt8);e.exports=d&&function(e,t,n){var a=c(e),i=void 0===t?a:o(t),r=!g||!g(e);if(s(e))throw l("ArrayBuffer is detached");var d=u(e,{transfer:[e]});if(a===i&&(n||r))return d;if(a>=i&&(!n||r))return b(d,0,i);for(var _=n&&!r&&v?{maxByteLength:v(d)}:void 0,h=new f(i,_),D=new p(d),I=new p(h),x=m(i,a),C=0;C<x;C++)S(I,C,y(D,C));return h}},(e,t,n)=>{var a=n(62),i=n(65),r=RangeError;e.exports=function(e){if(void 0===e)return 0;var t=a(e),n=i(t);if(t!==n)throw r("Wrong length or index");return n}},(e,t,n)=>{var a=n(4),i=n(7),r=n(28),o=n(120),s=n(121),c=n(122),d=a.structuredClone;e.exports=!!d&&!i(function(){if(s&&r>92||c&&r>94||o&&r>97)return!1;var e=new ArrayBuffer(8),t=d(e,{transfer:[e]});return 0!==e.byteLength||8!==t.byteLength})},(e,t,n)=>{var a=n(121),i=n(122);e.exports=!a&&!i&&"object"==typeof window&&"object"==typeof document},e=>{e.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},(e,t,n)=>{var a=n(4),i=n(15);e.exports="process"===i(a.process)},(e,t,n)=>{var a=n(3),i=n(117);i&&a({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return i(this,arguments.length?arguments[0]:void 0,!1)}})},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0,__w_pdfjs_require__(84),__w_pdfjs_require__(86),__w_pdfjs_require__(87),__w_pdfjs_require__(2),__w_pdfjs_require__(93),__w_pdfjs_require__(101),__w_pdfjs_require__(102),__w_pdfjs_require__(105),__w_pdfjs_require__(107),__w_pdfjs_require__(109),__w_pdfjs_require__(113),__w_pdfjs_require__(116),__w_pdfjs_require__(123),__w_pdfjs_require__(89),__w_pdfjs_require__(125),__w_pdfjs_require__(136),__w_pdfjs_require__(138),__w_pdfjs_require__(141),__w_pdfjs_require__(143),__w_pdfjs_require__(145),__w_pdfjs_require__(147),__w_pdfjs_require__(149),__w_pdfjs_require__(152);var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(163),_display_utils=__w_pdfjs_require__(168),_font_loader=__w_pdfjs_require__(171),_displayNode_utils=__w_pdfjs_require__(172),_canvas=__w_pdfjs_require__(173),_worker_options=__w_pdfjs_require__(176),_message_handler=__w_pdfjs_require__(177),_metadata=__w_pdfjs_require__(178),_optional_content_config=__w_pdfjs_require__(179),_transport_stream=__w_pdfjs_require__(180),_displayFetch_stream=__w_pdfjs_require__(181),_displayNetwork=__w_pdfjs_require__(184),_displayNode_stream=__w_pdfjs_require__(185),_displaySvg=__w_pdfjs_require__(186),_xfa_text=__w_pdfjs_require__(194);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;function getDocument(e){if("string"==typeof e||e instanceof URL?e={url:e}:(0,_util.isArrayBuffer)(e)&&(e={data:e}),"object"!=typeof e)throw new Error("Invalid parameter in getDocument, need parameter object.");if(!e.url&&!e.data&&!e.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const t=new PDFDocumentLoadingTask,{docId:n}=t,a=e.url?getUrlProp(e.url):null,i=e.data?getDataProp(e.data):null,r=e.httpHeaders||null,o=!0===e.withCredentials,s=e.password??null,c=e.range instanceof PDFDataRangeTransport?e.range:null,d=Number.isInteger(e.rangeChunkSize)&&e.rangeChunkSize>0?e.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let l=e.worker instanceof PDFWorker?e.worker:null;const u=e.verbosity,f="string"!=typeof e.docBaseUrl||(0,_display_utils.isDataScheme)(e.docBaseUrl)?null:e.docBaseUrl,p="string"==typeof e.cMapUrl?e.cMapUrl:null,m=!1!==e.cMapPacked,_=e.CMapReaderFactory||DefaultCMapReaderFactory,h="string"==typeof e.standardFontDataUrl?e.standardFontDataUrl:null,b=e.StandardFontDataFactory||DefaultStandardFontDataFactory,g=!0!==e.stopAtErrors,v=Number.isInteger(e.maxImageSize)&&e.maxImageSize>-1?e.maxImageSize:-1,y=!1!==e.isEvalSupported,S="boolean"==typeof e.isOffscreenCanvasSupported?e.isOffscreenCanvasSupported:!_util.isNodeJS,D=Number.isInteger(e.canvasMaxAreaInBytes)?e.canvasMaxAreaInBytes:-1,I="boolean"==typeof e.disableFontFace?e.disableFontFace:_util.isNodeJS,x=!0===e.fontExtraProperties,C=!0===e.enableXfa,O=e.ownerDocument||globalThis.document,w=!0===e.disableRange,E=!0===e.disableStream,A=!0===e.disableAutoFetch,L=!0===e.pdfBug,k=c?c.length:e.length??NaN,M="boolean"==typeof e.useSystemFonts?e.useSystemFonts:!_util.isNodeJS&&!I,P="boolean"==typeof e.useWorkerFetch?e.useWorkerFetch:_===_display_utils.DOMCMapReaderFactory&&b===_display_utils.DOMStandardFontDataFactory&&p&&h&&(0,_display_utils.isValidFetchUrl)(p,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(h,document.baseURI),T=e.canvasFactory||new DefaultCanvasFactory({ownerDocument:O}),U=e.filterFactory||new DefaultFilterFactory({docId:n,ownerDocument:O});(0,_util.setVerbosityLevel)(u);const F={canvasFactory:T,filterFactory:U};if(P||(F.cMapReaderFactory=new _({baseUrl:p,isCompressed:m}),F.standardFontDataFactory=new b({baseUrl:h})),!l){const e={verbosity:u,port:_worker_options.GlobalWorkerOptions.workerPort};l=e.port?PDFWorker.fromPort(e):new PDFWorker(e),t._worker=l}const H={docId:n,apiVersion:"3.11.174",data:i,password:s,disableAutoFetch:A,rangeChunkSize:d,length:k,docBaseUrl:f,enableXfa:C,evaluatorOptions:{maxImageSize:v,disableFontFace:I,ignoreErrors:g,isEvalSupported:y,isOffscreenCanvasSupported:S,canvasMaxAreaInBytes:D,fontExtraProperties:x,useSystemFonts:M,cMapUrl:P?p:null,standardFontDataUrl:P?h:null}},R={ignoreErrors:g,isEvalSupported:y,disableFontFace:I,fontExtraProperties:x,enableXfa:C,ownerDocument:O,disableAutoFetch:A,pdfBug:L,styleElement:null};return l.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");const e=_fetchDocument(l,H),s=new Promise(function(e){let t;var n;c?t=new _transport_stream.PDFDataTransportStream({length:k,initialData:c.initialData,progressiveDone:c.progressiveDone,contentDispositionFilename:c.contentDispositionFilename,disableRange:w,disableStream:E},c):i||(n={url:a,length:k,httpHeaders:r,withCredentials:o,rangeChunkSize:d,disableRange:w,disableStream:E},t=_util.isNodeJS?new _displayNode_stream.PDFNodeStream(n):(0,_display_utils.isValidFetchUrl)(n.url)?new _displayFetch_stream.PDFFetchStream(n):new _displayNetwork.PDFNetworkStream(n)),e(t)});return Promise.all([e,s]).then(function(e){let[a,i]=e;if(t.destroyed)throw new Error("Loading aborted");const r=new _message_handler.MessageHandler(n,a,l.port),o=new WorkerTransport(r,t,i,R,F);t._transport=o,r.send("Ready",null)})}).catch(t._capability.reject),t}async function _fetchDocument(e,t){if(e.destroyed)throw new Error("Worker was destroyed");const n=await e.messageHandler.sendWithPromise("GetDocRequest",t,t.data?[t.data.buffer]:null);if(e.destroyed)throw new Error("Worker was destroyed");return n}function getUrlProp(e){if(e instanceof URL)return e.href;try{return new URL(e,window.location).href}catch{if(_util.isNodeJS&&"string"==typeof e)return e}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(e){if(_util.isNodeJS&&"undefined"!=typeof Buffer&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"==typeof e)return(0,_util.stringToBytes)(e);if("object"==typeof e&&!isNaN(e?.length)||(0,_util.isArrayBuffer)(e))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;class PDFDocumentLoadingTask{static#t=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId="d"+PDFDocumentLoadingTask.#t++,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await(this._transport?.destroy())}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,t){this._pdfInfo=e,this._transport=t,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(e=>{if(!e)return e;const t=[];for(const n in e)t.push(...e[n]);return t}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#n=null;#a=!1;constructor(e,t,n){let a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=a?new _display_utils.StatTimer:null,this._pdfBug=a,this.commonObjs=n.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:a=0,dontFlip:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:t,offsetX:n,offsetY:a,dontFlip:i})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render(e){let{canvasContext:t,viewport:n,intent:a="display",annotationMode:i=_util.AnnotationMode.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:s=null,annotationCanvasMap:c=null,pageColors:d=null,printAnnotationStorage:l=null}=e;this._stats?.time("Overall");const u=this._transport.getRenderingIntent(a,i,l);this.#a=!1,this.#i(),s||(s=this._transport.getOptionalContentConfig());let f=this._intentStates.get(u.cacheKey);f||(f=Object.create(null),this._intentStates.set(u.cacheKey,f)),f.streamReaderCancelTimeout&&(clearTimeout(f.streamReaderCancelTimeout),f.streamReaderCancelTimeout=null);const p=!!(u.renderingIntent&_util.RenderingIntentFlag.PRINT);f.displayReadyCapability||(f.displayReadyCapability=new _util.PromiseCapability,f.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(u));const m=e=>{f.renderTasks.delete(_),(this._maybeCleanupAfterRender||p)&&(this.#a=!0),this.#r(!p),e?(_.capability.reject(e),this._abortOperatorList({intentState:f,reason:e instanceof Error?e:new Error(e)})):_.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},_=new InternalRenderTask({callback:m,params:{canvasContext:t,viewport:n,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:f.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!p,pdfBug:this._pdfBug,pageColors:d});(f.renderTasks||=new Set).add(_);const h=_.task;return Promise.all([f.displayReadyCapability.promise,s]).then(e=>{let[t,n]=e;this.destroyed?m():(this._stats?.time("Rendering"),_.initializeGraphics({transparency:t,optionalContentConfig:n}),_.operatorListChanged())}).catch(m),h}getOperatorList(){let{intent:e="display",annotationMode:t=_util.AnnotationMode.ENABLE,printAnnotationStorage:n=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const a=this._transport.getRenderingIntent(e,t,n,!0);let i,r=this._intentStates.get(a.cacheKey);return r||(r=Object.create(null),this._intentStates.set(a.cacheKey,r)),r.opListReadCapability||(i=Object.create(null),i.operatorListChanged=function(){r.operatorList.lastChunk&&(r.opListReadCapability.resolve(r.operatorList),r.renderTasks.delete(i))},r.opListReadCapability=new _util.PromiseCapability,(r.renderTasks||=new Set).add(i),r.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(a)),r.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:e=!1,disableNormalization:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(e=>_xfa_text.XfaText.textContent(e));const t=this.streamTextContent(e);return new Promise(function(e,n){const a=t.getReader(),i={items:[],styles:Object.create(null)};!function t(){a.read().then(function(n){let{value:a,done:r}=n;r?e(i):(Object.assign(i.styles,a.styles),i.items.push(...a.items),t())},n)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),this.#a=!1,this.#i(),Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.#a=!0;const t=this.#r(!1);return e&&t&&(this._stats&&=new _display_utils.StatTimer),t}#r(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.#i(),!this.#a||this.destroyed)return!1;if(e)return this.#n=setTimeout(()=>{this.#n=null,this.#r(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#a=!1,!0}#i(){this.#n&&(clearTimeout(this.#n),this.#n=null)}_startRenderPage(e,t){const n=this._intentStates.get(t);n&&(this._stats?.timeEnd("Page Request"),n.displayReadyCapability?.resolve(e))}_renderPageChunk(e,t){for(let n=0,a=e.length;n<a;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const e of t.renderTasks)e.operatorListChanged();e.lastChunk&&this.#r(!0)}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:n,annotationStorageSerializable:a}=e;const{map:i,transfers:r}=a,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:i},r).getReader(),s=this._intentStates.get(n);s.streamReader=o;const c=()=>{o.read().then(e=>{let{value:t,done:n}=e;n?s.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,s),c())},e=>{if(s.streamReader=null,!this._transport.destroyed){if(s.operatorList){s.operatorList.lastChunk=!0;for(const e of s.renderTasks)e.operatorListChanged();this.#r(!0)}if(s.displayReadyCapability)s.displayReadyCapability.reject(e);else{if(!s.opListReadCapability)throw e;s.opListReadCapability.reject(e)}}})};c()}_abortOperatorList(e){let{intentState:t,reason:n,force:a=!1}=e;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!a){if(t.renderTasks.size>0)return;if(n instanceof _display_utils.RenderingCancelledException){let e=RENDERING_CANCELLED_TIMEOUT;return n.extraDelay>0&&n.extraDelay<1e3&&(e+=n.extraDelay),void(t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},e))}}if(t.streamReader.cancel(new _util.AbortException(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[e,n]of this._intentStates)if(n===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#o=new Set;#s=Promise.resolve();postMessage(e,t){const n={data:structuredClone(e,null)};this.#s.then(()=>{for(const e of this.#o)e.call(this,n)})}addEventListener(e,t){this.#o.add(t)}removeEventListener(e,t){this.#o.delete(t)}terminate(){this.#o.clear()}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_util.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const e=document?.currentScript?.src;e&&(PDFWorkerUtil.fallbackWorkerSrc=e.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(e,t){let n;try{if(n=new URL(e),!n.origin||"null"===n.origin)return!1}catch{return!1}const a=new URL(t,n);return n.origin===a.origin},PDFWorkerUtil.createCDNWrapper=function(e){const t=`importScripts("${e}");`;return URL.createObjectURL(new Blob([t]))};class PDFWorker{static#c;constructor(){let{name:e=null,port:t=null,verbosity:n=(0,_util.getVerbosityLevel)()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,t){if(PDFWorker.#c?.has(t))throw new Error("Cannot use more than one PDFWorker per port.");return(PDFWorker.#c||=new WeakMap).set(t,this),void this._initializeFromPort(t)}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new _message_handler.MessageHandler("main","worker",e),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:e}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,e)||(e=PDFWorkerUtil.createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e),n=new _message_handler.MessageHandler("main","worker",t),a=()=>{t.removeEventListener("error",i),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},i=()=>{this._webWorker||a()};t.addEventListener("error",i),n.on("test",e=>{t.removeEventListener("error",i),this.destroyed?a():e?(this._messageHandler=n,this._port=t,this._webWorker=t,this._readyCapability.resolve(),n.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),n.destroy(),t.terminate())}),n.on("ready",e=>{if(t.removeEventListener("error",i),this.destroyed)a();else try{r()}catch{this._setupFakeWorker()}});const r=()=>{const e=new Uint8Array;n.send("test",e,[e.buffer])};return void r()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(e=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const t=new LoopbackPort;this._port=t;const n="fake"+PDFWorkerUtil.fakeWorkerId++,a=new _message_handler.MessageHandler(n+"_worker",n,t);e.setup(a,t);const i=new _message_handler.MessageHandler(n,n+"_worker",t);this._messageHandler=i,this._readyCapability.resolve(),i.send("configure",{verbosity:this.verbosity})}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#c?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(e){if(!e?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const t=this.#c?.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new PDFWorker(e)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#d=new Map;#l=new Map;#u=new Map;#f=null;constructor(e,t,n,a,i){this.messageHandler=e,this.loadingTask=t,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this._params=a,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.#d.get(e);if(n)return n;const a=this.messageHandler.sendWithPromise(e,t);return this.#d.set(e,a),a}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_util.AnnotationMode.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=_util.RenderingIntentFlag.DISPLAY,r=_annotation_storage.SerializableEmpty;switch(e){case"any":i=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":i=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(t){case _util.AnnotationMode.DISABLE:i+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:i+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:i+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,r=(i&_util.RenderingIntentFlag.PRINT&&n instanceof _annotation_storage.PrintAnnotationStorage?n:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${t}`)}return a&&(i+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:i,cacheKey:`${i}_${r.hash}`,annotationStorageSerializable:r}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#f?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const t of this.#l.values())e.push(t._destroy());this.#l.clear(),this.#u.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#d.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(e,t)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then(function(e){let{value:n,done:a}=e;a?t.close():((0,_util.assert)(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}}),e.on("ReaderHeadersReady",e=>{const n=new _util.PromiseCapability,a=this._fullReader;return a.headersReady.then(()=>{a.isStreamingSupported&&a.isRangeSupported||(this._lastProgress&&t.onProgress?.(this._lastProgress),a.onProgress=e=>{t.onProgress?.({loaded:e.loaded,total:e.total})}),n.resolve({isStreamingSupported:a.isStreamingSupported,isRangeSupported:a.isRangeSupported,contentLength:a.contentLength})},n.reject),n.promise}),e.on("GetRangeReader",(e,t)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(e.begin,e.end);n?(t.onPull=()=>{n.read().then(function(e){let{value:n,done:a}=e;a?t.close():((0,_util.assert)(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{n.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}):t.close()}),e.on("GetDoc",e=>{let{pdfInfo:n}=e;this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new PDFDocumentProxy(n,this))}),e.on("DocException",function(e){let n;switch(e.name){case"PasswordException":n=new _util.PasswordException(e.message,e.code);break;case"InvalidPDFException":n=new _util.InvalidPDFException(e.message);break;case"MissingPDFException":n=new _util.MissingPDFException(e.message);break;case"UnexpectedResponseException":n=new _util.UnexpectedResponseException(e.message,e.status);break;case"UnknownErrorException":n=new _util.UnknownErrorException(e.message,e.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}t._capability.reject(n)}),e.on("PasswordRequest",e=>{if(this.#f=new _util.PromiseCapability,t.onPassword){const n=e=>{e instanceof Error?this.#f.reject(e):this.#f.resolve({password:e})};try{t.onPassword(n,e.code)}catch(e){this.#f.reject(e)}}else this.#f.reject(new _util.PasswordException(e.message,e.code));return this.#f.promise}),e.on("DataLoaded",e=>{t.onProgress?.({loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),e.on("StartRenderPage",e=>{this.destroyed||this.#l.get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),e.on("commonobj",t=>{let[n,a,i]=t;if(!this.destroyed&&!this.commonObjs.has(n))switch(a){case"Font":const t=this._params;if("error"in i){const e=i.error;(0,_util.warn)(`Error during font loading: ${e}`),this.commonObjs.resolve(n,e);break}const r=t.pdfBug&&globalThis.FontInspector?.enabled?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null,o=new _font_loader.FontFaceObject(i,{isEvalSupported:t.isEvalSupported,disableFontFace:t.disableFontFace,ignoreErrors:t.ignoreErrors,inspectFont:r});this.fontLoader.bind(o).catch(t=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!t.fontExtraProperties&&o.data&&(o.data=null),this.commonObjs.resolve(n,o)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,i);break;default:throw new Error(`Got unknown common object type ${a}`)}}),e.on("obj",e=>{let[t,n,a,i]=e;if(this.destroyed)return;const r=this.#l.get(n);if(!r.objs.has(t))switch(a){case"Image":if(r.objs.resolve(t,i),i){let e;if(i.bitmap){const{width:t,height:n}=i;e=t*n*4}else e=i.data?.length||0;e>_util.MAX_IMAGE_SIZE_TO_CACHE&&(r._maybeCleanupAfterRender=!0)}break;case"Pattern":r.objs.resolve(t,i);break;default:throw new Error(`Got unknown object type ${a}`)}}),e.on("DocProgress",e=>{this.destroyed||t.onProgress?.({loaded:e.loaded,total:e.total})}),e.on("FetchBuiltInCMap",e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(e):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",e=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(e):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfers:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=this.#u.get(t);if(n)return n;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(e=>{if(this.destroyed)throw new Error("Transport destroyed");const n=new PDFPageProxy(t,e,this,this._params.pdfBug);return this.#l.set(t,n),n});return this.#u.set(t,a),a}getPageIndex(e){return"object"!=typeof e||null===e||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return this.#p("GetFieldObjects")}hasJSActions(){return this.#p("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!=typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#p("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=this.#d.get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(e=>({info:e[0],metadata:e[1]?new _metadata.Metadata(e[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#d.set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of this.#l.values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#d.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:e,enableXfa:t}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e,enableXfa:t})}}class PDFObjects{#m=Object.create(null);#_(e){return this.#m[e]||={capability:new _util.PromiseCapability,data:null}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){const n=this.#_(e);return n.capability.promise.then(()=>t(n.data)),null}const n=this.#m[e];if(!n?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=this.#m[e];return t?.capability.settled||!1}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.#_(e);n.data=t,n.capability.resolve()}clear(){for(const e in this.#m){const{data:t}=this.#m[e];t?.bitmap?.close()}this.#m=Object.create(null)}}class RenderTask{#h=null;constructor(e){this.#h=e,this.onContinue=null}get promise(){return this.#h.capability.promise}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.#h.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#h.operatorList;if(!e)return!1;const{annotationCanvasMap:t}=this.#h;return e.form||e.canvas&&t?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#b=new WeakSet;constructor(e){let{callback:t,params:n,objs:a,commonObjs:i,annotationCanvasMap:r,operatorList:o,pageIndex:s,canvasFactory:c,filterFactory:d,useRequestAnimationFrame:l=!1,pdfBug:u=!1,pageColors:f=null}=e;this.callback=t,this.params=n,this.objs=a,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=s,this.canvasFactory=c,this.filterFactory=d,this._pdfBug=u,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===l&&"undefined"!=typeof window,this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(e){let{transparency:t=!1,optionalContentConfig:n}=e;if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#b.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#b.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:a,viewport:i,transform:r,background:o}=this.params;this.gfx=new _canvas.CanvasGraphics(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:n},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#b.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){this.graphicsReady?(this.stepper?.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||=this._continueBound}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#b.delete(this._canvas),this.callback())))}}const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(e,t,n)=>{var a=n(3),i=n(126);a({target:"Set",proto:!0,real:!0,forced:!n(135)("difference")},{difference:i})},(e,t,n)=>{var a=n(127),i=n(128),r=n(129),o=n(132),s=n(133),c=n(130),d=n(131),l=i.has,u=i.remove;e.exports=function(e){var t=a(this),n=s(e),i=r(t);return o(t)<=n.size?c(t,function(e){n.includes(e)&&u(i,e)}):d(n.getIterator(),function(e){l(t,e)&&u(i,e)}),i}},(e,t,n)=>{var a=n(128).has;e.exports=function(e){return a(e),e}},(e,t,n)=>{var a=n(14),i=Set.prototype;e.exports={Set:Set,add:a(i.add),has:a(i.has),remove:a(i.delete),proto:i}},(e,t,n)=>{var a=n(128),i=n(130),r=a.Set,o=a.add;e.exports=function(e){var t=new r;return i(e,function(e){o(t,e)}),t}},(e,t,n)=>{var a=n(14),i=n(131),r=n(128),o=r.Set,s=r.proto,c=a(s.forEach),d=a(s.keys),l=d(new o).next;e.exports=function(e,t,n){return n?i({iterator:d(e),next:l},t):c(e,t)}},(e,t,n)=>{var a=n(8);e.exports=function(e,t,n){for(var i,r,o=n?e:e.iterator,s=e.next;!(i=a(s,o)).done;)if(void 0!==(r=t(i.value)))return r}},(e,t,n)=>{var a=n(72),i=n(128);e.exports=a(i.proto,"size","get")||function(e){return e.size}},(e,t,n)=>{var a=n(31),i=n(47),r=n(8),o=n(62),s=n(134),c="Invalid size",d=RangeError,l=TypeError,u=Math.max,f=function(e,t,n,a){this.set=e,this.size=t,this.has=n,this.keys=a};f.prototype={getIterator:function(){return s(i(r(this.keys,this.set)))},includes:function(e){return r(this.has,this.set,e)}},e.exports=function(e){i(e);var t=+e.size;if(t!=t)throw l(c);var n=o(t);if(n<0)throw d(c);return new f(e,u(n,0),a(e.has),a(e.keys))}},e=>{e.exports=function(e){return{iterator:e,next:e.next,done:!1}}},(e,t,n)=>{var a=n(24),i=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};e.exports=function(e){var t=a("Set");try{(new t)[e](i(0));try{return(new t)[e](i(-1)),!1}catch(e){return!0}}catch(e){return!1}}},(e,t,n)=>{var a=n(3),i=n(7),r=n(137);a({target:"Set",proto:!0,real:!0,forced:!n(135)("intersection")||i(function(){return"3,2"!==Array.from(new Set([1,2,3]).intersection(new Set([3,2])))})},{intersection:r})},(e,t,n)=>{var a=n(127),i=n(128),r=n(132),o=n(133),s=n(130),c=n(131),d=i.Set,l=i.add,u=i.has;e.exports=function(e){var t=a(this),n=o(e),i=new d;return r(t)>n.size?c(n.getIterator(),function(e){u(t,e)&&l(i,e)}):s(t,function(e){n.includes(e)&&l(i,e)}),i}},(e,t,n)=>{var a=n(3),i=n(139);a({target:"Set",proto:!0,real:!0,forced:!n(135)("isDisjointFrom")},{isDisjointFrom:i})},(e,t,n)=>{var a=n(127),i=n(128).has,r=n(132),o=n(133),s=n(130),c=n(131),d=n(140);e.exports=function(e){var t=a(this),n=o(e);if(r(t)<=n.size)return!1!==s(t,function(e){if(n.includes(e))return!1},!0);var l=n.getIterator();return!1!==c(l,function(e){if(i(t,e))return d(l,"normal",!1)})}},(e,t,n)=>{var a=n(8),i=n(47),r=n(30);e.exports=function(e,t,n){var o,s;i(e);try{if(!(o=r(e,"return"))){if("throw"===t)throw n;return n}o=a(o,e)}catch(e){s=!0,o=e}if("throw"===t)throw n;if(s)throw o;return i(o),n}},(e,t,n)=>{var a=n(3),i=n(142);a({target:"Set",proto:!0,real:!0,forced:!n(135)("isSubsetOf")},{isSubsetOf:i})},(e,t,n)=>{var a=n(127),i=n(132),r=n(130),o=n(133);e.exports=function(e){var t=a(this),n=o(e);return!(i(t)>n.size)&&!1!==r(t,function(e){if(!n.includes(e))return!1},!0)}},(e,t,n)=>{var a=n(3),i=n(144);a({target:"Set",proto:!0,real:!0,forced:!n(135)("isSupersetOf")},{isSupersetOf:i})},(e,t,n)=>{var a=n(127),i=n(128).has,r=n(132),o=n(133),s=n(131),c=n(140);e.exports=function(e){var t=a(this),n=o(e);if(r(t)<n.size)return!1;var d=n.getIterator();return!1!==s(d,function(e){if(!i(t,e))return c(d,"normal",!1)})}},(e,t,n)=>{var a=n(3),i=n(146);a({target:"Set",proto:!0,real:!0,forced:!n(135)("symmetricDifference")},{symmetricDifference:i})},(e,t,n)=>{var a=n(127),i=n(128),r=n(129),o=n(133),s=n(131),c=i.add,d=i.has,l=i.remove;e.exports=function(e){var t=a(this),n=o(e).getIterator(),i=r(t);return s(n,function(e){d(t,e)?l(i,e):c(i,e)}),i}},(e,t,n)=>{var a=n(3),i=n(148);a({target:"Set",proto:!0,real:!0,forced:!n(135)("union")},{union:i})},(e,t,n)=>{var a=n(127),i=n(128).add,r=n(129),o=n(133),s=n(131);e.exports=function(e){var t=a(this),n=o(e).getIterator(),c=r(t);return s(n,function(e){i(c,e)}),c}},(e,t,n)=>{var a=n(3),i=n(4),r=n(24),o=n(11),s=n(45).f,c=n(39),d=n(150),l=n(75),u=n(76),f=n(151),p=n(82),m=n(6),_=n(36),h="DOMException",b=r("Error"),g=r(h),v=function(){d(this,y);var e=arguments.length,t=u(e<1?void 0:arguments[0]),n=u(e<2?void 0:arguments[1],"Error"),a=new g(t,n),i=b(t);return i.name=h,s(a,"stack",o(1,p(i.stack,1))),l(a,this,v),a},y=v.prototype=g.prototype,S="stack"in b(h),D="stack"in new g(1,2),I=g&&m&&Object.getOwnPropertyDescriptor(i,h),x=!(!I||I.writable&&I.configurable),C=S&&!x&&!D;a({global:!0,constructor:!0,forced:_||C},{DOMException:C?v:g});var O=r(h),w=O.prototype;if(w.constructor!==O)for(var E in _||s(w,"constructor",o(1,O)),f)if(c(f,E)){var A=f[E],L=A.s;c(O,L)||s(O,L,o(6,A.c))}},(e,t,n)=>{var a=n(25),i=TypeError;e.exports=function(e,t){if(a(t,e))return e;throw i("Incorrect invocation")}},e=>{e.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},(e,t,n)=>{var a,i=n(36),r=n(3),o=n(4),s=n(24),c=n(14),d=n(7),l=n(41),u=n(21),f=n(153),p=n(17),m=n(20),_=n(23),h=n(154),b=n(47),g=n(78),v=n(39),y=n(159),S=n(44),D=n(64),I=n(85),x=n(160),C=n(162),O=n(128),w=n(83),E=n(119),A=o.Object,L=o.Array,k=o.Date,M=o.Error,P=o.EvalError,T=o.RangeError,U=o.ReferenceError,F=o.SyntaxError,H=o.TypeError,R=o.URIError,N=o.PerformanceMark,B=o.WebAssembly,j=B&&B.CompileError||M,V=B&&B.LinkError||M,z=B&&B.RuntimeError||M,G=s("DOMException"),K=C.Map,W=C.has,q=C.get,Q=C.set,Y=O.Set,J=O.add,X=s("Object","keys"),Z=c([].push),$=c((!0).valueOf),ee=c(1..valueOf),te=c("".valueOf),ne=c(k.prototype.getTime),ae=l("structuredClone"),ie="DataCloneError",re="Transferring",oe=function(e){return!d(function(){var t=new o.Set([7]),n=e(t),a=e(A(7));return n===t||!n.has(7)||"object"!=typeof a||7!==+a})&&e},se=function(e,t){return!d(function(){var n=new t,a=e({a:n,b:n});return!(a&&a.a===a.b&&a.a instanceof t&&a.a.stack===n.stack)})},ce=o.structuredClone,de=i||!se(ce,M)||!se(ce,G)||(a=ce,!!d(function(){var e=a(new o.AggregateError([1],ae,{cause:3}));return"AggregateError"!==e.name||1!==e.errors[0]||e.message!==ae||3!==e.cause})),le=!ce&&oe(function(e){return new N(ae,{detail:e}).detail}),ue=oe(ce)||le,fe=function(e){throw new G("Uncloneable type: "+e,ie)},pe=function(e,t){throw new G((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",ie)},me=function(e,t){return ue||pe(t),ue(e)},_e=function(e,t,n){if(W(t,e))return q(t,e);var a,i,r,s,c,d;if("SharedArrayBuffer"===(n||g(e)))a=ue?ue(e):e;else{var l=o.DataView;l||"function"==typeof e.slice||pe("ArrayBuffer");try{if("function"!=typeof e.slice||e.resizable){i=e.byteLength,r="maxByteLength"in e?{maxByteLength:e.maxByteLength}:void 0,a=new ArrayBuffer(i,r),s=new l(e),c=new l(a);for(d=0;d<i;d++)c.setUint8(d,s.getUint8(d))}else a=e.slice(0)}catch(e){throw new G("ArrayBuffer is detached",ie)}}return Q(t,e,a),a},he=function(e,t,n,a,i){var r=o[t];return m(r)||pe(t),new r(_e(e.buffer,i),n,a)},be=function(e,t,n){this.object=e,this.type=t,this.metadata=n},ge=function(e,t,n){if(_(e)&&fe("Symbol"),!m(e))return e;if(t){if(W(t,e))return q(t,e)}else t=new K;var a,i,r,c,d,l,f,p,h=g(e);switch(h){case"Array":r=L(D(e));break;case"Object":r={};break;case"Map":r=new K;break;case"Set":r=new Y;break;case"RegExp":r=new RegExp(e.source,x(e));break;case"Error":switch(i=e.name){case"AggregateError":r=s("AggregateError")([]);break;case"EvalError":r=P();break;case"RangeError":r=T();break;case"ReferenceError":r=U();break;case"SyntaxError":r=F();break;case"TypeError":r=H();break;case"URIError":r=R();break;case"CompileError":r=j();break;case"LinkError":r=V();break;case"RuntimeError":r=z();break;default:r=M()}break;case"DOMException":r=new G(e.message,e.name);break;case"ArrayBuffer":case"SharedArrayBuffer":r=n?new be(e,h):_e(e,t,h);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":l="DataView"===h?e.byteLength:e.length,r=n?new be(e,h,{offset:e.byteOffset,length:l}):he(e,h,e.byteOffset,l,t);break;case"DOMQuad":try{r=new DOMQuad(ge(e.p1,t,n),ge(e.p2,t,n),ge(e.p3,t,n),ge(e.p4,t,n))}catch(t){r=me(e,h)}break;case"File":if(ue)try{r=ue(e),g(r)!==h&&(r=void 0)}catch(e){}if(!r)try{r=new File([e],e.name,e)}catch(e){}r||pe(h);break;case"FileList":if(c=function(){var e;try{e=new o.DataTransfer}catch(t){try{e=new o.ClipboardEvent("").clipboardData}catch(e){}}return e&&e.items&&e.files?e:null}()){for(d=0,l=D(e);d<l;d++)c.items.add(ge(e[d],t,n));r=c.files}else r=me(e,h);break;case"ImageData":try{r=new ImageData(ge(e.data,t,n),e.width,e.height,{colorSpace:e.colorSpace})}catch(t){r=me(e,h)}break;default:if(ue)r=ue(e);else switch(h){case"BigInt":r=A(e.valueOf());break;case"Boolean":r=A($(e));break;case"Number":r=A(ee(e));break;case"String":r=A(te(e));break;case"Date":r=new k(ne(e));break;case"Blob":try{r=e.slice(0,e.size,e.type)}catch(e){pe(h)}break;case"DOMPoint":case"DOMPointReadOnly":a=o[h];try{r=a.fromPoint?a.fromPoint(e):new a(e.x,e.y,e.z,e.w)}catch(e){pe(h)}break;case"DOMRect":case"DOMRectReadOnly":a=o[h];try{r=a.fromRect?a.fromRect(e):new a(e.x,e.y,e.width,e.height)}catch(e){pe(h)}break;case"DOMMatrix":case"DOMMatrixReadOnly":a=o[h];try{r=a.fromMatrix?a.fromMatrix(e):new a(e)}catch(e){pe(h)}break;case"AudioData":case"VideoFrame":u(e.clone)||pe(h);try{r=e.clone()}catch(e){fe(h)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":pe(h);default:fe(h)}}switch(Q(t,e,r),h){case"Array":case"Object":for(f=X(e),d=0,l=D(f);d<l;d++)p=f[d],y(r,p,ge(e[p],t,n));break;case"Map":e.forEach(function(e,a){Q(r,ge(a,t,n),ge(e,t,n))});break;case"Set":e.forEach(function(e){J(r,ge(e,t,n))});break;case"Error":S(r,"message",ge(e.message,t,n)),v(e,"cause")&&S(r,"cause",ge(e.cause,t,n)),"AggregateError"===i&&(r.errors=ge(e.errors,t,n));case"DOMException":w&&S(r,"stack",ge(e.stack,t,n))}return r},ve=function(e,t){if(!m(e))return e;if(W(t,e))return q(t,e);var n,a,i,r,o,s,c,d;if(e instanceof be)switch(n=e.type,a=e.object,n){case"ArrayBuffer":case"SharedArrayBuffer":d=_e(a,t,n);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":i=e.metadata,d=he(a,n,i.offset,i.length,t)}else switch(g(e)){case"Array":case"Object":for(s=X(e),r=0,o=D(s);r<o;r++)e[c=s[r]]=ve(e[c],t);break;case"Map":d=new K,e.forEach(function(e,n){Q(d,ve(n,t),ve(e,t))});break;case"Set":d=new Y,e.forEach(function(e){J(d,ve(e,t))});break;case"Error":e.message=ve(e.message,t),v(e,"cause")&&(e.cause=ve(e.cause,t)),"AggregateError"===e.name&&(e.errors=ve(e.errors,t));case"DOMException":w&&(e.stack=ve(e.stack,t))}return Q(t,e,d||e),d||e};r({global:!0,enumerable:!0,sham:!E,forced:de},{structuredClone:function(e){var t,n,a=I(arguments.length,1)>1&&!p(arguments[1])?b(arguments[1]):void 0,i=a?a.transfer:void 0,r=!1;void 0!==i&&(n=function(e,t){if(!m(e))throw H("Transfer option cannot be converted to a sequence");var n=[];h(e,function(e){Z(n,b(e))});for(var a,i,r,s,c,d=0,l=D(n),p=[];d<l;)if(a=n[d++],"ArrayBuffer"!==(i=g(a))){if(W(t,a))throw new G("Duplicate transferable",ie);if(E)s=ce(a,{transfer:[a]});else switch(i){case"ImageBitmap":r=o.OffscreenCanvas,f(r)||pe(i,re);try{(c=new r(a.width,a.height)).getContext("bitmaprenderer").transferFromImageBitmap(a),s=c.transferToImageBitmap()}catch(e){}break;case"AudioData":case"VideoFrame":u(a.clone)&&u(a.close)||pe(i,re);try{s=a.clone(),a.close()}catch(e){}break;case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":pe(i,re)}if(void 0===s)throw new G("This object cannot be transferred: "+i,ie);Q(t,a,s)}else Z(p,a);return p}(i,t=new K),r=!!D(n));var s=ge(e,t,r);return r&&(function(e,t){for(var n,a,i=0,r=D(e);i<r;){if(n=e[i++],W(t,n))throw new G("Duplicate transferable",ie);E?a=ce(n,{transfer:[n]}):(u(n.transfer)||pe("ArrayBuffer",re),a=n.transfer()),Q(t,n,a)}}(i,t=new K),s=ve(s,t)),s}})},(e,t,n)=>{var a=n(14),i=n(7),r=n(21),o=n(78),s=n(24),c=n(51),d=function(){},l=[],u=s("Reflect","construct"),f=/^\s*(?:class|function)\b/,p=a(f.exec),m=!f.exec(d),_=function(e){if(!r(e))return!1;try{return u(d,l,e),!0}catch(e){return!1}},h=function(e){if(!r(e))return!1;switch(o(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return m||!!p(f,c(e))}catch(e){return!0}};h.sham=!0,e.exports=!u||i(function(){var e;return _(_.call)||!_(Object)||!_(function(){e=!0})||e})?h:_},(e,t,n)=>{var a=n(99),i=n(8),r=n(47),o=n(32),s=n(155),c=n(64),d=n(25),l=n(157),u=n(158),f=n(140),p=TypeError,m=function(e,t){this.stopped=e,this.result=t},_=m.prototype;e.exports=function(e,t,n){var h,b,g,v,y,S,D,I=n&&n.that,x=!(!n||!n.AS_ENTRIES),C=!(!n||!n.IS_RECORD),O=!(!n||!n.IS_ITERATOR),w=!(!n||!n.INTERRUPTED),E=a(t,I),A=function(e){return h&&f(h,"normal",e),new m(!0,e)},L=function(e){return x?(r(e),w?E(e[0],e[1],A):E(e[0],e[1])):w?E(e,A):E(e)};if(C)h=e.iterator;else if(O)h=e;else{if(!(b=u(e)))throw p(o(e)+" is not iterable");if(s(b)){for(g=0,v=c(e);v>g;g++)if((y=L(e[g]))&&d(_,y))return y;return new m(!1)}h=l(e,b)}for(S=C?e.next:h.next;!(D=i(S,h)).done;){try{y=L(D.value)}catch(e){f(h,"throw",e)}if("object"==typeof y&&y&&d(_,y))return y}return new m(!1)}},(e,t,n)=>{var a=n(34),i=n(156),r=a("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[r]===e)}},e=>{e.exports={}},(e,t,n)=>{var a=n(8),i=n(31),r=n(47),o=n(32),s=n(158),c=TypeError;e.exports=function(e,t){var n=arguments.length<2?s(e):t;if(i(n))return r(a(n,e));throw c(o(e)+" is not iterable")}},(e,t,n)=>{var a=n(78),i=n(30),r=n(17),o=n(156),s=n(34)("iterator");e.exports=function(e){if(!r(e))return i(e,s)||i(e,"@@iterator")||o[a(e)]}},(e,t,n)=>{var a=n(18),i=n(45),r=n(11);e.exports=function(e,t,n){var o=a(t);o in e?i.f(e,o,r(0,n)):e[o]=n}},(e,t,n)=>{var a=n(8),i=n(39),r=n(25),o=n(161),s=RegExp.prototype;e.exports=function(e){var t=e.flags;return void 0!==t||"flags"in s||i(e,"flags")||!r(s,e)?t:a(o,e)}},(e,t,n)=>{var a=n(47);e.exports=function(){var e=a(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},(e,t,n)=>{var a=n(14),i=Map.prototype;e.exports={Map:Map,set:a(i.set),get:a(i.get),has:a(i.has),remove:a(i.delete),proto:i}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SerializableEmpty=t.PrintAnnotationStorage=t.AnnotationStorage=void 0,n(89),n(149),n(152);var a=n(1),i=n(164),r=n(170);const o=Object.freeze({map:null,hash:"",transfers:void 0});t.SerializableEmpty=o;class s{#g=!1;#v=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=this.#v.get(e);return void 0===n?t:Object.assign(t,n)}getRawValue(e){return this.#v.get(e)}remove(e){if(this.#v.delete(e),0===this.#v.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const e of this.#v.values())if(e instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=this.#v.get(e);let a=!1;if(void 0!==n)for(const[e,i]of Object.entries(t))n[e]!==i&&(a=!0,n[e]=i);else a=!0,this.#v.set(e,t);a&&this.#y(),t instanceof i.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type)}has(e){return this.#v.has(e)}getAll(){return this.#v.size>0?(0,a.objectFromMap)(this.#v):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return this.#v.size}#y(){this.#g||(this.#g=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this.#g&&(this.#g=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new c(this)}get serializable(){if(0===this.#v.size)return o;const e=new Map,t=new r.MurmurHash3_64,n=[],a=Object.create(null);let s=!1;for(const[n,r]of this.#v){const o=r instanceof i.AnnotationEditor?r.serialize(!1,a):r;o&&(e.set(n,o),t.update(`${n}:${JSON.stringify(o)}`),s||=!!o.bitmap)}if(s)for(const t of e.values())t.bitmap&&n.push(t.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfers:n}:o}}t.AnnotationStorage=s;class c extends s{#S;constructor(e){super();const{map:t,hash:n,transfers:a}=e.serializable,i=structuredClone(t,null);this.#S={map:i,hash:n,transfers:a}}get print(){(0,a.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#S}}t.PrintAnnotationStorage=c},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0,n(89),n(2);var a=n(165),i=n(1),r=n(168);class o{#D="";#I=!1;#x=null;#C=null;#O=null;#w=!1;#E=null;#A=this.focusin.bind(this);#L=this.focusout.bind(this);#k=!1;#M=!1;#P=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#T=!1;#U=o._zIndex++;static _borderLineWidth=-1;static _colorManager=new a.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(e){this.constructor===o&&(0,i.unreachable)("Cannot initialize AnnotationEditor."),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:a,pageX:r,pageY:s}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,a],this.pageTranslation=[r,s];const[c,d]=this.parentDimensions;this.x=e.x/c,this.y=e.y/d,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new s({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(o._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(t=>[t,e.get(t)])),t?.strings)for(const n of t.strings)o._l10nPromise.set(n,e.get(n));if(-1!==o._borderLineWidth)return;const n=getComputedStyle(document.documentElement);o._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){(0,i.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#T}set _isDraggable(e){this.#T=e,this.div?.classList.toggle("draggable",e)}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#U}setParent(e){null!==e&&(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions),this.parent=e}focusin(e){this._focusEventsAllowed&&(this.#k?this.#k=!1:this.parent.setSelected(this))}focusout(e){if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const t=e.relatedTarget;t?.closest(`#${this.id}`)||(e.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,a){const[i,r]=this.parentDimensions;[n,a]=this.screenToPageTranslation(n,a),this.x=(e+n)/i,this.y=(t+a)/r,this.fixAndSetPosition()}#F(e,t,n){let[a,i]=e;[t,n]=this.screenToPageTranslation(t,n),this.x+=t/a,this.y+=n/i,this.fixAndSetPosition()}translate(e,t){this.#F(this.parentDimensions,e,t)}translateInPage(e,t){this.#F(this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){const[n,a]=this.parentDimensions;if(this.x+=e/n,this.y+=t/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:i,y:r}=this;const[o,s]=this.#H();i+=o,r+=s,this.div.style.left=`${(100*i).toFixed(2)}%`,this.div.style.top=`${(100*r).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#H(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=o,a=n/e,i=n/t;switch(this.rotation){case 90:return[-a,i];case 180:return[a,i];case 270:return[a,-i];default:return[-a,-i]}}fixAndSetPosition(){const[e,t]=this.pageDimensions;let{x:n,y:a,width:i,height:r}=this;switch(i*=e,r*=t,n*=e,a*=t,this.rotation){case 0:n=Math.max(0,Math.min(e-i,n)),a=Math.max(0,Math.min(t-r,a));break;case 90:n=Math.max(0,Math.min(e-r,n)),a=Math.min(t,Math.max(i,a));break;case 180:n=Math.min(e,Math.max(i,n)),a=Math.min(t,Math.max(r,a));break;case 270:n=Math.min(e,Math.max(r,n)),a=Math.max(0,Math.min(t-i,a))}this.x=n/=e,this.y=a/=t;const[o,s]=this.#H();n+=o,a+=s;const{style:c}=this.div;c.left=`${(100*n).toFixed(2)}%`,c.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}static#R(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}screenToPageTranslation(e,t){return o.#R(e,t,this.parentRotation)}pageTranslationToScreen(e,t){return o.#R(e,t,360-this.parentRotation)}#N(e){switch(e){case 90:{const[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this,a=t*e,r=n*e;return i.FeatureTest.isCSSRoundSupported?[Math.round(a),Math.round(r)]:[a,r]}setDims(e,t){const[n,a]=this.parentDimensions;this.div.style.width=`${(100*e/n).toFixed(2)}%`,this.#w||(this.div.style.height=`${(100*t/a).toFixed(2)}%`),this.#x?.classList.toggle("small",e<o.SMALL_EDITOR_SIZE||t<o.SMALL_EDITOR_SIZE)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,a=n.endsWith("%"),i=!this.#w&&t.endsWith("%");if(a&&i)return;const[r,o]=this.parentDimensions;a||(e.width=`${(100*parseFloat(n)/r).toFixed(2)}%`),this.#w||i||(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#B(){if(this.#E)return;this.#E=document.createElement("div"),this.#E.classList.add("resizers");const e=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||e.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const t of e){const e=document.createElement("div");this.#E.append(e),e.classList.add("resizer",t),e.addEventListener("pointerdown",this.#j.bind(this,t)),e.addEventListener("contextmenu",r.noContextMenu)}this.div.prepend(this.#E)}#j(e,t){t.preventDefault();const{isMac:n}=i.FeatureTest.platform;if(0!==t.button||t.ctrlKey&&n)return;const a=this.#V.bind(this,e),r=this._isDraggable;this._isDraggable=!1;const o={passive:!0,capture:!0};window.addEventListener("pointermove",a,o);const s=this.x,c=this.y,d=this.width,l=this.height,u=this.parent.div.style.cursor,f=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const p=()=>{this._isDraggable=r,window.removeEventListener("pointerup",p),window.removeEventListener("blur",p),window.removeEventListener("pointermove",a,o),this.parent.div.style.cursor=u,this.div.style.cursor=f;const e=this.x,t=this.y,n=this.width,i=this.height;e===s&&t===c&&n===d&&i===l||this.addCommands({cmd:()=>{this.width=n,this.height=i,this.x=e,this.y=t;const[a,r]=this.parentDimensions;this.setDims(a*n,r*i),this.fixAndSetPosition()},undo:()=>{this.width=d,this.height=l,this.x=s,this.y=c;const[e,t]=this.parentDimensions;this.setDims(e*d,t*l),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",p),window.addEventListener("blur",p)}#V(e,t){const[n,a]=this.parentDimensions,i=this.x,r=this.y,s=this.width,c=this.height,d=o.MIN_SIZE/n,l=o.MIN_SIZE/a,u=e=>Math.round(1e4*e)/1e4,f=this.#N(this.rotation),p=(e,t)=>[f[0]*e+f[2]*t,f[1]*e+f[3]*t],m=this.#N(360-this.rotation);let _,h,b=!1,g=!1;switch(e){case"topLeft":b=!0,_=(e,t)=>[0,0],h=(e,t)=>[e,t];break;case"topMiddle":_=(e,t)=>[e/2,0],h=(e,t)=>[e/2,t];break;case"topRight":b=!0,_=(e,t)=>[e,0],h=(e,t)=>[0,t];break;case"middleRight":g=!0,_=(e,t)=>[e,t/2],h=(e,t)=>[0,t/2];break;case"bottomRight":b=!0,_=(e,t)=>[e,t],h=(e,t)=>[0,0];break;case"bottomMiddle":_=(e,t)=>[e/2,t],h=(e,t)=>[e/2,0];break;case"bottomLeft":b=!0,_=(e,t)=>[0,t],h=(e,t)=>[e,0];break;case"middleLeft":g=!0,_=(e,t)=>[0,t/2],h=(e,t)=>[e,t/2]}const v=_(s,c),y=h(s,c);let S=p(...y);const D=u(i+S[0]),I=u(r+S[1]);let x=1,C=1,[O,w]=this.screenToPageTranslation(t.movementX,t.movementY);var E,A;if([O,w]=(E=O/n,A=w/a,[m[0]*E+m[2]*A,m[1]*E+m[3]*A]),b){const e=Math.hypot(s,c);x=C=Math.max(Math.min(Math.hypot(y[0]-v[0]-O,y[1]-v[1]-w)/e,1/s,1/c),d/s,l/c)}else g?x=Math.max(d,Math.min(1,Math.abs(y[0]-v[0]-O)))/s:C=Math.max(l,Math.min(1,Math.abs(y[1]-v[1]-w)))/c;const L=u(s*x),k=u(c*C);S=p(...h(L,k));const M=D-S[0],P=I-S[1];this.width=L,this.height=k,this.x=M,this.y=P,this.setDims(n*L,a*k),this.fixAndSetPosition()}async addAltTextButton(){if(this.#x)return;const e=this.#x=document.createElement("button");e.className="altText";const t=await o._l10nPromise.get("editor_alt_text_button_label");if(e.textContent=t,e.setAttribute("aria-label",t),e.tabIndex="0",e.addEventListener("contextmenu",r.noContextMenu),e.addEventListener("pointerdown",e=>e.stopPropagation()),e.addEventListener("click",e=>{e.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),e.addEventListener("keydown",t=>{t.target===e&&"Enter"===t.key&&(t.preventDefault(),this._uiManager.editAltText(this))}),this.#z(),this.div.append(e),!o.SMALL_EDITOR_SIZE){const t=40;o.SMALL_EDITOR_SIZE=Math.min(128,Math.round(e.getBoundingClientRect().width*(1+t/100)))}}async#z(){const e=this.#x;if(!e)return;if(!this.#D&&!this.#I)return e.classList.remove("done"),void this.#C?.remove();o._l10nPromise.get("editor_alt_text_edit_button_label").then(t=>{e.setAttribute("aria-label",t)});let t=this.#C;if(!t){this.#C=t=document.createElement("span"),t.className="tooltip",t.setAttribute("role","tooltip");const n=t.id=`alt-text-tooltip-${this.id}`;e.setAttribute("aria-describedby",n);const a=100;e.addEventListener("mouseenter",()=>{this.#O=setTimeout(()=>{this.#O=null,this.#C.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},a)}),e.addEventListener("mouseleave",()=>{clearTimeout(this.#O),this.#O=null,this.#C?.classList.remove("show")})}e.classList.add("done"),t.innerText=this.#I?await o._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#D,t.parentNode||e.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#D,decorative:this.#I}}set altTextData(e){let{altText:t,decorative:n}=e;this.#D===t&&this.#I===n||(this.#D=t,this.#I=n,this.#z())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#A),this.div.addEventListener("focusout",this.#L);const[e,t]=this.parentDimensions;this.parentRotation%180!=0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[n,i]=this.getInitialTranslation();return this.translate(n,i),(0,a.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(e){const{isMac:t}=i.FeatureTest.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(this.#k=!0,this.#G(e))}#G(e){if(!this._isDraggable)return;const t=this._uiManager.isSelected(this);let n,a;this._uiManager.setUpDragSession(),t&&(n={passive:!0,capture:!0},a=e=>{const[t,n]=this.screenToPageTranslation(e.movementX,e.movementY);this._uiManager.dragSelectedEditors(t,n)},window.addEventListener("pointermove",a,n));const r=()=>{if(window.removeEventListener("pointerup",r),window.removeEventListener("blur",r),t&&window.removeEventListener("pointermove",a,n),this.#k=!1,!this._uiManager.endDragSession()){const{isMac:t}=i.FeatureTest.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",r),window.addEventListener("blur",r)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition()}getRect(e,t){const n=this.parentScale,[a,i]=this.pageDimensions,[r,o]=this.pageTranslation,s=e/n,c=t/n,d=this.x*a,l=this.y*i,u=this.width*a,f=this.height*i;switch(this.rotation){case 0:return[d+s+r,i-l-c-f+o,d+s+u+r,i-l-c+o];case 90:return[d+c+r,i-l+s+o,d+c+f+r,i-l+s+u+o];case 180:return[d-s-u+r,i-l+c+o,d-s+r,i-l+c+f+o];case 270:return[d-c-f+r,i-l-s-u+o,d-c+r,i-l-s+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,a,i,r]=e,o=i-n,s=r-a;switch(this.rotation){case 0:return[n,t-r,o,s];case 90:return[n,t-a,s,o];case 180:return[i,t-a,o,s];case 270:return[i,t-r,s,o];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#P=!0}disableEditMode(){this.#P=!1}isInEditMode(){return this.#P}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#A),this.div?.addEventListener("focusout",this.#L)}serialize(){(0,i.unreachable)("An editor must be serializable")}static deserialize(e,t,n){const a=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});a.rotation=e.rotation;const[i,r]=a.pageDimensions,[o,s,c,d]=a.getRectInCurrentCoords(e.rect,r);return a.x=o/i,a.y=s/r,a.width=c/i,a.height=d/r,a}remove(){this.div.removeEventListener("focusin",this.#A),this.div.removeEventListener("focusout",this.#L),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#x?.remove(),this.#x=null,this.#C=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#B(),this.#E.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#E?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(e,t){}disableEditing(){this.#x&&(this.#x.hidden=!0)}enableEditing(){this.#x&&(this.#x.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#M}set isEditing(e){this.#M=e,this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){this.#w=!0;const n=e/t,{style:a}=this.div;a.aspectRatio=n,a.height="auto"}static get MIN_SIZE(){return 16}}t.AnnotationEditor=o;class s extends o{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=function(e,t,n){for(const a of n)t.addEventListener(a,e[a].bind(e))},t.opacityToHex=function(e){return Math.round(Math.min(255,Math.max(1,255*e))).toString(16).padStart(2,"0")},n(93),n(101),n(102),n(105),n(107),n(109),n(113),n(116),n(123),n(2),n(89),n(125),n(136),n(138),n(141),n(143),n(145),n(147),n(166);var a=n(1),i=n(168);class r{#K=0;getId(){return`${a.AnnotationEditorPrefix}${this.#K++}`}}class o{#W=(0,a.getUuid)();#K=0;#q=null;static get _isSVGFittingCanvas(){const e=new OffscreenCanvas(1,3).getContext("2d"),t=new Image;t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';const n=t.decode().then(()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0]));return(0,a.shadow)(this,"_isSVGFittingCanvas",n)}async#Q(e,t){this.#q||=new Map;let n=this.#q.get(e);if(null===n)return null;if(n?.bitmap)return n.refCounter+=1,n;try{let e;if(n||={bitmap:null,id:`image_${this.#W}_${this.#K++}`,refCounter:0,isSvg:!1},"string"==typeof t){n.url=t;const a=await fetch(t);if(!a.ok)throw new Error(a.statusText);e=await a.blob()}else e=n.file=t;if("image/svg+xml"===e.type){const t=o._isSVGFittingCanvas,a=new FileReader,i=new Image,r=new Promise((e,r)=>{i.onload=()=>{n.bitmap=i,n.isSvg=!0,e()},a.onload=async()=>{const e=n.svgUrl=a.result;i.src=await t?`${e}#svgView(preserveAspectRatio(none))`:e},i.onerror=a.onerror=r});a.readAsDataURL(e),await r}else n.bitmap=await createImageBitmap(e);n.refCounter=1}catch(e){console.error(e),n=null}return this.#q.set(e,n),n&&this.#q.set(n.id,n),n}async getFromFile(e){const{lastModified:t,name:n,size:a,type:i}=e;return this.#Q(`${t}_${n}_${a}_${i}`,e)}async getFromUrl(e){return this.#Q(e,e)}async getFromId(e){this.#q||=new Map;const t=this.#q.get(e);return t?t.bitmap?(t.refCounter+=1,t):t.file?this.getFromFile(t.file):this.getFromUrl(t.url):null}getSvgUrl(e){const t=this.#q.get(e);return t?.isSvg?t.svgUrl:null}deleteId(e){this.#q||=new Map;const t=this.#q.get(e);t&&(t.refCounter-=1,0===t.refCounter&&(t.bitmap=null))}isValidId(e){return e.startsWith(`image_${this.#W}_`)}}class s{#Y=[];#J=!1;#X;#Z=-1;constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;this.#X=e}add(e){let{cmd:t,undo:n,mustExec:a,type:i=NaN,overwriteIfSameType:r=!1,keepUndo:o=!1}=e;if(a&&t(),this.#J)return;const s={cmd:t,undo:n,type:i};if(-1===this.#Z)return this.#Y.length>0&&(this.#Y.length=0),this.#Z=0,void this.#Y.push(s);if(r&&this.#Y[this.#Z].type===i)return o&&(s.undo=this.#Y[this.#Z].undo),void(this.#Y[this.#Z]=s);const c=this.#Z+1;c===this.#X?this.#Y.splice(0,1):(this.#Z=c,c<this.#Y.length&&this.#Y.splice(c)),this.#Y.push(s)}undo(){-1!==this.#Z&&(this.#J=!0,this.#Y[this.#Z].undo(),this.#J=!1,this.#Z-=1)}redo(){this.#Z<this.#Y.length-1&&(this.#Z+=1,this.#J=!0,this.#Y[this.#Z].cmd(),this.#J=!1)}hasSomethingToUndo(){return-1!==this.#Z}hasSomethingToRedo(){return this.#Z<this.#Y.length-1}destroy(){this.#Y=null}}t.CommandManager=s;class c{constructor(e){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=a.FeatureTest.platform;for(const[n,a,i={}]of e)for(const e of n){const n=e.startsWith("mac+");t&&n?(this.callbacks.set(e.slice(4),{callback:a,options:i}),this.allKeys.add(e.split("+").at(-1))):t||n||(this.callbacks.set(e,{callback:a,options:i}),this.allKeys.add(e.split("+").at(-1)))}}#$(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(this.#$(t));if(!n)return;const{callback:a,options:{bubbles:i=!1,args:r=[],checker:o=null}}=n;o&&!o(e,t)||(a.bind(e,...r)(),i||(t.stopPropagation(),t.preventDefault()))}}t.KeyboardManager=c;class d{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return(0,i.getColorValues)(e),(0,a.shadow)(this,"_colors",e)}convert(e){const t=(0,i.getRGB)(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[e,n]of this._colors)if(n.every((e,n)=>e===t[n]))return d._colorsMapping.get(e);return t}getHexCode(e){const t=this._colors.get(e);return t?a.Util.makeHexColor(...t):e}}t.ColorManager=d;class l{#ee=null;#te=new Map;#ne=new Map;#ae=null;#ie=null;#re=new s;#oe=0;#se=new Set;#ce=null;#de=null;#le=new Set;#ue=null;#fe=new r;#pe=!1;#me=!1;#_e=null;#he=a.AnnotationEditorType.NONE;#be=new Set;#ge=null;#ve=this.blur.bind(this);#ye=this.focus.bind(this);#Se=this.copy.bind(this);#De=this.cut.bind(this);#Ie=this.paste.bind(this);#xe=this.keydown.bind(this);#Ce=this.onEditingAction.bind(this);#Oe=this.onPageChanging.bind(this);#we=this.onScaleChanging.bind(this);#Ee=this.onRotationChanging.bind(this);#Ae={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#Le=[0,0];#ke=null;#Me=null;#Pe=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const e=l.prototype,t=e=>{const{activeElement:t}=document;return t&&e.#Me.contains(t)&&e.hasSomethingToControl()},n=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new c([[["ctrl+a","mac+meta+a"],e.selectAll],[["ctrl+z","mac+meta+z"],e.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}constructor(e,t,n,a,r,o){this.#Me=e,this.#Pe=t,this.#ae=n,this._eventBus=a,this._eventBus._on("editingaction",this.#Ce),this._eventBus._on("pagechanging",this.#Oe),this._eventBus._on("scalechanging",this.#we),this._eventBus._on("rotationchanging",this.#Ee),this.#ie=r.annotationStorage,this.#ue=r.filterFactory,this.#ge=o,this.viewParameters={realScale:i.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#Te(),this.#Ue(),this._eventBus._off("editingaction",this.#Ce),this._eventBus._off("pagechanging",this.#Oe),this._eventBus._off("scalechanging",this.#we),this._eventBus._off("rotationchanging",this.#Ee);for(const e of this.#ne.values())e.destroy();this.#ne.clear(),this.#te.clear(),this.#le.clear(),this.#ee=null,this.#be.clear(),this.#re.destroy(),this.#ae.destroy()}get hcmFilter(){return(0,a.shadow)(this,"hcmFilter",this.#ge?this.#ue.addHCMFilter(this.#ge.foreground,this.#ge.background):"none")}get direction(){return(0,a.shadow)(this,"direction",getComputedStyle(this.#Me).direction)}editAltText(e){this.#ae?.editAltText(this,e)}onPageChanging(e){let{pageNumber:t}=e;this.#oe=t-1}focusMainContainer(){this.#Me.focus()}findParent(e,t){for(const n of this.#ne.values()){const{x:a,y:i,width:r,height:o}=n.div.getBoundingClientRect();if(e>=a&&e<=a+r&&t>=i&&t<=i+o)return n}return null}disableUserSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.#Pe.classList.toggle("noUserSelect",e)}addShouldRescale(e){this.#le.add(e)}removeShouldRescale(e){this.#le.delete(e)}onScaleChanging(e){let{scale:t}=e;this.commitOrRemove(),this.viewParameters.realScale=t*i.PixelsPerInch.PDF_TO_CSS_UNITS;for(const e of this.#le)e.onScaleChanging()}onRotationChanging(e){let{pagesRotation:t}=e;this.commitOrRemove(),this.viewParameters.rotation=t}addToAnnotationStorage(e){e.isEmpty()||!this.#ie||this.#ie.has(e.id)||this.#ie.setValue(e.id,e)}#Fe(){window.addEventListener("focus",this.#ye),window.addEventListener("blur",this.#ve)}#Ue(){window.removeEventListener("focus",this.#ye),window.removeEventListener("blur",this.#ve)}blur(){if(!this.hasSelection)return;const{activeElement:e}=document;for(const t of this.#be)if(t.div.contains(e)){this.#_e=[t,e],t._focusEventsAllowed=!1;break}}focus(){if(!this.#_e)return;const[e,t]=this.#_e;this.#_e=null,t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),t.focus()}#He(){window.addEventListener("keydown",this.#xe,{capture:!0})}#Te(){window.removeEventListener("keydown",this.#xe,{capture:!0})}#Re(){document.addEventListener("copy",this.#Se),document.addEventListener("cut",this.#De),document.addEventListener("paste",this.#Ie)}#Ne(){document.removeEventListener("copy",this.#Se),document.removeEventListener("cut",this.#De),document.removeEventListener("paste",this.#Ie)}addEditListeners(){this.#He(),this.#Re()}removeEditListeners(){this.#Te(),this.#Ne()}copy(e){if(e.preventDefault(),this.#ee?.commitOrRemove(),!this.hasSelection)return;const t=[];for(const e of this.#be){const n=e.serialize(!0);n&&t.push(n)}0!==t.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}paste(e){e.preventDefault();const{clipboardData:t}=e;for(const e of t.items)for(const t of this.#de)if(t.isHandlingMimeForPasting(e.type))return void t.paste(e,this.currentLayer);let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(e){return void(0,a.warn)(`paste: "${e.message}".`)}if(!Array.isArray(n))return;this.unselectAll();const i=this.currentLayer;try{const e=[];for(const t of n){const n=i.deserialize(t);if(!n)return;e.push(n)}const t=()=>{for(const t of e)this.#Be(t);this.#je(e)},a=()=>{for(const t of e)t.remove()};this.addCommands({cmd:t,undo:a,mustExec:!0})}catch(e){(0,a.warn)(`paste: "${e.message}".`)}}keydown(e){this.getActive()?.shouldGetKeyboardEvents()||l._keyboardManager.exec(this,e)}onEditingAction(e){["undo","redo","delete","selectAll"].includes(e.name)&&this[e.name]()}#Ve(e){Object.entries(e).some(e=>{let[t,n]=e;return this.#Ae[t]!==n})&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#Ae,e)})}#ze(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}setEditingState(e){e?(this.#Fe(),this.#He(),this.#Re(),this.#Ve({isEditing:this.#he!==a.AnnotationEditorType.NONE,isEmpty:this.#Ge(),hasSomethingToUndo:this.#re.hasSomethingToUndo(),hasSomethingToRedo:this.#re.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#Ue(),this.#Te(),this.#Ne(),this.#Ve({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!this.#de){this.#de=e;for(const e of this.#de)this.#ze(e.defaultPropertiesToUpdate)}}getId(){return this.#fe.getId()}get currentLayer(){return this.#ne.get(this.#oe)}getLayer(e){return this.#ne.get(e)}get currentPageIndex(){return this.#oe}addLayer(e){this.#ne.set(e.pageIndex,e),this.#pe?e.enable():e.disable()}removeLayer(e){this.#ne.delete(e.pageIndex)}updateMode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.#he!==e){if(this.#he=e,e===a.AnnotationEditorType.NONE)return this.setEditingState(!1),void this.#Ke();this.setEditingState(!0),this.#We(),this.unselectAll();for(const t of this.#ne.values())t.updateMode(e);if(t)for(const e of this.#te.values())if(e.annotationElementId===t){this.setSelected(e),e.enterInEditMode();break}}}updateToolbar(e){e!==this.#he&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){if(this.#de)if(e!==a.AnnotationEditorParamsType.CREATE){for(const n of this.#be)n.updateParams(e,t);for(const n of this.#de)n.updateDefaultParams(e,t)}else this.currentLayer.addNewEditor(e)}enableWaiting(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.#me!==e){this.#me=e;for(const t of this.#ne.values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}#We(){if(!this.#pe){this.#pe=!0;for(const e of this.#ne.values())e.enable()}}#Ke(){if(this.unselectAll(),this.#pe){this.#pe=!1;for(const e of this.#ne.values())e.disable()}}getEditors(e){const t=[];for(const n of this.#te.values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return this.#te.get(e)}addEditor(e){this.#te.set(e.id,e)}removeEditor(e){this.#te.delete(e.id),this.unselect(e),e.annotationElementId&&this.#se.has(e.annotationElementId)||this.#ie?.remove(e.id)}addDeletedAnnotationElement(e){this.#se.add(e.annotationElementId),e.deleted=!0}isDeletedAnnotationElement(e){return this.#se.has(e)}removeDeletedAnnotationElement(e){this.#se.delete(e.annotationElementId),e.deleted=!1}#Be(e){const t=this.#ne.get(e.pageIndex);t?t.addOrRebuild(e):this.addEditor(e)}setActiveEditor(e){this.#ee!==e&&(this.#ee=e,e&&this.#ze(e.propertiesToUpdate))}toggleSelected(e){if(this.#be.has(e))return this.#be.delete(e),e.unselect(),void this.#Ve({hasSelectedEditor:this.hasSelection});this.#be.add(e),e.select(),this.#ze(e.propertiesToUpdate),this.#Ve({hasSelectedEditor:!0})}setSelected(e){for(const t of this.#be)t!==e&&t.unselect();this.#be.clear(),this.#be.add(e),e.select(),this.#ze(e.propertiesToUpdate),this.#Ve({hasSelectedEditor:!0})}isSelected(e){return this.#be.has(e)}unselect(e){e.unselect(),this.#be.delete(e),this.#Ve({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#be.size}undo(){this.#re.undo(),this.#Ve({hasSomethingToUndo:this.#re.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Ge()})}redo(){this.#re.redo(),this.#Ve({hasSomethingToUndo:!0,hasSomethingToRedo:this.#re.hasSomethingToRedo(),isEmpty:this.#Ge()})}addCommands(e){this.#re.add(e),this.#Ve({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Ge()})}#Ge(){if(0===this.#te.size)return!0;if(1===this.#te.size)for(const e of this.#te.values())return e.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const e=[...this.#be];this.addCommands({cmd:()=>{for(const t of e)t.remove()},undo:()=>{for(const t of e)this.#Be(t)},mustExec:!0})}commitOrRemove(){this.#ee?.commitOrRemove()}hasSomethingToControl(){return this.#ee||this.hasSelection}#je(e){this.#be.clear();for(const t of e)t.isEmpty()||(this.#be.add(t),t.select());this.#Ve({hasSelectedEditor:!0})}selectAll(){for(const e of this.#be)e.commit();this.#je(this.#te.values())}unselectAll(){if(this.#ee)this.#ee.commitOrRemove();else if(this.hasSelection){for(const e of this.#be)e.unselect();this.#be.clear(),this.#Ve({hasSelectedEditor:!1})}}translateSelectedEditors(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;this.#Le[0]+=e,this.#Le[1]+=t;const[n,a]=this.#Le,i=[...this.#be];this.#ke&&clearTimeout(this.#ke),this.#ke=setTimeout(()=>{this.#ke=null,this.#Le[0]=this.#Le[1]=0,this.addCommands({cmd:()=>{for(const e of i)this.#te.has(e.id)&&e.translateInPage(n,a)},undo:()=>{for(const e of i)this.#te.has(e.id)&&e.translateInPage(-n,-a)},mustExec:!1})},1e3);for(const n of i)n.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#ce=new Map;for(const e of this.#be)this.#ce.set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#ce)return!1;this.disableUserSelect(!1);const e=this.#ce;this.#ce=null;let t=!1;for(const[{x:n,y:a,pageIndex:i},r]of e)r.newX=n,r.newY=a,r.newPageIndex=i,t||=n!==r.savedX||a!==r.savedY||i!==r.savedPageIndex;if(!t)return!1;const n=(e,t,n,a)=>{if(this.#te.has(e.id)){const i=this.#ne.get(a);i?e._setParentAndPosition(i,t,n):(e.pageIndex=a,e.x=t,e.y=n)}};return this.addCommands({cmd:()=>{for(const[t,{newX:a,newY:i,newPageIndex:r}]of e)n(t,a,i,r)},undo:()=>{for(const[t,{savedX:a,savedY:i,savedPageIndex:r}]of e)n(t,a,i,r)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(this.#ce)for(const n of this.#ce.keys())n.drag(e,t)}rebuild(e){if(null===e.parent){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}isActive(e){return this.#ee===e}getActive(){return this.#ee}getMode(){return this.#he}get imageManager(){return(0,a.shadow)(this,"imageManager",new o)}}t.AnnotationEditorUIManager=l},(e,t,n)=>{var a=n(3),i=n(6),r=n(4),o=n(24),s=n(14),c=n(8),d=n(21),l=n(20),u=n(91),f=n(39),p=n(77),m=n(64),_=n(159),h=n(7),b=n(167),g=n(27),v=r.JSON,y=r.Number,S=r.SyntaxError,D=v&&v.parse,I=o("Object","keys"),x=Object.getOwnPropertyDescriptor,C=s("".charAt),O=s("".slice),w=s(/./.exec),E=s([].push),A=/^\d$/,L=/^[1-9]$/,k=/^(?:-|\d)$/,M=/^[\t\n\r ]$/,P=function(e,t,n,a){var i,r,o,s,d,p=e[t],_=a&&p===a.value,h=_&&"string"==typeof a.source?{source:a.source}:{};if(l(p)){var b=u(p),g=_?a.nodes:b?[]:{};if(b)for(i=g.length,o=m(p),s=0;s<o;s++)T(p,s,P(p,""+s,n,s<i?g[s]:void 0));else for(r=I(p),o=m(r),s=0;s<o;s++)d=r[s],T(p,d,P(p,d,n,f(g,d)?g[d]:void 0))}return c(n,e,t,p,h)},T=function(e,t,n){if(i){var a=x(e,t);if(a&&!a.configurable)return}void 0===n?delete e[t]:_(e,t,n)},U=function(e,t,n,a){this.value=e,this.end=t,this.source=n,this.nodes=a},F=function(e,t){this.source=e,this.index=t};F.prototype={fork:function(e){return new F(this.source,e)},parse:function(){var e=this.source,t=this.skip(M,this.index),n=this.fork(t),a=C(e,t);if(w(k,a))return n.number();switch(a){case"{":return n.object();case"[":return n.array();case'"':return n.string();case"t":return n.keyword(!0);case"f":return n.keyword(!1);case"n":return n.keyword(null)}throw S('Unexpected character: "'+a+'" at: '+t)},node:function(e,t,n,a,i){return new U(t,a,e?null:O(this.source,n,a),i)},object:function(){for(var e=this.source,t=this.index+1,n=!1,a={},i={};t<e.length;){if(t=this.until(['"',"}"],t),"}"===C(e,t)&&!n){t++;break}var r=this.fork(t).string(),o=r.value;t=r.end,t=this.until([":"],t)+1,t=this.skip(M,t),r=this.fork(t).parse(),_(i,o,r),_(a,o,r.value),t=this.until([",","}"],r.end);var s=C(e,t);if(","===s)n=!0,t++;else if("}"===s){t++;break}}return this.node(1,a,this.index,t,i)},array:function(){for(var e=this.source,t=this.index+1,n=!1,a=[],i=[];t<e.length;){if(t=this.skip(M,t),"]"===C(e,t)&&!n){t++;break}var r=this.fork(t).parse();if(E(i,r),E(a,r.value),t=this.until([",","]"],r.end),","===C(e,t))n=!0,t++;else if("]"===C(e,t)){t++;break}}return this.node(1,a,this.index,t,i)},string:function(){var e=this.index,t=b(this.source,this.index+1);return this.node(0,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,n=t;if("-"===C(e,n)&&n++,"0"===C(e,n))n++;else{if(!w(L,C(e,n)))throw S("Failed to parse number at: "+n);n=this.skip(A,++n)}if("."===C(e,n)&&(n=this.skip(A,++n)),("e"===C(e,n)||"E"===C(e,n))&&(n++,"+"!==C(e,n)&&"-"!==C(e,n)||n++,n===(n=this.skip(A,n))))throw S("Failed to parse number's exponent value at: "+n);return this.node(0,y(O(e,t,n)),t,n)},keyword:function(e){var t=""+e,n=this.index,a=n+t.length;if(O(this.source,n,a)!==t)throw S("Failed to parse value at: "+n);return this.node(0,e,n,a)},skip:function(e,t){for(var n=this.source;t<n.length&&w(e,C(n,t));t++);return t},until:function(e,t){t=this.skip(M,t);for(var n=C(this.source,t),a=0;a<e.length;a++)if(e[a]===n)return t;throw S('Unexpected character: "'+n+'" at: '+t)}};var H=h(function(){var e,t="9007199254740993";return D(t,function(t,n,a){e=a.source}),e!==t}),R=g&&!h(function(){return 1/D("-0 \t")!=-1/0});a({target:"JSON",stat:!0,forced:H},{parse:function(e,t){return R&&!d(t)?D(e):function(e,t){e=p(e);var n=new F(e,0,""),a=n.parse(),i=a.value,r=n.skip(M,a.end);if(r<e.length)throw S('Unexpected extra character: "'+C(e,r)+'" after the parsed data at: '+r);return d(t)?P({"":i},"",t,a):i}(e,t)}})},(e,t,n)=>{var a=n(14),i=n(39),r=SyntaxError,o=parseInt,s=String.fromCharCode,c=a("".charAt),d=a("".slice),l=a(/./.exec),u={'\\"':'"',"\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":"\n","\\r":"\r","\\t":"\t"},f=/^[\da-f]{4}$/i,p=/^[\u0000-\u001F]$/;e.exports=function(e,t){for(var n=!0,a="";t<e.length;){var m=c(e,t);if("\\"===m){var _=d(e,t,t+2);if(i(u,_))a+=u[_],t+=2;else{if("\\u"!==_)throw r('Unknown escape sequence: "'+_+'"');var h=d(e,t+=2,t+4);if(!l(f,h))throw r("Bad Unicode escape at: "+t);a+=s(o(h,16)),t+=4}}else{if('"'===m){n=!1,t++;break}if(l(p,m))throw r("Bad control character in string literal at: "+t);a+=m,t++}}if(n)throw r("Unterminated string at: "+t);return{value:a,end:t}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=void 0,t.deprecated=function(e){console.log("Deprecated API usage: "+e)},t.getColorValues=function(e){const t=document.createElement("span");t.style.visibility="hidden",document.body.append(t);for(const n of e.keys()){t.style.color=n;const a=window.getComputedStyle(t).color;e.set(n,g(a))}t.remove()},t.getCurrentTransform=function(e){const{a:t,b:n,c:a,d:i,e:r,f:o}=e.getTransform();return[t,n,a,i,r,o]},t.getCurrentTransformInverse=function(e){const{a:t,b:n,c:a,d:i,e:r,f:o}=e.getTransform().invertSelf();return[t,n,a,i,r,o]},t.getFilenameFromUrl=function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||([e]=e.split(/[#?]/,1)),e.substring(e.lastIndexOf("/")+1)},t.getPdfFilenameFromUrl=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!=typeof e)return t;if(_(e))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,a=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(e);let r=n.exec(a[1])||n.exec(a[2])||n.exec(a[3]);if(r&&(r=r[0],r.includes("%")))try{r=n.exec(decodeURIComponent(r))[0]}catch{}return r||t},t.getRGB=g,t.getXfaPageViewport=function(e,t){let{scale:n=1,rotation:a=0}=t;const{width:i,height:r}=e.attributes.style,o=[0,0,parseInt(i),parseInt(r)];return new p({viewBox:o,scale:n,rotation:a})},t.isDataScheme=_,t.isPdfFile=function(e){return"string"==typeof e&&/\.pdf$/i.test(e)},t.isValidFetchUrl=h,t.loadScript=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((n,a)=>{const i=document.createElement("script");i.src=e,i.onload=function(e){t&&i.remove(),n(e)},i.onerror=function(){a(new Error(`Cannot load script at: ${i.src}`))},(document.head||document.documentElement).append(i)})},t.noContextMenu=function(e){e.preventDefault()},t.setLayerDimensions=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t instanceof p){const{pageWidth:a,pageHeight:r}=t.rawDims,{style:o}=e,s=i.FeatureTest.isCSSRoundSupported,c=`var(--scale-factor) * ${a}px`,d=`var(--scale-factor) * ${r}px`,l=s?`round(${c}, 1px)`:`calc(${c})`,u=s?`round(${d}, 1px)`:`calc(${d})`;n&&t.rotation%180!=0?(o.width=u,o.height=l):(o.width=l,o.height=u)}a&&e.setAttribute("data-main-rotation",t.rotation)},n(2),n(93),n(101),n(102),n(105),n(107),n(109),n(113),n(116),n(123),n(89),n(84),n(86),n(87);var a=n(169),i=n(1);const r="http://www.w3.org/2000/svg";class o{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}t.PixelsPerInch=o;class s extends a.BaseFilterFactory{#qe;#Qe;#t;#Ye;#Je;#Xe;#Ze;#$e;#et;#tt;#K=0;constructor(){let{docId:e,ownerDocument:t=globalThis.document}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.#t=e,this.#Ye=t}get#q(){return this.#qe||=new Map}get#nt(){if(!this.#Qe){const e=this.#Ye.createElement("div"),{style:t}=e;t.visibility="hidden",t.contain="strict",t.width=t.height=0,t.position="absolute",t.top=t.left=0,t.zIndex=-1;const n=this.#Ye.createElementNS(r,"svg");n.setAttribute("width",0),n.setAttribute("height",0),this.#Qe=this.#Ye.createElementNS(r,"defs"),e.append(n),n.append(this.#Qe),this.#Ye.body.append(e)}return this.#Qe}addFilter(e){if(!e)return"none";let t,n,a,i,r=this.#q.get(e);if(r)return r;if(1===e.length){const r=e[0],o=new Array(256);for(let e=0;e<256;e++)o[e]=r[e]/255;i=t=n=a=o.join(",")}else{const[r,o,s]=e,c=new Array(256),d=new Array(256),l=new Array(256);for(let e=0;e<256;e++)c[e]=r[e]/255,d[e]=o[e]/255,l[e]=s[e]/255;t=c.join(","),n=d.join(","),a=l.join(","),i=`${t}${n}${a}`}if(r=this.#q.get(i),r)return this.#q.set(e,r),r;const o=`g_${this.#t}_transfer_map_${this.#K++}`,s=`url(#${o})`;this.#q.set(e,s),this.#q.set(i,s);const c=this.#at(o);return this.#it(t,n,a,c),s}addHCMFilter(e,t){const n=`${e}-${t}`;if(this.#Xe===n)return this.#Ze;if(this.#Xe=n,this.#Ze="none",this.#Je?.remove(),!e||!t)return this.#Ze;const a=this.#rt(e);e=i.Util.makeHexColor(...a);const r=this.#rt(t);if(t=i.Util.makeHexColor(...r),this.#nt.style.color="","#000000"===e&&"#ffffff"===t||e===t)return this.#Ze;const o=new Array(256);for(let e=0;e<=255;e++){const t=e/255;o[e]=t<=.03928?t/12.92:((t+.055)/1.055)**2.4}const s=o.join(","),c=`g_${this.#t}_hcm_filter`,d=this.#$e=this.#at(c);this.#it(s,s,s,d),this.#ot(d);const l=(e,t)=>{const n=a[e]/255,i=r[e]/255,o=new Array(t+1);for(let e=0;e<=t;e++)o[e]=n+e/t*(i-n);return o.join(",")};return this.#it(l(0,5),l(1,5),l(2,5),d),this.#Ze=`url(#${c})`,this.#Ze}addHighlightHCMFilter(e,t,n,a){const i=`${e}-${t}-${n}-${a}`;if(this.#et===i)return this.#tt;if(this.#et=i,this.#tt="none",this.#$e?.remove(),!e||!t)return this.#tt;const[r,o]=[e,t].map(this.#rt.bind(this));let s=Math.round(.2126*r[0]+.7152*r[1]+.0722*r[2]),c=Math.round(.2126*o[0]+.7152*o[1]+.0722*o[2]),[d,l]=[n,a].map(this.#rt.bind(this));c<s&&([s,c,d,l]=[c,s,l,d]),this.#nt.style.color="";const u=(e,t,n)=>{const a=new Array(256),i=(c-s)/n,r=e/255,o=(t-e)/(255*n);let d=0;for(let e=0;e<=n;e++){const t=Math.round(s+e*i),n=r+e*o;for(let e=d;e<=t;e++)a[e]=n;d=t+1}for(let e=d;e<256;e++)a[e]=a[d-1];return a.join(",")},f=`g_${this.#t}_hcm_highlight_filter`,p=this.#$e=this.#at(f);return this.#ot(p),this.#it(u(d[0],l[0],5),u(d[1],l[1],5),u(d[2],l[2],5),p),this.#tt=`url(#${f})`,this.#tt}destroy(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(this.#Ze||this.#tt)||(this.#Qe&&(this.#Qe.parentNode.parentNode.remove(),this.#Qe=null),this.#qe&&(this.#qe.clear(),this.#qe=null),this.#K=0)}#ot(e){const t=this.#Ye.createElementNS(r,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}#at(e){const t=this.#Ye.createElementNS(r,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),this.#nt.append(t),t}#st(e,t,n){const a=this.#Ye.createElementNS(r,t);a.setAttribute("type","discrete"),a.setAttribute("tableValues",n),e.append(a)}#it(e,t,n,a){const i=this.#Ye.createElementNS(r,"feComponentTransfer");a.append(i),this.#st(i,"feFuncR",e),this.#st(i,"feFuncG",t),this.#st(i,"feFuncB",n)}#rt(e){return this.#nt.style.color=e,g(getComputedStyle(this.#nt).getPropertyValue("color"))}}t.DOMFilterFactory=s;class c extends a.BaseCanvasFactory{constructor(){let{ownerDocument:e=globalThis.document}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}async function d(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(h(e,document.baseURI)){const n=await fetch(e);if(!n.ok)throw new Error(n.statusText);return t?new Uint8Array(await n.arrayBuffer()):(0,i.stringToBytes)(await n.text())}return new Promise((n,a)=>{const r=new XMLHttpRequest;r.open("GET",e,!0),t&&(r.responseType="arraybuffer"),r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(200===r.status||0===r.status){let e;if(t&&r.response?e=new Uint8Array(r.response):!t&&r.responseText&&(e=(0,i.stringToBytes)(r.responseText)),e)return void n(e)}a(new Error(r.statusText))}},r.send(null)})}t.DOMCanvasFactory=c;class l extends a.BaseCMapReaderFactory{_fetchData(e,t){return d(e,this.isCompressed).then(e=>({cMapData:e,compressionType:t}))}}t.DOMCMapReaderFactory=l;class u extends a.BaseStandardFontDataFactory{_fetchData(e){return d(e,!0)}}t.DOMStandardFontDataFactory=u;class f extends a.BaseSVGFactory{_createSVG(e){return document.createElementNS(r,e)}}t.DOMSVGFactory=f;class p{constructor(e){let{viewBox:t,scale:n,rotation:a,offsetX:i=0,offsetY:r=0,dontFlip:o=!1}=e;this.viewBox=t,this.scale=n,this.rotation=a,this.offsetX=i,this.offsetY=r;const s=(t[2]+t[0])/2,c=(t[3]+t[1])/2;let d,l,u,f,p,m,_,h;switch(a%=360,a<0&&(a+=360),a){case 180:d=-1,l=0,u=0,f=1;break;case 90:d=0,l=1,u=1,f=0;break;case 270:d=0,l=-1,u=-1,f=0;break;case 0:d=1,l=0,u=0,f=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(u=-u,f=-f),0===d?(p=Math.abs(c-t[1])*n+i,m=Math.abs(s-t[0])*n+r,_=(t[3]-t[1])*n,h=(t[2]-t[0])*n):(p=Math.abs(s-t[0])*n+i,m=Math.abs(c-t[1])*n+r,_=(t[2]-t[0])*n,h=(t[3]-t[1])*n),this.transform=[d*n,l*n,u*n,f*n,p-d*n*s-u*n*c,m-l*n*s-f*n*c],this.width=_,this.height=h}get rawDims(){const{viewBox:e}=this;return(0,i.shadow)(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone(){let{scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:a=this.offsetY,dontFlip:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new p({viewBox:this.viewBox.slice(),scale:e,rotation:t,offsetX:n,offsetY:a,dontFlip:i})}convertToViewportPoint(e,t){return i.Util.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=i.Util.applyTransform([e[0],e[1]],this.transform),n=i.Util.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return i.Util.applyInverseTransform([e,t],this.transform)}}t.PageViewport=p;class m extends i.BaseException{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(e,"RenderingCancelledException"),this.extraDelay=t}}function _(e){const t=e.length;let n=0;for(;n<t&&""===e[n].trim();)n++;return"data:"===e.substring(n,n+5).toLowerCase()}function h(e,t){try{const{protocol:n}=t?new URL(e,t):new URL(e);return"http:"===n||"https:"===n}catch{return!1}}let b;function g(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map(e=>parseInt(e)):e.startsWith("rgba(")?e.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):((0,i.warn)(`Not a valid color format: "${e}"`),[0,0,0])}t.RenderingCancelledException=m,t.StatTimer=class{started=Object.create(null);times=[];time(e){e in this.started&&(0,i.warn)(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||(0,i.warn)(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:e}of this.times)t=Math.max(e.length,t);for(const{name:n,start:a,end:i}of this.times)e.push(`${n.padEnd(t)} ${i-a}ms\n`);return e.join("")}},t.PDFDateString=class{static toDateObject(e){if(!e||"string"!=typeof e)return null;b||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const t=b.exec(e);if(!t)return null;const n=parseInt(t[1],10);let a=parseInt(t[2],10);a=a>=1&&a<=12?a-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let r=parseInt(t[4],10);r=r>=0&&r<=23?r:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let s=parseInt(t[6],10);s=s>=0&&s<=59?s:0;const c=t[7]||"Z";let d=parseInt(t[8],10);d=d>=0&&d<=23?d:0;let l=parseInt(t[9],10)||0;return l=l>=0&&l<=59?l:0,"-"===c?(r+=d,o+=l):"+"===c&&(r-=d,o-=l),new Date(Date.UTC(n,a,i,r,o,s))}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0,n(2);var a=n(1);class i{constructor(){this.constructor===i&&(0,a.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addHighlightHCMFilter(e,t,n,a){return"none"}destroy(){}}t.BaseFilterFactory=i;class r{constructor(){this.constructor===r&&(0,a.unreachable)("Cannot initialize BaseCanvasFactory.")}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d")}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){(0,a.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=r;class o{constructor(e){let{baseUrl:t=null,isCompressed:n=!0}=e;this.constructor===o&&(0,a.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=t,this.isCompressed=n}async fetch(e){let{name:t}=e;if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":""),i=this.isCompressed?a.CMapCompressionType.BINARY:a.CMapCompressionType.NONE;return this._fetchData(n,i).catch(e=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${n}`)})}_fetchData(e,t){(0,a.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=o;class s{constructor(e){let{baseUrl:t=null}=e;this.constructor===s&&(0,a.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!t)throw new Error("Font filename must be specified.");const n=`${this.baseUrl}${t}`;return this._fetchData(n).catch(e=>{throw new Error(`Unable to load font data at: ${n}`)})}_fetchData(e){(0,a.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=s;class c{constructor(){this.constructor===c&&(0,a.unreachable)("Cannot initialize BaseSVGFactory.")}create(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const a=this._createSVG("svg:svg");return a.setAttribute("version","1.1"),n||(a.setAttribute("width",`${e}px`),a.setAttribute("height",`${t}px`)),a.setAttribute("preserveAspectRatio","none"),a.setAttribute("viewBox",`0 0 ${e} ${t}`),a}createElement(e){if("string"!=typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){(0,a.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=c},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0,n(93),n(101),n(102),n(105),n(107),n(109),n(113),n(116),n(123),n(2);var a=n(1);const i=3285377520,r=4294901760,o=65535;t.MurmurHash3_64=class{constructor(e){this.h1=e?4294967295&e:i,this.h2=e?4294967295&e:i}update(e){let t,n;if("string"==typeof e){t=new Uint8Array(2*e.length),n=0;for(let a=0,i=e.length;a<i;a++){const i=e.charCodeAt(a);i<=255?t[n++]=i:(t[n++]=i>>>8,t[n++]=255&i)}}else{if(!(0,a.isArrayBuffer)(e))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");t=e.slice(),n=t.byteLength}const i=n>>2,s=n-4*i,c=new Uint32Array(t.buffer,0,i);let d=0,l=0,u=this.h1,f=this.h2;const p=3432918353,m=461845907,_=11601,h=13715;for(let e=0;e<i;e++)1&e?(d=c[e],d=d*p&r|d*_&o,d=d<<15|d>>>17,d=d*m&r|d*h&o,u^=d,u=u<<13|u>>>19,u=5*u+3864292196):(l=c[e],l=l*p&r|l*_&o,l=l<<15|l>>>17,l=l*m&r|l*h&o,f^=l,f=f<<13|f>>>19,f=5*f+3864292196);switch(d=0,s){case 3:d^=t[4*i+2]<<16;case 2:d^=t[4*i+1]<<8;case 1:d^=t[4*i],d=d*p&r|d*_&o,d=d<<15|d>>>17,d=d*m&r|d*h&o,1&i?u^=d:f^=d}this.h1=u,this.h2=f}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&r|36045*e&o,t=4283543511*t&r|(2950163797*(t<<16|e>>>16)&r)>>>16,e^=t>>>1,e=444984403*e&r|60499*e&o,t=3301882366*t&r|(3120437893*(t<<16|e>>>16)&r)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0,n(125),n(136),n(138),n(141),n(143),n(145),n(147),n(89),n(149);var a=n(1);t.FontLoader=class{#ct=new Set;constructor(e){let{ownerDocument:t=globalThis.document,styleElement:n=null}=e;this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),this.#ct.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){if(e&&!this.#ct.has(e.loadedName)){if((0,a.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:t,src:n,style:i}=e,r=new FontFace(t,n,i);this.addNativeFontFace(r);try{await r.load(),this.#ct.add(t)}catch{(0,a.warn)(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(r)}return}(0,a.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void await this.loadSystemFont(e.systemFontInfo);if(this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw(0,a.warn)(`Failed to load font '${t.family}': '${n}'.`),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(t=>{const n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,n)})}}get isFontLoadingAPISupported(){const e=!!this._document?.fonts;return(0,a.shadow)(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(a.isNodeJS||"undefined"!=typeof navigator&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),(0,a.shadow)(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){const{loadingRequests:t}=this,n={done:!1,complete:function(){for((0,a.assert)(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.length>0&&t[0].done;){const e=t.shift();setTimeout(e.callback,0)}},callback:e};return t.push(n),n}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,a.shadow)(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function i(e,t,n,a){return e.substring(0,t)+a+e.substring(t+n)}let r,o;const s=this._document.createElement("canvas");s.width=1,s.height=1;const c=s.getContext("2d");let d=0;const l=`lt${Date.now()}${this.loadTestFontId++}`;let u=this._loadTestFont;u=i(u,976,l.length,l);const f=1482184792;let p=n(u,16);for(r=0,o=l.length-3;r<o;r+=4)p=p-f+n(l,r)|0;r<l.length&&(p=p-f+n(l+"XXX",r)|0),u=i(u,16,4,(0,a.string32)(p));const m=`@font-face {font-family:"${l}";src:url(data:font/opentype;base64,${btoa(u)});}`;this.insertRule(m);const _=this._document.createElement("div");_.style.visibility="hidden",_.style.width=_.style.height="10px",_.style.position="absolute",_.style.top=_.style.left="0px";for(const t of[e.loadedName,l]){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=t,_.append(e)}this._document.body.append(_),function e(t,n){if(++d>30)return(0,a.warn)("Load test font never loaded."),void n();c.font="30px "+t,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(l,()=>{_.remove(),t.complete()})}},t.FontFaceObject=class{constructor(e,t){let{isEvalSupported:n=!0,disableFontFace:a=!1,ignoreErrors:i=!1,inspectFont:r=null}=t;this.compiledGlyphs=Object.create(null);for(const t in e)this[t]=e[t];this.isEvalSupported=!1!==n,this.disableFontFace=!0===a,this.ignoreErrors=!0===i,this._inspectFont=r}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let e;if(this.cssFontInfo){const t={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(t.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,t)}else e=new FontFace(this.loadedName,this.data,{});return this._inspectFont?.(this),e}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const e=(0,a.bytesToString)(this.data),t=`url(data:${this.mimetype};base64,${btoa(e)});`;let n;if(this.cssFontInfo){let e=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(e+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),n=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${e}src:${t}}`}else n=`@font-face {font-family:"${this.loadedName}";src:${t}}`;return this._inspectFont?.(this,t),n}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];let n;try{n=e.get(this.loadedName+"_path_"+t)}catch(e){if(!this.ignoreErrors)throw e;return(0,a.warn)(`getPathGenerator - ignoring character: "${e}".`),this.compiledGlyphs[t]=function(e,t){}}if(this.isEvalSupported&&a.FeatureTest.isEvalSupported){const e=[];for(const t of n){const n=void 0!==t.args?t.args.join(","):"";e.push("c.",t.cmd,"(",n,");\n")}return this.compiledGlyphs[t]=new Function("c","size",e.join(""))}return this.compiledGlyphs[t]=function(e,t){for(const a of n)"scale"===a.cmd&&(a.args=[t,-t]),e[a.cmd].apply(e,a.args)}}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0,n(2),n(93),n(101),n(102),n(105),n(107),n(109),n(113),n(116),n(123);var a=n(169),i=n(1);!function(){if(!globalThis.DOMMatrix&&i.isNodeJS)try{globalThis.DOMMatrix=__webpack_require__(5352).DOMMatrix}catch(e){(0,i.warn)(`Cannot polyfill \`DOMMatrix\`, rendering may be broken: "${e}".`)}}(),function(){if(!globalThis.Path2D&&i.isNodeJS)try{const{CanvasRenderingContext2D:e}=__webpack_require__(5352),{polyfillPath2D:t}=__webpack_require__(5451);globalThis.CanvasRenderingContext2D=e,t(globalThis)}catch(e){(0,i.warn)(`Cannot polyfill \`Path2D\`, rendering may be broken: "${e}".`)}}();const r=function(e){return new Promise((t,n)=>{__webpack_require__(5365).readFile(e,(e,a)=>{!e&&a?t(new Uint8Array(a)):n(new Error(e))})})};class o extends a.BaseFilterFactory{}t.NodeFilterFactory=o;class s extends a.BaseCanvasFactory{_createCanvas(e,t){return __webpack_require__(5352).createCanvas(e,t)}}t.NodeCanvasFactory=s;class c extends a.BaseCMapReaderFactory{_fetchData(e,t){return r(e).then(e=>({cMapData:e,compressionType:t}))}}t.NodeCMapReaderFactory=c;class d extends a.BaseStandardFontDataFactory{_fetchData(e){return r(e)}}t.NodeStandardFontDataFactory=d},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0,n(2),n(93),n(101),n(102),n(105),n(107),n(109),n(113),n(116),n(123),n(89);var a=n(1),i=n(168),r=n(174),o=n(175);const s=4096,c=16;class d{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let a;return void 0!==this.cache[e]?(a=this.cache[e],this.canvasFactory.reset(a,t,n)):(a=this.canvasFactory.create(t,n),this.cache[e]=a),a}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function l(e,t,n,a,r,o,s,c,d,l){const[u,f,p,m,_,h]=(0,i.getCurrentTransform)(e);if(0===f&&0===p){const i=s*u+_,b=Math.round(i),g=c*m+h,v=Math.round(g),y=(s+d)*u+_,S=Math.abs(Math.round(y)-b)||1,D=(c+l)*m+h,I=Math.abs(Math.round(D)-v)||1;return e.setTransform(Math.sign(u),0,0,Math.sign(m),b,v),e.drawImage(t,n,a,r,o,0,0,S,I),e.setTransform(u,f,p,m,_,h),[S,I]}if(0===u&&0===m){const i=c*p+_,b=Math.round(i),g=s*f+h,v=Math.round(g),y=(c+l)*p+_,S=Math.abs(Math.round(y)-b)||1,D=(s+d)*f+h,I=Math.abs(Math.round(D)-v)||1;return e.setTransform(0,Math.sign(f),Math.sign(p),0,b,v),e.drawImage(t,n,a,r,o,0,0,I,S),e.setTransform(u,f,p,m,_,h),[I,S]}return e.drawImage(t,n,a,r,o,s,c,d,l),[Math.hypot(u,f)*d,Math.hypot(p,m)*l]}class u{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=a.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=a.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=a.Util.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=a.Util.applyTransform(t,e),i=a.Util.applyTransform(t.slice(2),e);this.minX=Math.min(this.minX,n[0],i[0]),this.minY=Math.min(this.minY,n[1],i[1]),this.maxX=Math.max(this.maxX,n[0],i[0]),this.maxY=Math.max(this.maxY,n[1],i[1])}updateScalingPathMinMax(e,t){a.Util.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.maxX=Math.max(this.maxX,t[1]),this.minY=Math.min(this.minY,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,i,r,o,s,c,d,l){const u=a.Util.bezierBoundingBox(t,n,i,r,o,s,c,d);if(l)return l[0]=Math.min(l[0],u[0],u[2]),l[1]=Math.max(l[1],u[0],u[2]),l[2]=Math.min(l[2],u[1],u[3]),void(l[3]=Math.max(l[3],u[1],u[3]));this.updateRectMinMax(e,u)}getPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.PathType.FILL,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===r.PathType.STROKE){t||(0,a.unreachable)("Stroke bounding box must include transform.");const e=a.Util.singularValueDecompose2dScale(t),i=e[0]*this.lineWidth/2,r=e[1]*this.lineWidth/2;n[0]-=i,n[1]-=r,n[2]+=i,n[3]+=r}return n}updateClipFromPath(){const e=a.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.PathType.FILL,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return a.Util.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function f(e,t){if("undefined"!=typeof ImageData&&t instanceof ImageData)return void e.putImageData(t,0,0);const n=t.height,i=t.width,r=n%c,o=(n-r)/c,s=0===r?o:o+1,d=e.createImageData(i,c);let l,u=0;const f=t.data,p=d.data;let m,_,h,b;if(t.kind===a.ImageKind.GRAYSCALE_1BPP){const t=f.byteLength,n=new Uint32Array(p.buffer,0,p.byteLength>>2),b=n.length,g=i+7>>3,v=4294967295,y=a.FeatureTest.isLittleEndian?4278190080:255;for(m=0;m<s;m++){for(h=m<o?c:r,l=0,_=0;_<h;_++){const e=t-u;let a=0;const r=e>g?i:8*e-7,o=-8&r;let s=0,c=0;for(;a<o;a+=8)c=f[u++],n[l++]=128&c?v:y,n[l++]=64&c?v:y,n[l++]=32&c?v:y,n[l++]=16&c?v:y,n[l++]=8&c?v:y,n[l++]=4&c?v:y,n[l++]=2&c?v:y,n[l++]=1&c?v:y;for(;a<r;a++)0===s&&(c=f[u++],s=128),n[l++]=c&s?v:y,s>>=1}for(;l<b;)n[l++]=0;e.putImageData(d,0,m*c)}}else if(t.kind===a.ImageKind.RGBA_32BPP){for(_=0,b=i*c*4,m=0;m<o;m++)p.set(f.subarray(u,u+b)),u+=b,e.putImageData(d,0,_),_+=c;m<s&&(b=i*r*4,p.set(f.subarray(u,u+b)),e.putImageData(d,0,_))}else{if(t.kind!==a.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${t.kind}`);for(h=c,b=i*h,m=0;m<s;m++){for(m>=o&&(h=r,b=i*h),l=0,_=b;_--;)p[l++]=f[u++],p[l++]=f[u++],p[l++]=f[u++],p[l++]=255;e.putImageData(d,0,m*c)}}}function p(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);const n=t.height,a=t.width,i=n%c,r=(n-i)/c,s=0===i?r:r+1,d=e.createImageData(a,c);let l=0;const u=t.data,f=d.data;for(let t=0;t<s;t++){const n=t<r?c:i;({srcPos:l}=(0,o.convertBlackAndWhiteToRGBA)({src:u,srcPos:l,dest:f,width:a,height:n,nonBlackColor:0})),e.putImageData(d,0,t*c)}}function m(e,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const a of n)void 0!==e[a]&&(t[a]=e[a]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function _(e){if(e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0),!a.isNodeJS){const{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}}function h(e,t,n,a){const i=e.length;for(let r=3;r<i;r+=4){const i=e[r];if(0===i)e[r-3]=t,e[r-2]=n,e[r-1]=a;else if(i<255){const o=255-i;e[r-3]=e[r-3]*i+t*o>>8,e[r-2]=e[r-2]*i+n*o>>8,e[r-1]=e[r-1]*i+a*o>>8}}}function b(e,t,n){const a=e.length,i=1/255;for(let r=3;r<a;r+=4){const a=n?n[e[r]]:e[r];t[r]=t[r]*a*i|0}}function g(e,t,n){const a=e.length;for(let i=3;i<a;i+=4){const a=77*e[i-3]+152*e[i-2]+28*e[i-1];t[i]=n?t[i]*n[a>>8]>>8:t[i]*a>>16}}function v(e,t){const n=a.Util.singularValueDecompose2dScale(e);n[0]=Math.fround(n[0]),n[1]=Math.fround(n[1]);const r=Math.fround((globalThis.devicePixelRatio||1)*i.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==t?t:n[0]<=r||n[1]<=r}const y=["butt","round","square"],S=["miter","round","bevel"],D={},I={};class x{constructor(e,t,n,a,i,r,o,s){let{optionalContentConfig:c,markedContentStack:l=null}=r;this.ctx=e,this.current=new u(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=a,this.filterFactory=i,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=c,this.cachedCanvases=new d(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=o,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=s,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing(e){let{transform:t,viewport:n,transparency:a=!1,background:r=null}=e;const o=this.ctx.canvas.width,s=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,o,s),this.ctx.fillStyle=c,a){const e=this.cachedCanvases.getCanvas("transparent",o,s);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...(0,i.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),_(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=(0,i.getCurrentTransform)(this.ctx)}executeOperatorList(e,t,n,i){const r=e.argsArray,o=e.fnArray;let s=t||0;const c=r.length;if(c===s)return s;const d=c-s>10&&"function"==typeof n,l=d?Date.now()+15:0;let u=0;const f=this.commonObjs,p=this.objs;let m;for(;;){if(void 0!==i&&s===i.nextBreakPoint)return i.breakIt(s,n),s;if(m=o[s],m!==a.OPS.dependency)this[m].apply(this,r[s]);else for(const e of r[s]){const t=e.startsWith("g_")?f:p;if(!t.has(e))return t.get(e,n),s}if(s++,s===c)return s;if(d&&++u>10){if(Date.now()>l)return n(),s;u=0}}}#dt(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#dt(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),this.#lt()}#lt(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}_scaleImage(e,t){const n=e.width,a=e.height;let i,r,o=Math.max(Math.hypot(t[0],t[1]),1),s=Math.max(Math.hypot(t[2],t[3]),1),c=n,d=a,l="prescale1";for(;o>2&&c>1||s>2&&d>1;){let t=c,n=d;o>2&&c>1&&(t=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),o/=c/t),s>2&&d>1&&(n=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d)/2,s/=d/n),i=this.cachedCanvases.getCanvas(l,t,n),r=i.context,r.clearRect(0,0,t,n),r.drawImage(e,0,0,c,d,0,0,t,n),e=i.canvas,c=t,d=n,l="prescale1"===l?"prescale2":"prescale1"}return{img:e,paintWidth:c,paintHeight:d}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:o}=e,s=this.current.fillColor,c=this.current.patternFill,d=(0,i.getCurrentTransform)(t);let u,f,m,_;if((e.bitmap||e.data)&&e.count>1){const t=e.bitmap||e.data.buffer;f=JSON.stringify(c?d:[d.slice(0,4),s]),u=this._cachedBitmapsMap.get(t),u||(u=new Map,this._cachedBitmapsMap.set(t,u));const n=u.get(f);if(n&&!c)return{canvas:n,offsetX:Math.round(Math.min(d[0],d[2])+d[4]),offsetY:Math.round(Math.min(d[1],d[3])+d[5])};m=n}m||(_=this.cachedCanvases.getCanvas("maskCanvas",n,o),p(_.context,e));let h=a.Util.transform(d,[1/n,0,0,-1/o,0,0]);h=a.Util.transform(h,[1,0,0,1,0,-o]);const b=a.Util.applyTransform([0,0],h),g=a.Util.applyTransform([n,o],h),y=a.Util.normalizeRect([b[0],b[1],g[0],g[1]]),S=Math.round(y[2]-y[0])||1,D=Math.round(y[3]-y[1])||1,I=this.cachedCanvases.getCanvas("fillCanvas",S,D),x=I.context,C=Math.min(b[0],g[0]),O=Math.min(b[1],g[1]);x.translate(-C,-O),x.transform(...h),m||(m=this._scaleImage(_.canvas,(0,i.getCurrentTransformInverse)(x)),m=m.img,u&&c&&u.set(f,m)),x.imageSmoothingEnabled=v((0,i.getCurrentTransform)(x),e.interpolate),l(x,m,0,0,m.width,m.height,0,0,n,o),x.globalCompositeOperation="source-in";const w=a.Util.transform((0,i.getCurrentTransformInverse)(x),[1,0,0,1,-C,-O]);return x.fillStyle=c?s.getPattern(t,this,w,r.PathType.FILL):s,x.fillRect(0,0,n,o),u&&!c&&(this.cachedCanvases.delete("fillCanvas"),u.set(f,I.canvas)),{canvas:I.canvas,offsetX:Math.round(C),offsetY:Math.round(O)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=y[e]}setLineJoin(e){this.ctx.lineJoin=S[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;void 0!==n.setLineDash&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=a.context;const r=this.ctx;r.setTransform(...(0,i.getCurrentTransform)(this.suspendedCtx)),m(this.suspendedCtx,r),function(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},e.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},e.transform=function(e,n,a,i,r,o){t.transform(e,n,a,i,r,o),this.__originalTransform(e,n,a,i,r,o)},e.setTransform=function(e,n,a,i,r,o){t.setTransform(e,n,a,i,r,o),this.__originalSetTransform(e,n,a,i,r,o)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,a,i,r,o){t.bezierCurveTo(e,n,a,i,r,o),this.__originalBezierCurveTo(e,n,a,i,r,o)},e.rect=function(e,n,a,i){t.rect(e,n,a,i),this.__originalRect(e,n,a,i)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(r,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),m(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask;(function(e,t,n,a){const i=a[0],r=a[1],o=a[2]-i,s=a[3]-r;0!==o&&0!==s&&(function(e,t,n,a,i,r,o,s,c,d,l){const u=!!r,f=u?r[0]:0,p=u?r[1]:0,m=u?r[2]:0,_="Luminosity"===i?g:b,v=Math.min(a,Math.ceil(1048576/n));for(let i=0;i<a;i+=v){const r=Math.min(v,a-i),b=e.getImageData(s-d,i+(c-l),n,r),g=t.getImageData(s,i+c,n,r);u&&h(b.data,f,p,m),_(b.data,g.data,o),t.putImageData(g,s,i+c)}}(t.context,n,o,s,t.subtype,t.backdrop,t.transferMap,i,r,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())})(this.suspendedCtx,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(m(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),m(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,a,i,r){this.ctx.transform(e,t,n,a,i,r),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const r=this.ctx,o=this.current;let s,c,d=o.x,l=o.y;const u=(0,i.getCurrentTransform)(r),f=0===u[0]&&0===u[3]||0===u[1]&&0===u[2],p=f?n.slice(0):null;for(let n=0,i=0,m=e.length;n<m;n++)switch(0|e[n]){case a.OPS.rectangle:d=t[i++],l=t[i++];const e=t[i++],n=t[i++],m=d+e,_=l+n;r.moveTo(d,l),0===e||0===n?r.lineTo(m,_):(r.lineTo(m,l),r.lineTo(m,_),r.lineTo(d,_)),f||o.updateRectMinMax(u,[d,l,m,_]),r.closePath();break;case a.OPS.moveTo:d=t[i++],l=t[i++],r.moveTo(d,l),f||o.updatePathMinMax(u,d,l);break;case a.OPS.lineTo:d=t[i++],l=t[i++],r.lineTo(d,l),f||o.updatePathMinMax(u,d,l);break;case a.OPS.curveTo:s=d,c=l,d=t[i+4],l=t[i+5],r.bezierCurveTo(t[i],t[i+1],t[i+2],t[i+3],d,l),o.updateCurvePathMinMax(u,s,c,t[i],t[i+1],t[i+2],t[i+3],d,l,p),i+=6;break;case a.OPS.curveTo2:s=d,c=l,r.bezierCurveTo(d,l,t[i],t[i+1],t[i+2],t[i+3]),o.updateCurvePathMinMax(u,s,c,d,l,t[i],t[i+1],t[i+2],t[i+3],p),d=t[i+2],l=t[i+3],i+=4;break;case a.OPS.curveTo3:s=d,c=l,d=t[i+2],l=t[i+3],r.bezierCurveTo(t[i],t[i+1],d,l,d,l),o.updateCurvePathMinMax(u,s,c,t[i],t[i+1],d,l,d,l,p),i+=4;break;case a.OPS.closePath:r.closePath()}f&&o.updateScalingPathMinMax(u,p),o.setCurrentPoint(d,l)}closePath(){this.ctx.closePath()}stroke(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof n&&n?.getPattern?(t.save(),t.strokeStyle=n.getPattern(t,this,(0,i.getCurrentTransformInverse)(t),r.PathType.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.ctx,n=this.current.fillColor;let a=!1;this.current.patternFill&&(t.save(),t.fillStyle=n.getPattern(t,this,(0,i.getCurrentTransformInverse)(t),r.PathType.FILL),a=!0);const o=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==o&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),a&&t.restore(),e&&this.consumePath(o)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=D}eoClip(){this.pendingClip=I}beginText(){this.current.textMatrix=a.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(void 0!==e){t.save(),t.beginPath();for(const n of e)t.setTransform(...n.transform),t.translate(n.x,n.y),n.addToPath(t,n.fontSize);t.restore(),t.clip(),t.beginPath(),delete this.pendingTextPaths}else t.beginPath()}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){const n=this.commonObjs.get(e),i=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(i.fontMatrix=n.fontMatrix||a.FONT_IDENTITY_MATRIX,0!==i.fontMatrix[0]&&0!==i.fontMatrix[3]||(0,a.warn)("Invalid font matrix for font "+e),t<0?(t=-t,i.fontDirection=-1):i.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const r=n.loadedName||"sans-serif",o=n.systemFontInfo?.css||`"${r}", ${n.fallbackName}`;let s="normal";n.black?s="900":n.bold&&(s="bold");const c=n.italic?"italic":"normal";let d=t;t<16?d=16:t>100&&(d=100),this.current.fontSizeScale=t/d,this.ctx.font=`${c} ${s} ${d}px ${o}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,a,i,r){this.current.textMatrix=[e,t,n,a,i,r],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,r){const o=this.ctx,s=this.current,c=s.font,d=s.textRenderingMode,l=s.fontSize/s.fontSizeScale,u=d&a.TextRenderingMode.FILL_STROKE_MASK,f=!!(d&a.TextRenderingMode.ADD_TO_PATH_FLAG),p=s.patternFill&&!c.missingFile;let m;(c.disableFontFace||f||p)&&(m=c.getPathGenerator(this.commonObjs,e)),c.disableFontFace||p?(o.save(),o.translate(t,n),o.beginPath(),m(o,l),r&&o.setTransform(...r),u!==a.TextRenderingMode.FILL&&u!==a.TextRenderingMode.FILL_STROKE||o.fill(),u!==a.TextRenderingMode.STROKE&&u!==a.TextRenderingMode.FILL_STROKE||o.stroke(),o.restore()):(u!==a.TextRenderingMode.FILL&&u!==a.TextRenderingMode.FILL_STROKE||o.fillText(e,t,n),u!==a.TextRenderingMode.STROKE&&u!==a.TextRenderingMode.FILL_STROKE||o.strokeText(e,t,n)),f&&(this.pendingTextPaths||=[]).push({transform:(0,i.getCurrentTransform)(o),x:t,y:n,fontSize:l,addToPath:m})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let e=3;e<t.length;e+=4)if(t[e]>0&&t[e]<255){n=!0;break}return(0,a.shadow)(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const o=t.fontSize;if(0===o)return;const s=this.ctx,c=t.fontSizeScale,d=t.charSpacing,l=t.wordSpacing,u=t.fontDirection,f=t.textHScale*u,p=e.length,m=n.vertical,_=m?1:-1,h=n.defaultVMetrics,b=o*t.fontMatrix[0],g=t.textRenderingMode===a.TextRenderingMode.FILL&&!n.disableFontFace&&!t.patternFill;let v;if(s.save(),s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),u>0?s.scale(f,-1):s.scale(f,1),t.patternFill){s.save();const e=t.fillColor.getPattern(s,this,(0,i.getCurrentTransformInverse)(s),r.PathType.FILL);v=(0,i.getCurrentTransform)(s),s.restore(),s.fillStyle=e}let y=t.lineWidth;const S=t.textMatrixScale;if(0===S||0===y){const e=t.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;e!==a.TextRenderingMode.STROKE&&e!==a.TextRenderingMode.FILL_STROKE||(y=this.getSinglePixelWidth())}else y/=S;if(1!==c&&(s.scale(c,c),y/=c),s.lineWidth=y,n.isInvalidPDFjsFont){const n=[];let a=0;for(const t of e)n.push(t.unicode),a+=t.width;return s.fillText(n.join(""),0,0),t.x+=a*b*f,s.restore(),void this.compose()}let D,I=0;for(D=0;D<p;++D){const t=e[D];if("number"==typeof t){I+=_*t*o/1e3;continue}let a=!1;const i=(t.isSpace?l:0)+d,r=t.fontChar,f=t.accent;let p,y,S=t.width;if(m){const e=t.vmetric||h,n=-(t.vmetric?e[1]:.5*S)*b,a=e[2]*b;S=e?-e[0]:S,p=n/c,y=(I+a)/c}else p=I/c,y=0;if(n.remeasure&&S>0){const e=1e3*s.measureText(r).width/o*c;if(S<e&&this.isFontSubpixelAAEnabled){const t=S/e;a=!0,s.save(),s.scale(t,1),p/=t}else S!==e&&(p+=(S-e)/2e3*o/c)}if(this.contentVisible&&(t.isInFont||n.missingFile))if(g&&!f)s.fillText(r,p,y);else if(this.paintChar(r,p,y,v),f){const e=p+o*f.offset.x/c,t=y-o*f.offset.y/c;this.paintChar(f.fontChar,e,t,v)}I+=m?S*b-i*u:S*b+i*u,a&&s.restore()}m?t.y-=I:t.x+=I*f,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,i=n.font,r=n.fontSize,o=n.fontDirection,s=i.vertical?1:-1,c=n.charSpacing,d=n.wordSpacing,l=n.textHScale*o,u=n.fontMatrix||a.FONT_IDENTITY_MATRIX,f=e.length;let p,m,_,h;if(n.textRenderingMode!==a.TextRenderingMode.INVISIBLE&&0!==r){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(l,o),p=0;p<f;++p){if(m=e[p],"number"==typeof m){h=s*m*r/1e3,this.ctx.translate(h,0),n.x+=h*l;continue}const o=(m.isSpace?d:0)+c,f=i.charProcOperatorList[m.operatorListId];f?(this.contentVisible&&(this.processingType3=m,this.save(),t.scale(r,r),t.transform(...u),this.executeOperatorList(f),this.restore()),_=a.Util.applyTransform([m.width,0],u)[0]*r+o,t.translate(_,0),n.x+=_*l):(0,a.warn)(`Type3 character "${m.operatorListId}" is not available.`)}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,a,i,r){this.ctx.rect(n,a,i-n,r-a),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if("TilingPattern"===e[0]){const n=e[1],a=this.baseTransform||(0,i.getCurrentTransform)(this.ctx),o={createCanvasGraphics:e=>new x(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new r.TilingPattern(e,n,this.ctx,o,a)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){const i=a.Util.makeHexColor(e,t,n);this.ctx.strokeStyle=i,this.current.strokeColor=i}setFillRGBColor(e,t,n){const i=a.Util.makeHexColor(e,t,n);this.ctx.fillStyle=i,this.current.fillColor=i,this.current.patternFill=!1}_getPattern(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.cachedPatterns.has(e)?t=this.cachedPatterns.get(e):(t=(0,r.getShadingPattern)(this.getObject(e)),this.cachedPatterns.set(e,t)),n&&(t.matrix=n),t}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,(0,i.getCurrentTransformInverse)(t),r.PathType.SHADING);const o=(0,i.getCurrentTransformInverse)(t);if(o){const{width:e,height:n}=t.canvas,[i,r,s,c]=a.Util.getAxialAlignedBoundingBox([0,0,e,n],o);this.ctx.fillRect(i,r,s-i,c-r)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,a.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,a.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(e)&&6===e.length&&this.transform(...e),this.baseTransform=(0,i.getCurrentTransform)(this.ctx),t)){const e=t[2]-t[0],n=t[3]-t[1];this.ctx.rect(t[0],t[1],e,n),this.current.updateRectMinMax((0,i.getCurrentTransform)(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||(0,a.info)("TODO: Support non-isolated groups."),e.knockout&&(0,a.warn)("Knockout groups not supported.");const n=(0,i.getCurrentTransform)(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=a.Util.getAxialAlignedBoundingBox(e.bbox,(0,i.getCurrentTransform)(t));const o=[0,0,t.canvas.width,t.canvas.height];r=a.Util.intersect(r,o)||[0,0,0,0];const c=Math.floor(r[0]),d=Math.floor(r[1]);let l=Math.max(Math.ceil(r[2])-c,1),u=Math.max(Math.ceil(r[3])-d,1),f=1,p=1;l>s&&(f=l/s,l=s),u>s&&(p=u/s,u=s),this.current.startNewPathAndClipBox([0,0,l,u]);let _="groupAt"+this.groupLevel;e.smask&&(_+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(_,l,u),b=h.context;b.scale(1/f,1/p),b.translate(-c,-d),b.transform(...n),e.smask?this.smaskStack.push({canvas:h.canvas,context:b,offsetX:c,offsetY:d,scaleX:f,scaleY:p,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(c,d),t.scale(f,p),t.save()),m(t,b),this.ctx=b,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const e=(0,i.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...e);const n=a.Util.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],e);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,n,r,o){if(this.#dt(),_(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(t)&&4===t.length){const r=t[2]-t[0],s=t[3]-t[1];if(o&&this.annotationCanvasMap){(n=n.slice())[4]-=t[0],n[5]-=t[1],(t=t.slice())[0]=t[1]=0,t[2]=r,t[3]=s;const[o,c]=a.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(this.ctx)),{viewportScale:d}=this,l=Math.ceil(r*this.outputScaleX*d),u=Math.ceil(s*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(l,u);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(e,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(o,0,0,-c,0,s*c),_(this.ctx)}else _(this.ctx),this.ctx.rect(t[0],t[1],r,s),this.ctx.clip(),this.endPath()}this.current=new u(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#lt(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;(e=this.getObject(e.data,e)).count=t;const n=this.ctx,a=this.processingType3;if(a&&(void 0===a.compiled&&(a.compiled=function(e){const{width:t,height:n}=e;if(t>1e3||n>1e3)return null;const a=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),i=t+1;let r,o,s,c=new Uint8Array(i*(n+1));const d=t+7&-8;let l=new Uint8Array(d*n),u=0;for(const t of e.data){let e=128;for(;e>0;)l[u++]=t&e?0:255,e>>=1}let f=0;for(u=0,0!==l[u]&&(c[0]=1,++f),o=1;o<t;o++)l[u]!==l[u+1]&&(c[o]=l[u]?2:1,++f),u++;for(0!==l[u]&&(c[o]=2,++f),r=1;r<n;r++){u=r*d,s=r*i,l[u-d]!==l[u]&&(c[s]=l[u]?1:8,++f);let e=(l[u]?4:0)+(l[u-d]?8:0);for(o=1;o<t;o++)e=(e>>2)+(l[u+1]?4:0)+(l[u-d+1]?8:0),a[e]&&(c[s+o]=a[e],++f),u++;if(l[u-d]!==l[u]&&(c[s+o]=l[u]?2:4,++f),f>1e3)return null}for(u=d*(n-1),s=r*i,0!==l[u]&&(c[s]=8,++f),o=1;o<t;o++)l[u]!==l[u+1]&&(c[s+o]=l[u]?4:8,++f),u++;if(0!==l[u]&&(c[s+o]=4,++f),f>1e3)return null;const p=new Int32Array([0,i,-1,0,-i,0,0,0,1]),m=new Path2D;for(r=0;f&&r<=n;r++){let e=r*i;const n=e+t;for(;e<n&&!c[e];)e++;if(e===n)continue;m.moveTo(e%i,r);const a=e;let o=c[e];do{const t=p[o];do{e+=t}while(!c[e]);const n=c[e];5!==n&&10!==n?(o=n,c[e]=0):(o=n&51*o>>4,c[e]&=o>>2|o<<2),m.lineTo(e%i,e/i|0),c[e]||--f}while(a!==e);--r}return l=null,c=null,function(e){e.save(),e.scale(1/t,-1/n),e.translate(0,-n),e.fill(m),e.beginPath(),e.restore()}}(e)),a.compiled))return void a.compiled(n);const i=this._createMaskCanvas(e),r=i.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(r,i.offsetX,i.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;if(!this.contentVisible)return;e=this.getObject(e.data,e);const c=this.ctx;c.save();const d=(0,i.getCurrentTransform)(c);c.transform(t,n,r,o,0,0);const l=this._createMaskCanvas(e);c.setTransform(1,0,0,1,l.offsetX-d[4],l.offsetY-d[5]);for(let e=0,i=s.length;e<i;e+=2){const i=a.Util.transform(d,[t,n,r,o,s[e],s[e+1]]),[u,f]=a.Util.applyTransform([0,0],i);c.drawImage(l.canvas,u,f)}c.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,a=this.current.patternFill;for(const o of e){const{data:e,width:s,height:c,transform:d}=o,u=this.cachedCanvases.getCanvas("maskCanvas",s,c),f=u.context;f.save(),p(f,this.getObject(e,o)),f.globalCompositeOperation="source-in",f.fillStyle=a?n.getPattern(f,this,(0,i.getCurrentTransformInverse)(t),r.PathType.FILL):n,f.fillRect(0,0,s,c),f.restore(),t.save(),t.transform(...d),t.scale(1,-1),l(t,u.canvas,0,0,s,c,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);t?this.paintInlineImageXObject(t):(0,a.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,n,i){if(!this.contentVisible)return;const r=this.getObject(e);if(!r)return void(0,a.warn)("Dependent image isn't ready yet");const o=r.width,s=r.height,c=[];for(let e=0,a=i.length;e<a;e+=2)c.push({transform:[t,0,0,n,i[e],i[e+1]],x:0,y:0,w:o,h:s});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:n,height:a}=e,i=this.cachedCanvases.getCanvas("inlineImage",n,a),r=i.context;return r.filter=this.current.transferMaps,r.drawImage(t,0,0),r.filter="none",i.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,r=this.ctx;if(this.save(),!a.isNodeJS){const{filter:e}=r;"none"!==e&&""!==e&&(r.filter="none")}let o;if(r.scale(1/t,-1/n),e.bitmap)o=this.applyTransferMapsToBitmap(e);else if("function"==typeof HTMLElement&&e instanceof HTMLElement||!e.data)o=e;else{const a=this.cachedCanvases.getCanvas("inlineImage",t,n).context;f(a,e),o=this.applyTransferMapsToCanvas(a)}const s=this._scaleImage(o,(0,i.getCurrentTransformInverse)(r));r.imageSmoothingEnabled=v((0,i.getCurrentTransform)(r),e.interpolate),l(r,s.img,0,0,s.paintWidth,s.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let a;if(e.bitmap)a=e.bitmap;else{const t=e.width,n=e.height,i=this.cachedCanvases.getCanvas("inlineImage",t,n).context;f(i,e),a=this.applyTransferMapsToCanvas(i)}for(const e of t)n.save(),n.transform(...e.transform),n.scale(1,-1),l(n,a,e.x,e.y,e.w,e.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){"OC"===e?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===I?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=(0,i.getCurrentTransform)(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),a=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,a)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:n,c:a,d:i}=this.ctx.getTransform();let r,o;if(0===n&&0===a){const n=Math.abs(t),a=Math.abs(i);if(n===a)if(0===e)r=o=1/n;else{const t=n*e;r=o=t<1?1/t:1}else if(0===e)r=1/n,o=1/a;else{const t=n*e,i=a*e;r=t<1?1/t:1,o=i<1?1/i:1}}else{const s=Math.abs(t*i-n*a),c=Math.hypot(t,n),d=Math.hypot(a,i);if(0===e)r=d/s,o=c/s;else{const t=e*s;r=d>t?d/t:1,o=c>t?c/t:1}}this._cachedScaleForStroking[0]=r,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[a,i]=this.getScaleForStroking();if(t.lineWidth=n||1,1===a&&1===i)return void t.stroke();const r=t.getLineDash();if(e&&t.save(),t.scale(a,i),r.length>0){const e=Math.max(a,i);t.setLineDash(r.map(t=>t/e)),t.lineDashOffset/=e}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}t.CanvasGraphics=x;for(const e in a.OPS)void 0!==x.prototype[e]&&(x.prototype[a.OPS[e]]=x.prototype[e])},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=function(e){switch(e[0]){case"RadialAxial":return new c(e);case"Mesh":return new u(e);case"Dummy":return new f}throw new Error(`Unknown IR type: ${e[0]}`)},n(2);var a=n(1),i=n(168);const r={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function o(e,t){if(!t)return;const n=t[2]-t[0],a=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],n,a),e.clip(i)}t.PathType=r;class s{constructor(){this.constructor===s&&(0,a.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,a.unreachable)("Abstract method `getPattern` called.")}}class c extends s{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const e of this._colorStops)t.addColorStop(e[0],e[1]);return t}getPattern(e,t,n,s){let c;if(s===r.STROKE||s===r.FILL){const r=t.current.getClippedPathBoundingBox(s,(0,i.getCurrentTransform)(e))||[0,0,0,0],d=Math.ceil(r[2]-r[0])||1,l=Math.ceil(r[3]-r[1])||1,u=t.cachedCanvases.getCanvas("pattern",d,l,!0),f=u.context;f.clearRect(0,0,f.canvas.width,f.canvas.height),f.beginPath(),f.rect(0,0,f.canvas.width,f.canvas.height),f.translate(-r[0],-r[1]),n=a.Util.transform(n,[1,0,0,1,r[0],r[1]]),f.transform(...t.baseTransform),this.matrix&&f.transform(...this.matrix),o(f,this._bbox),f.fillStyle=this._createGradient(f),f.fill(),c=e.createPattern(u.canvas,"no-repeat");const p=new DOMMatrix(n);c.setTransform(p)}else o(e,this._bbox),c=this._createGradient(e);return c}}function d(e,t,n,a,i,r,o,s){const c=t.coords,d=t.colors,l=e.data,u=4*e.width;let f;c[n+1]>c[a+1]&&(f=n,n=a,a=f,f=r,r=o,o=f),c[a+1]>c[i+1]&&(f=a,a=i,i=f,f=o,o=s,s=f),c[n+1]>c[a+1]&&(f=n,n=a,a=f,f=r,r=o,o=f);const p=(c[n]+t.offsetX)*t.scaleX,m=(c[n+1]+t.offsetY)*t.scaleY,_=(c[a]+t.offsetX)*t.scaleX,h=(c[a+1]+t.offsetY)*t.scaleY,b=(c[i]+t.offsetX)*t.scaleX,g=(c[i+1]+t.offsetY)*t.scaleY;if(m>=g)return;const v=d[r],y=d[r+1],S=d[r+2],D=d[o],I=d[o+1],x=d[o+2],C=d[s],O=d[s+1],w=d[s+2],E=Math.round(m),A=Math.round(g);let L,k,M,P,T,U,F,H;for(let e=E;e<=A;e++){if(e<h){const t=e<m?0:(m-e)/(m-h);L=p-(p-_)*t,k=v-(v-D)*t,M=y-(y-I)*t,P=S-(S-x)*t}else{let t;t=e>g?1:h===g?0:(h-e)/(h-g),L=_-(_-b)*t,k=D-(D-C)*t,M=I-(I-O)*t,P=x-(x-w)*t}let t;t=e<m?0:e>g?1:(m-e)/(m-g),T=p-(p-b)*t,U=v-(v-C)*t,F=y-(y-O)*t,H=S-(S-w)*t;const n=Math.round(Math.min(L,T)),a=Math.round(Math.max(L,T));let i=u*e+4*n;for(let e=n;e<=a;e++)t=(L-e)/(L-T),t<0?t=0:t>1&&(t=1),l[i++]=k-(k-U)*t|0,l[i++]=M-(M-F)*t|0,l[i++]=P-(P-H)*t|0,l[i++]=255}}function l(e,t,n){const a=t.coords,i=t.colors;let r,o;switch(t.type){case"lattice":const s=t.verticesPerRow,c=Math.floor(a.length/s)-1,l=s-1;for(r=0;r<c;r++){let t=r*s;for(let r=0;r<l;r++,t++)d(e,n,a[t],a[t+1],a[t+s],i[t],i[t+1],i[t+s]),d(e,n,a[t+s+1],a[t+1],a[t+s],i[t+s+1],i[t+1],i[t+s])}break;case"triangles":for(r=0,o=a.length;r<o;r+=3)d(e,n,a[r],a[r+1],a[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class u extends s{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const a=Math.floor(this._bounds[0]),i=Math.floor(this._bounds[1]),r=Math.ceil(this._bounds[2])-a,o=Math.ceil(this._bounds[3])-i,s=Math.min(Math.ceil(Math.abs(r*e[0]*1.1)),3e3),c=Math.min(Math.ceil(Math.abs(o*e[1]*1.1)),3e3),d=r/s,u=o/c,f={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-i,scaleX:1/d,scaleY:1/u},p=s+4,m=c+4,_=n.getCanvas("mesh",p,m,!1),h=_.context,b=h.createImageData(s,c);if(t){const e=b.data;for(let n=0,a=e.length;n<a;n+=4)e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=255}for(const e of this._figures)l(b,e,f);return h.putImageData(b,2,2),{canvas:_.canvas,offsetX:a-2*d,offsetY:i-2*u,scaleX:d,scaleY:u}}getPattern(e,t,n,s){let c;if(o(e,this._bbox),s===r.SHADING)c=a.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(e));else if(c=a.Util.singularValueDecompose2dScale(t.baseTransform),this.matrix){const e=a.Util.singularValueDecompose2dScale(this.matrix);c=[c[0]*e[0],c[1]*e[1]]}const d=this._createMeshCanvas(c,s===r.SHADING?null:this._background,t.cachedCanvases);return s!==r.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(d.offsetX,d.offsetY),e.scale(d.scaleX,d.scaleY),e.createPattern(d.canvas,"no-repeat")}}class f extends s{getPattern(){return"hotpink"}}class p{static MAX_PATTERN_SIZE=3e3;constructor(e,t,n,a,i){this.operatorList=e[2],this.matrix=e[3]||[1,0,0,1,0,0],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=a,this.baseTransform=i}createPatternCanvas(e){const t=this.operatorList,n=this.bbox,r=this.xstep,o=this.ystep,s=this.paintType,c=this.tilingType,d=this.color,l=this.canvasGraphicsFactory;(0,a.info)("TilingType: "+c);const u=n[0],f=n[1],p=n[2],m=n[3],_=a.Util.singularValueDecompose2dScale(this.matrix),h=a.Util.singularValueDecompose2dScale(this.baseTransform),b=[_[0]*h[0],_[1]*h[1]],g=this.getSizeAndScale(r,this.ctx.canvas.width,b[0]),v=this.getSizeAndScale(o,this.ctx.canvas.height,b[1]),y=e.cachedCanvases.getCanvas("pattern",g.size,v.size,!0),S=y.context,D=l.createCanvasGraphics(S);D.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(D,s,d);let I=u,x=f,C=p,O=m;return u<0&&(I=0,C+=Math.abs(u)),f<0&&(x=0,O+=Math.abs(f)),S.translate(-g.scale*I,-v.scale*x),D.transform(g.scale,0,0,v.scale,0,0),S.save(),this.clipBbox(D,I,x,C,O),D.baseTransform=(0,i.getCurrentTransform)(D.ctx),D.executeOperatorList(t),D.endDrawing(),{canvas:y.canvas,scaleX:g.scale,scaleY:v.scale,offsetX:I,offsetY:x}}getSizeAndScale(e,t,n){e=Math.abs(e);const a=Math.max(p.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*n);return i>=a?i=a:n=i/e,{scale:n,size:i}}clipBbox(e,t,n,a,r){const o=a-t,s=r-n;e.ctx.rect(t,n,o,s),e.current.updateRectMinMax((0,i.getCurrentTransform)(e.ctx),[t,n,a,r]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const i=e.ctx,r=e.current;switch(t){case 1:const e=this.ctx;i.fillStyle=e.fillStyle,i.strokeStyle=e.strokeStyle,r.fillColor=e.fillStyle,r.strokeColor=e.strokeStyle;break;case 2:const o=a.Util.makeHexColor(n[0],n[1],n[2]);i.fillStyle=o,i.strokeStyle=o,r.fillColor=o,r.strokeColor=o;break;default:throw new a.FormatError(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,i){let o=n;i!==r.SHADING&&(o=a.Util.transform(o,t.baseTransform),this.matrix&&(o=a.Util.transform(o,this.matrix)));const s=this.createPatternCanvas(t);let c=new DOMMatrix(o);c=c.translate(s.offsetX,s.offsetY),c=c.scale(1/s.scaleX,1/s.scaleY);const d=e.createPattern(s.canvas,"repeat");return d.setTransform(c),d}}t.TilingPattern=p},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=i,t.convertToRGBA=function(e){switch(e.kind){case a.ImageKind.GRAYSCALE_1BPP:return i(e);case a.ImageKind.RGB_24BPP:return function(e){let{src:t,srcPos:n=0,dest:i,destPos:r=0,width:o,height:s}=e,c=0;const d=t.length>>2,l=new Uint32Array(t.buffer,n,d);if(a.FeatureTest.isLittleEndian){for(;c<d-2;c+=3,r+=4){const e=l[c],t=l[c+1],n=l[c+2];i[r]=4278190080|e,i[r+1]=e>>>24|t<<8|4278190080,i[r+2]=t>>>16|n<<16|4278190080,i[r+3]=n>>>8|4278190080}for(let e=4*c,n=t.length;e<n;e+=3)i[r++]=t[e]|t[e+1]<<8|t[e+2]<<16|4278190080}else{for(;c<d-2;c+=3,r+=4){const e=l[c],t=l[c+1],n=l[c+2];i[r]=255|e,i[r+1]=e<<24|t>>>8|255,i[r+2]=t<<16|n>>>16|255,i[r+3]=n<<8|255}for(let e=4*c,n=t.length;e<n;e+=3)i[r++]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|255}return{srcPos:n,destPos:r}}(e)}return null},t.grayToRGBA=function(e,t){if(a.FeatureTest.isLittleEndian)for(let n=0,a=e.length;n<a;n++)t[n]=65793*e[n]|4278190080;else for(let n=0,a=e.length;n<a;n++)t[n]=16843008*e[n]|255},n(93),n(101),n(102),n(105),n(107),n(109),n(113),n(116),n(123);var a=n(1);function i(e){let{src:t,srcPos:n=0,dest:i,width:r,height:o,nonBlackColor:s=4294967295,inverseDecode:c=!1}=e;const d=a.FeatureTest.isLittleEndian?4278190080:255,[l,u]=c?[s,d]:[d,s],f=r>>3,p=7&r,m=t.length;i=new Uint32Array(i.buffer);let _=0;for(let e=0;e<o;e++){for(const e=n+f;n<e;n++){const e=n<m?t[n]:255;i[_++]=128&e?u:l,i[_++]=64&e?u:l,i[_++]=32&e?u:l,i[_++]=16&e?u:l,i[_++]=8&e?u:l,i[_++]=4&e?u:l,i[_++]=2&e?u:l,i[_++]=1&e?u:l}if(0===p)continue;const e=n<m?t[n++]:255;for(let t=0;t<p;t++)i[_++]=e&1<<7-t?u:l}return{srcPos:n,destPos:_}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const n=Object.create(null);t.GlobalWorkerOptions=n,n.workerPort=null,n.workerSrc=""},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0,n(2);var a=n(1);function i(e){switch(e instanceof Error||"object"==typeof e&&null!==e||(0,a.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new a.AbortException(e.message);case"MissingPDFException":return new a.MissingPDFException(e.message);case"PasswordException":return new a.PasswordException(e.message,e.code);case"UnexpectedResponseException":return new a.UnexpectedResponseException(e.message,e.status);case"UnknownErrorException":return new a.UnknownErrorException(e.message,e.details);default:return new a.UnknownErrorException(e.message,e.toString())}}t.MessageHandler=class{constructor(e,t,n){this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=e=>{const t=e.data;if(t.targetName!==this.sourceName)return;if(t.stream)return void this.#ut(t);if(t.callback){const e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw new Error(`Cannot resolve callback ${e}`);if(delete this.callbackCapabilities[e],1===t.callback)n.resolve(t.data);else{if(2!==t.callback)throw new Error("Unexpected callback case");n.reject(i(t.reason))}return}const a=this.actionHandler[t.action];if(!a)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const e=this.sourceName,r=t.sourceName;return void new Promise(function(e){e(a(t.data))}).then(function(a){n.postMessage({sourceName:e,targetName:r,callback:1,callbackId:t.callbackId,data:a})},function(a){n.postMessage({sourceName:e,targetName:r,callback:2,callbackId:t.callbackId,reason:i(a)})})}t.streamId?this.#ft(t):a(t.data)},n.addEventListener("message",this._onComObjOnMessage)}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const i=this.callbackId++,r=new a.PromiseCapability;this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:i,data:t},n)}catch(e){r.reject(e)}return r.promise}sendWithStream(e,t,n,r){const o=this.streamId++,s=this.sourceName,c=this.targetName,d=this.comObj;return new ReadableStream({start:n=>{const i=new a.PromiseCapability;return this.streamControllers[o]={controller:n,startCall:i,pullCall:null,cancelCall:null,isClosed:!1},d.postMessage({sourceName:s,targetName:c,action:e,streamId:o,data:t,desiredSize:n.desiredSize},r),i.promise},pull:e=>{const t=new a.PromiseCapability;return this.streamControllers[o].pullCall=t,d.postMessage({sourceName:s,targetName:c,stream:6,streamId:o,desiredSize:e.desiredSize}),t.promise},cancel:e=>{(0,a.assert)(e instanceof Error,"cancel must have a valid reason");const t=new a.PromiseCapability;return this.streamControllers[o].cancelCall=t,this.streamControllers[o].isClosed=!0,d.postMessage({sourceName:s,targetName:c,stream:1,streamId:o,reason:i(e)}),t.promise}},n)}#ft(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,o=this.comObj,s=this,c=this.actionHandler[e.action],d={enqueue(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const c=this.desiredSize;this.desiredSize-=i,c>0&&this.desiredSize<=0&&(this.sinkCapability=new a.PromiseCapability,this.ready=this.sinkCapability.promise),o.postMessage({sourceName:n,targetName:r,stream:4,streamId:t,chunk:e},s)},close(){this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:3,streamId:t}),delete s.streamSinks[t])},error(e){(0,a.assert)(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,o.postMessage({sourceName:n,targetName:r,stream:5,streamId:t,reason:i(e)}))},sinkCapability:new a.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};d.sinkCapability.resolve(),d.ready=d.sinkCapability.promise,this.streamSinks[t]=d,new Promise(function(t){t(c(e.data,d))}).then(function(){o.postMessage({sourceName:n,targetName:r,stream:8,streamId:t,success:!0})},function(e){o.postMessage({sourceName:n,targetName:r,stream:8,streamId:t,reason:i(e)})})}#ut(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,o=this.comObj,s=this.streamControllers[t],c=this.streamSinks[t];switch(e.stream){case 8:e.success?s.startCall.resolve():s.startCall.reject(i(e.reason));break;case 7:e.success?s.pullCall.resolve():s.pullCall.reject(i(e.reason));break;case 6:if(!c){o.postMessage({sourceName:n,targetName:r,stream:7,streamId:t,success:!0});break}c.desiredSize<=0&&e.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=e.desiredSize,new Promise(function(e){e(c.onPull?.())}).then(function(){o.postMessage({sourceName:n,targetName:r,stream:7,streamId:t,success:!0})},function(e){o.postMessage({sourceName:n,targetName:r,stream:7,streamId:t,reason:i(e)})});break;case 4:if((0,a.assert)(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case 3:if((0,a.assert)(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),this.#pt(s,t);break;case 5:(0,a.assert)(s,"error should have stream controller"),s.controller.error(i(e.reason)),this.#pt(s,t);break;case 2:e.success?s.cancelCall.resolve():s.cancelCall.reject(i(e.reason)),this.#pt(s,t);break;case 1:if(!c)break;new Promise(function(t){t(c.onCancel?.(i(e.reason)))}).then(function(){o.postMessage({sourceName:n,targetName:r,stream:2,streamId:t,success:!0})},function(e){o.postMessage({sourceName:n,targetName:r,stream:2,streamId:t,reason:i(e)})}),c.sinkCapability.reject(i(e.reason)),c.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async#pt(e,t){await Promise.allSettled([e.startCall?.promise,e.pullCall?.promise,e.cancelCall?.promise]),delete this.streamControllers[t]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var a=n(1);t.Metadata=class{#mt;#_t;constructor(e){let{parsedData:t,rawData:n}=e;this.#mt=t,this.#_t=n}getRaw(){return this.#_t}get(e){return this.#mt.get(e)??null}getAll(){return(0,a.objectFromMap)(this.#mt)}has(e){return this.#mt.has(e)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var a=n(1),i=n(170);const r=Symbol("INTERNAL");class o{#ht=!0;constructor(e,t){this.name=e,this.intent=t}get visible(){return this.#ht}_setVisible(e,t){e!==r&&(0,a.unreachable)("Internal method `_setVisible` called."),this.#ht=t}}t.OptionalContentConfig=class{#bt=null;#gt=new Map;#vt=null;#yt=null;constructor(e){if(this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,this.#yt=e.order;for(const t of e.groups)this.#gt.set(t.id,new o(t.name,t.intent));if("OFF"===e.baseState)for(const e of this.#gt.values())e._setVisible(r,!1);for(const t of e.on)this.#gt.get(t)._setVisible(r,!0);for(const t of e.off)this.#gt.get(t)._setVisible(r,!1);this.#vt=this.getHash()}}#St(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let i=1;i<t;i++){const t=e[i];let r;if(Array.isArray(t))r=this.#St(t);else{if(!this.#gt.has(t))return(0,a.warn)(`Optional content group not found: ${t}`),!0;r=this.#gt.get(t).visible}switch(n){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return"And"===n}isVisible(e){if(0===this.#gt.size)return!0;if(!e)return(0,a.warn)("Optional content group not defined."),!0;if("OCG"===e.type)return this.#gt.has(e.id)?this.#gt.get(e.id).visible:((0,a.warn)(`Optional content group not found: ${e.id}`),!0);if("OCMD"===e.type){if(e.expression)return this.#St(e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!this.#gt.has(t))return(0,a.warn)(`Optional content group not found: ${t}`),!0;if(this.#gt.get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!this.#gt.has(t))return(0,a.warn)(`Optional content group not found: ${t}`),!0;if(!this.#gt.get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!this.#gt.has(t))return(0,a.warn)(`Optional content group not found: ${t}`),!0;if(!this.#gt.get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!this.#gt.has(t))return(0,a.warn)(`Optional content group not found: ${t}`),!0;if(this.#gt.get(t).visible)return!1}return!0}return(0,a.warn)(`Unknown optional content policy ${e.policy}.`),!0}return(0,a.warn)(`Unknown group type ${e.type}.`),!0}setVisibility(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.#gt.has(e)?(this.#gt.get(e)._setVisible(r,!!t),this.#bt=null):(0,a.warn)(`Optional content group not found: ${e}`)}get hasInitialVisibility(){return null===this.#vt||this.getHash()===this.#vt}getOrder(){return this.#gt.size?this.#yt?this.#yt.slice():[...this.#gt.keys()]:null}getGroups(){return this.#gt.size>0?(0,a.objectFromMap)(this.#gt):null}getGroup(e){return this.#gt.get(e)||null}getHash(){if(null!==this.#bt)return this.#bt;const e=new i.MurmurHash3_64;for(const[t,n]of this.#gt)e.update(`${t}:${n.visible}`);return this.#bt=e.hexdigest()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0,n(93),n(101),n(102),n(105),n(107),n(109),n(113),n(116),n(123),n(89);var a=n(1),i=n(168);t.PDFDataTransportStream=class{constructor(e,t){let{length:n,initialData:i,progressiveDone:r=!1,contentDispositionFilename:o=null,disableRange:s=!1,disableStream:c=!1}=e;if((0,a.assert)(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=r,this._contentDispositionFilename=o,i?.length>0){const e=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!c,this._isRangeSupported=!s,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((e,t)=>{this._onReceiveData({begin:e,chunk:t})}),this._pdfDataRangeTransport.addProgressListener((e,t)=>{this._onProgress({loaded:e,total:t})}),this._pdfDataRangeTransport.addProgressiveReadListener(e=>{this._onReceiveData({chunk:e})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(e){let{begin:t,chunk:n}=e;const i=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(void 0===t)this._fullRequestReader?this._fullRequestReader._enqueue(i):this._queuedChunks.push(i);else{const e=this._rangeReaders.some(function(e){return e._begin===t&&(e._enqueue(i),!0)});(0,a.assert)(e,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(e){void 0===e.total?this._rangeReaders[0]?.onProgress?.({loaded:e.loaded}):this._fullRequestReader?.onProgress?.({loaded:e.loaded,total:e.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new r(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new o(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeReaders.slice(0))t.cancel(e);this._pdfDataRangeTransport.abort()}};class r{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=e,this._done=n||!1,this._filename=(0,i.isPdfFile)(a)?a:null,this._queuedChunks=t||[],this._loaded=0;for(const e of this._queuedChunks)this._loaded+=e.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=new a.PromiseCapability;return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class o{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=new a.PromiseCapability;return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0,n(93),n(101),n(102),n(105),n(107),n(109),n(113),n(116),n(123),n(89);var a=n(1),i=n(182);function r(e,t,n){return{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function o(e){const t=new Headers;for(const n in e){const a=e[n];void 0!==a&&t.append(n,a)}return t}function s(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:((0,a.warn)(`getArrayBuffer - unexpected data format: ${e}`),new Uint8Array(e).buffer)}t.PDFFetchStream=class{constructor(e){this.source=e,this.isHttp=/^https?:/i.test(e.url),this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new c(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new d(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}};class c{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=new a.PromiseCapability,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._headers=o(this._stream.httpHeaders);const n=t.url;fetch(n,r(this._headers,this._withCredentials,this._abortController)).then(e=>{if(!(0,i.validateResponseStatus)(e.status))throw(0,i.createResponseStatusError)(e.status,n);this._reader=e.body.getReader(),this._headersCapability.resolve();const t=t=>e.headers.get(t),{allowRangeRequests:r,suggestedLength:o}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=o||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(t),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new a.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:s(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}class d{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=new a.PromiseCapability,this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController,this._headers=o(this._stream.httpHeaders),this._headers.append("Range",`bytes=${t}-${n-1}`);const c=s.url;fetch(c,r(this._headers,this._withCredentials,this._abortController)).then(e=>{if(!(0,i.validateResponseStatus)(e.status))throw(0,i.createResponseStatusError)(e.status,c);this._readCapability.resolve(),this._reader=e.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,this.onProgress?.({loaded:this._loaded}),{value:s(e),done:!1})}cancel(e){this._reader?.cancel(e),this._abortController.abort()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=function(e,t){return 404===e||0===e&&t.startsWith("file:")?new a.MissingPDFException('Missing PDF "'+t+'".'):new a.UnexpectedResponseException(`Unexpected server response (${e}) while retrieving PDF "${t}".`,e)},t.extractFilenameFromHeader=function(e){const t=e("Content-Disposition");if(t){let e=(0,i.getFilenameFromContentDispositionHeader)(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if((0,r.isPdfFile)(e))return e}return null},t.validateRangeRequestCapabilities=function(e){let{getResponseHeader:t,isHttp:n,rangeChunkSize:a,disableRange:i}=e;const r={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(t("Content-Length"),10);return Number.isInteger(o)?(r.suggestedLength=o,o<=2*a||i||!n||"bytes"!==t("Accept-Ranges")||"identity"!==(t("Content-Encoding")||"identity")||(r.allowRangeRequests=!0),r):r},t.validateResponseStatus=function(e){return 200===e||206===e};var a=n(1),i=n(183),r=n(168)},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=function(e){let t=!0,n=i("filename\\*","i").exec(e);if(n){n=n[1];let e=s(n);return e=unescape(e),e=c(e),e=d(e),o(e)}if(n=function(e){const t=[];let n;const a=i("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=a.exec(e));){let[,e,a,i]=n;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[a,i]}const r=[];for(let e=0;e<t.length&&e in t;++e){let[n,a]=t[e];a=s(a),n&&(a=unescape(a),0===e&&(a=c(a))),r.push(a)}return r.join("")}(e),n)return o(d(n));if(n=i("filename","i").exec(e),n){n=n[1];let e=s(n);return e=d(e),o(e)}function i(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function r(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const i=new TextDecoder(e,{fatal:!0}),r=(0,a.stringToBytes)(n);n=i.decode(r),t=!1}catch{}}return n}function o(e){return t&&/[\x80-\xff]/.test(e)&&(e=r("utf-8",e),t&&(e=r("iso-8859-1",e))),e}function s(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const n=t[e].indexOf('"');-1!==n&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function c(e){const t=e.indexOf("'");return-1===t?e:r(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function d(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(e,t,n,a){if("q"===n||"Q"===n)return r(t,a=(a=a.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}));try{a=atob(a)}catch{}return r(t,a)})}return""},n(89),n(149);var a=n(1)},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0,n(89);var a=n(1),i=n(182);class r{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.isHttp=/^https?:/i.test(e),this.httpHeaders=this.isHttp&&t.httpHeaders||Object.create(null),this.withCredentials=t.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(e,t,n){const a={begin:e,end:t};for(const e in n)a[e]=n[e];return this.request(a)}requestFull(e){return this.request(e)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,a=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const e in this.httpHeaders){const n=this.httpHeaders[e];void 0!==n&&t.setRequestHeader(e,n)}return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),a.expectedStatus=206):a.expectedStatus=200,t.responseType="arraybuffer",e.onError&&(t.onerror=function(n){e.onError(t.status)}),t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),a.onHeadersReceived=e.onHeadersReceived,a.onDone=e.onDone,a.onError=e.onError,a.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){const n=this.pendingRequests[e];n&&n.onProgress?.(t)}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const i=n.xhr;if(i.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==i.readyState)return;if(!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===i.status&&this.isHttp)return void n.onError?.(i.status);const r=i.status||200;if((200!==r||206!==n.expectedStatus)&&r!==n.expectedStatus)return void n.onError?.(i.status);const o=function(e){const t=e.response;return"string"!=typeof t?t:(0,a.stringToBytes)(t).buffer}(i);if(206===r){const e=i.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);n.onDone({begin:parseInt(t[1],10),chunk:o})}else o?n.onDone({begin:0,chunk:o}):n.onError?.(i.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}t.PDFNetworkStream=class{constructor(e){this._source=e,this._manager=new r(e.url,{httpHeaders:e.httpHeaders,withCredentials:e.withCredentials}),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new o(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new s(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}};class o{constructor(e,t){this._manager=e;const n={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=t.url,this._fullRequestId=e.requestFull(n),this._headersReceivedCapability=new a.PromiseCapability,this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e),n=e=>t.getResponseHeader(e),{allowRangeRequests:a,suggestedLength:r}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=r||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(n),this._isRangeSupported&&this._manager.abortRequest(e),this._headersReceivedCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=(0,i.createResponseStatusError)(e,this._url),this._headersReceivedCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){this.onProgress?.({loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=new a.PromiseCapability;return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersReceivedCapability.reject(e);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class s{constructor(e,t,n){this._manager=e;const a={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=e.url,this._requestId=e.requestRange(t,n,a),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError=(0,i.createResponseStatusError)(e,this._url);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){this.isStreamingSupported||this.onProgress?.({loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=new a.PromiseCapability;return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0,n(89),n(93),n(101),n(102),n(105),n(107),n(109),n(113),n(116),n(123);var a=n(1),i=n(182);const r=/^file:\/\/\/[a-zA-Z]:\//;t.PDFNodeStream=class{constructor(e){this.source=e,this.url=function(e){const t=__webpack_require__(6959),n=t.parse(e);return"file:"===n.protocol||n.host?n:/^[a-z]:[/\\]/i.test(e)?t.parse(`file:///${e}`):(n.host||(n.protocol="file:"),n)}(e.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&e.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new u(this):new d(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=this.isFsUrl?new f(this,e,t):new l(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){this._fullRequestReader?.cancel(e);for(const t of this._rangeRequestReaders.slice(0))t.cancel(e)}};class o{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=new a.PromiseCapability,this._headersCapability=new a.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return null===e?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new a.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class s{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new a.PromiseCapability;const t=e.source;this._isStreamingSupported=!t.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return null===e?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=e.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function c(e,t){return{protocol:e.protocol,auth:e.auth,host:e.hostname,port:e.port,path:e.path,method:"GET",headers:t}}class d extends o{constructor(e){super(e);const t=t=>{if(404===t.statusCode){const e=new a.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=e,void this._headersCapability.reject(e)}this._headersCapability.resolve(),this._setReadableStream(t);const n=e=>this._readableStream.headers[e.toLowerCase()],{allowRangeRequests:r,suggestedLength:o}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=o||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(n)};if(this._request=null,"http:"===this._url.protocol){const n=__webpack_require__(8196);this._request=n.request(c(this._url,e.httpHeaders),t)}else{const n=__webpack_require__(1671);this._request=n.request(c(this._url,e.httpHeaders),t)}this._request.on("error",e=>{this._storedError=e,this._headersCapability.reject(e)}),this._request.end()}}class l extends s{constructor(e,t,n){super(e),this._httpHeaders={};for(const t in e.httpHeaders){const n=e.httpHeaders[t];void 0!==n&&(this._httpHeaders[t]=n)}this._httpHeaders.Range=`bytes=${t}-${n-1}`;const i=e=>{if(404===e.statusCode){const e=new a.MissingPDFException(`Missing PDF "${this._url}".`);return void(this._storedError=e)}this._setReadableStream(e)};if(this._request=null,"http:"===this._url.protocol){const e=__webpack_require__(8196);this._request=e.request(c(this._url,this._httpHeaders),i)}else{const e=__webpack_require__(1671);this._request=e.request(c(this._url,this._httpHeaders),i)}this._request.on("error",e=>{this._storedError=e}),this._request.end()}}class u extends o{constructor(e){super(e);let t=decodeURIComponent(this._url.path);r.test(this._url.href)&&(t=t.replace(/^\//,""));const n=__webpack_require__(5365);n.lstat(t,(e,i)=>{if(e)return"ENOENT"===e.code&&(e=new a.MissingPDFException(`Missing PDF "${t}".`)),this._storedError=e,void this._headersCapability.reject(e);this._contentLength=i.size,this._setReadableStream(n.createReadStream(t)),this._headersCapability.resolve()})}}class f extends s{constructor(e,t,n){super(e);let a=decodeURIComponent(this._url.path);r.test(this._url.href)&&(a=a.replace(/^\//,""));const i=__webpack_require__(5365);this._setReadableStream(i.createReadStream(a,{start:t,end:n-1}))}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0,n(84),n(86),n(87),n(93),n(101),n(102),n(105),n(107),n(109),n(113),n(116),n(123),n(2),n(89),n(187);var a=n(168),i=n(1);const r="normal",o="#000000",s=["butt","round","square"],c=["miter","round","bevel"],d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(URL.createObjectURL&&"undefined"!=typeof Blob&&!n)return URL.createObjectURL(new Blob([e],{type:t}));const a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let i=`data:${t};base64,`;for(let t=0,n=e.length;t<n;t+=3){const r=255&e[t],o=255&e[t+1],s=255&e[t+2];i+=a[r>>2]+a[(3&r)<<4|o>>4]+a[t+1<n?(15&o)<<2|s>>6:64]+a[t+2<n?63&s:64]}return i},l=function(){const e=new Uint8Array([137,80,78,71,13,10,26,10]),t=new Int32Array(256);for(let e=0;e<256;e++){let n=e;for(let e=0;e<8;e++)n=1&n?3988292384^n>>1&2147483647:n>>1&2147483647;t[e]=n}function n(e,n,a,i){let r=i;const o=n.length;a[r]=o>>24&255,a[r+1]=o>>16&255,a[r+2]=o>>8&255,a[r+3]=255&o,r+=4,a[r]=255&e.charCodeAt(0),a[r+1]=255&e.charCodeAt(1),a[r+2]=255&e.charCodeAt(2),a[r+3]=255&e.charCodeAt(3),r+=4,a.set(n,r),r+=n.length;const s=function(e,n,a){let i=-1;for(let r=n;r<a;r++){const n=255&(i^e[r]);i=i>>>8^t[n]}return-1^i}(a,i+4,r);a[r]=s>>24&255,a[r+1]=s>>16&255,a[r+2]=s>>8&255,a[r+3]=255&s}function a(e){let t=e.length;const n=65535,a=Math.ceil(t/n),i=new Uint8Array(2+t+5*a+4);let r=0;i[r++]=120,i[r++]=156;let o=0;for(;t>n;)i[r++]=0,i[r++]=255,i[r++]=255,i[r++]=0,i[r++]=0,i.set(e.subarray(o,o+n),r),r+=n,o+=n,t-=n;i[r++]=1,i[r++]=255&t,i[r++]=t>>8&255,i[r++]=255&~t,i[r++]=(65535&~t)>>8&255,i.set(e.subarray(o),r),r+=e.length-o;const s=function(e,t,n){let a=1,i=0;for(let t=0;t<n;++t)a=(a+(255&e[t]))%65521,i=(i+a)%65521;return i<<16|a}(e,0,e.length);return i[r++]=s>>24&255,i[r++]=s>>16&255,i[r++]=s>>8&255,i[r++]=255&s,i}return function(t,r,o){return function(t,r,o,s){const c=t.width,l=t.height;let u,f,p;const m=t.data;switch(r){case i.ImageKind.GRAYSCALE_1BPP:f=0,u=1,p=c+7>>3;break;case i.ImageKind.RGB_24BPP:f=2,u=8,p=3*c;break;case i.ImageKind.RGBA_32BPP:f=6,u=8,p=4*c;break;default:throw new Error("invalid format")}const _=new Uint8Array((1+p)*l);let h=0,b=0;for(let e=0;e<l;++e)_[h++]=0,_.set(m.subarray(b,b+p),h),b+=p,h+=p;if(r===i.ImageKind.GRAYSCALE_1BPP&&s){h=0;for(let e=0;e<l;e++){h++;for(let e=0;e<p;e++)_[h++]^=255}}const g=new Uint8Array([c>>24&255,c>>16&255,c>>8&255,255&c,l>>24&255,l>>16&255,l>>8&255,255&l,u,f,0,0,0]),v=function(e){if(!i.isNodeJS)return a(e);try{const t=parseInt(process.versions.node)>=8?e:Buffer.from(e),n=__webpack_require__(195).deflateSync(t,{level:9});return n instanceof Uint8Array?n:new Uint8Array(n)}catch(e){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+e)}return a(e)}(_),y=e.length+36+g.length+v.length,S=new Uint8Array(y);let D=0;return S.set(e,D),D+=e.length,n("IHDR",g,S,D),D+=12+g.length,n("IDATA",v,S,D),D+=12+v.length,n("IEND",new Uint8Array(0),S,D),d(S,"image/png",o)}(t,void 0===t.kind?i.ImageKind.GRAYSCALE_1BPP:t.kind,r,o)}}();class u{constructor(){this.fontSizeScale=1,this.fontWeight=r,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=o,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(e,t){this.x=e,this.y=t}}function f(e){if(Number.isInteger(e))return e.toString();const t=e.toFixed(10);let n=t.length-1;if("0"!==t[n])return t;do{n--}while("0"===t[n]);return t.substring(0,"."===t[n]?n:n+1)}function p(e){if(0===e[4]&&0===e[5]){if(0===e[1]&&0===e[2])return 1===e[0]&&1===e[3]?"":`scale(${f(e[0])} ${f(e[3])})`;if(e[0]===e[3]&&e[1]===-e[2])return`rotate(${f(180*Math.acos(e[0])/Math.PI)})`}else if(1===e[0]&&0===e[1]&&0===e[2]&&1===e[3])return`translate(${f(e[4])} ${f(e[5])})`;return`matrix(${f(e[0])} ${f(e[1])} ${f(e[2])} ${f(e[3])} ${f(e[4])} ${f(e[5])})`}let m=0,_=0,h=0;t.SVGGraphics=class{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(0,a.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new a.DOMSVGFactory,this.current=new u,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=e,this.objs=t,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!n,this._operatorIdMapping=[];for(const e in i.OPS)this._operatorIdMapping[i.OPS[e]]=e}getObject(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return"string"==typeof e?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}save(){this.transformStack.push(this.transformMatrix);const e=this.current;this.extraStack.push(e),this.current=e.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(e){this.save(),this.executeOpTree(e),this.restore()}loadDependencies(e){const t=e.fnArray,n=e.argsArray;for(let e=0,a=t.length;e<a;e++)if(t[e]===i.OPS.dependency)for(const t of n[e]){const e=t.startsWith("g_")?this.commonObjs:this.objs,n=new Promise(n=>{e.get(t,n)});this.current.dependencies.push(n)}return Promise.all(this.current.dependencies)}transform(e,t,n,a,r,o){const s=[e,t,n,a,r,o];this.transformMatrix=i.Util.transform(this.transformMatrix,s),this.tgrp=null}getSVG(e,t){this.viewport=t;const n=this._initialize(t);return this.loadDependencies(e).then(()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(e)),n))}convertOpList(e){const t=this._operatorIdMapping,n=e.argsArray,a=e.fnArray,i=[];for(let e=0,r=a.length;e<r;e++){const r=a[e];i.push({fnId:r,fn:t[r],args:n[e]})}return function(e){let t=[];const n=[];for(const a of e)"save"!==a.fn?"restore"===a.fn?t=n.pop():t.push(a):(t.push({fnId:92,fn:"group",items:[]}),n.push(t),t=t.at(-1).items);return t}(i)}executeOpTree(e){for(const t of e){const e=t.fn,n=t.fnId,a=t.args;switch(0|n){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(a);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(a[0],a[1]);break;case i.OPS.setFont:this.setFont(a);break;case i.OPS.showText:case i.OPS.showSpacedText:this.showText(a[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(a[0],a[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(a[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(a[0]);break;case i.OPS.setHScale:this.setHScale(a[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(a[0],a[1],a[2],a[3],a[4],a[5]);break;case i.OPS.setTextRise:this.setTextRise(a[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(a[0]);break;case i.OPS.setLineWidth:this.setLineWidth(a[0]);break;case i.OPS.setLineJoin:this.setLineJoin(a[0]);break;case i.OPS.setLineCap:this.setLineCap(a[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(a[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(a[0],a[1],a[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(a[0],a[1],a[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(a);break;case i.OPS.setFillColorN:this.setFillColorN(a);break;case i.OPS.shadingFill:this.shadingFill(a[0]);break;case i.OPS.setDash:this.setDash(a[0],a[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(a[0]);break;case i.OPS.setFlatness:this.setFlatness(a[0]);break;case i.OPS.setGState:this.setGState(a[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(a[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(a[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(a[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(a[0],a[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(a[0],a[1],a[2],a[3],a[4],a[5]);break;case i.OPS.constructPath:this.constructPath(a[0],a[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(t.items);break;default:(0,i.warn)(`Unimplemented operator ${e}`)}}}setWordSpacing(e){this.current.wordSpacing=e}setCharSpacing(e){this.current.charSpacing=e}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(e,t,n,a,i,r){const o=this.current;o.textMatrix=o.lineMatrix=[e,t,n,a,i,r],o.textMatrixScale=Math.hypot(e,t),o.x=o.lineX=0,o.y=o.lineY=0,o.xcoords=[],o.ycoords=[],o.tspan=this.svgFactory.createElement("svg:tspan"),o.tspan.setAttributeNS(null,"font-family",o.fontFamily),o.tspan.setAttributeNS(null,"font-size",`${f(o.fontSize)}px`),o.tspan.setAttributeNS(null,"y",f(-o.y)),o.txtElement=this.svgFactory.createElement("svg:text"),o.txtElement.append(o.tspan)}beginText(){const e=this.current;e.x=e.lineX=0,e.y=e.lineY=0,e.textMatrix=i.IDENTITY_MATRIX,e.lineMatrix=i.IDENTITY_MATRIX,e.textMatrixScale=1,e.tspan=this.svgFactory.createElement("svg:tspan"),e.txtElement=this.svgFactory.createElement("svg:text"),e.txtgrp=this.svgFactory.createElement("svg:g"),e.xcoords=[],e.ycoords=[]}moveText(e,t){const n=this.current;n.x=n.lineX+=e,n.y=n.lineY+=t,n.xcoords=[],n.ycoords=[],n.tspan=this.svgFactory.createElement("svg:tspan"),n.tspan.setAttributeNS(null,"font-family",n.fontFamily),n.tspan.setAttributeNS(null,"font-size",`${f(n.fontSize)}px`),n.tspan.setAttributeNS(null,"y",f(-n.y))}showText(e){const t=this.current,n=t.font,a=t.fontSize;if(0===a)return;const s=t.fontSizeScale,c=t.charSpacing,d=t.wordSpacing,l=t.fontDirection,u=t.textHScale*l,m=n.vertical,_=m?1:-1,h=n.defaultVMetrics,b=a*t.fontMatrix[0];let g=0;for(const i of e){if(null===i){g+=l*d;continue}if("number"==typeof i){g+=_*i*a/1e3;continue}const e=(i.isSpace?d:0)+c,r=i.fontChar;let o,u,f=i.width;if(m){let e;const t=i.vmetric||h;e=i.vmetric?t[1]:.5*f,e=-e*b;const n=t[2]*b;f=t?-t[0]:f,o=e/s,u=(g+n)/s}else o=g/s,u=0;(i.isInFont||n.missingFile)&&(t.xcoords.push(t.x+o),m&&t.ycoords.push(-t.y+u),t.tspan.textContent+=r),g+=m?f*b-e*l:f*b+e*l}t.tspan.setAttributeNS(null,"x",t.xcoords.map(f).join(" ")),m?t.tspan.setAttributeNS(null,"y",t.ycoords.map(f).join(" ")):t.tspan.setAttributeNS(null,"y",f(-t.y)),m?t.y-=g:t.x+=g*u,t.tspan.setAttributeNS(null,"font-family",t.fontFamily),t.tspan.setAttributeNS(null,"font-size",`${f(t.fontSize)}px`),"normal"!==t.fontStyle&&t.tspan.setAttributeNS(null,"font-style",t.fontStyle),t.fontWeight!==r&&t.tspan.setAttributeNS(null,"font-weight",t.fontWeight);const v=t.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(v===i.TextRenderingMode.FILL||v===i.TextRenderingMode.FILL_STROKE?(t.fillColor!==o&&t.tspan.setAttributeNS(null,"fill",t.fillColor),t.fillAlpha<1&&t.tspan.setAttributeNS(null,"fill-opacity",t.fillAlpha)):t.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?t.tspan.setAttributeNS(null,"fill","transparent"):t.tspan.setAttributeNS(null,"fill","none"),v===i.TextRenderingMode.STROKE||v===i.TextRenderingMode.FILL_STROKE){const e=1/(t.textMatrixScale||1);this._setStrokeAttributes(t.tspan,e)}let y=t.textMatrix;0!==t.textRise&&(y=y.slice(),y[5]+=t.textRise),t.txtElement.setAttributeNS(null,"transform",`${p(y)} scale(${f(u)}, -1)`),t.txtElement.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),t.txtElement.append(t.tspan),t.txtgrp.append(t.txtElement),this._ensureTransformGroup().append(t.txtElement)}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}addFontStyle(e){if(!e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const t=d(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${e.loadedName}"; src: url(${t}); }\n`}setFont(e){const t=this.current,n=this.commonObjs.get(e[0]);let a=e[1];t.font=n,!this.embedFonts||n.missingFile||this.embeddedFonts[n.loadedName]||(this.addFontStyle(n),this.embeddedFonts[n.loadedName]=n),t.fontMatrix=n.fontMatrix||i.FONT_IDENTITY_MATRIX;let r="normal";n.black?r="900":n.bold&&(r="bold");const o=n.italic?"italic":"normal";a<0?(a=-a,t.fontDirection=-1):t.fontDirection=1,t.fontSize=a,t.fontFamily=n.loadedName,t.fontWeight=r,t.fontStyle=o,t.tspan=this.svgFactory.createElement("svg:tspan"),t.tspan.setAttributeNS(null,"y",f(-t.y)),t.xcoords=[],t.ycoords=[]}endText(){const e=this.current;e.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&e.txtElement?.hasChildNodes()&&(e.element=e.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(e){e>0&&(this.current.lineWidth=e)}setLineCap(e){this.current.lineCap=s[e]}setLineJoin(e){this.current.lineJoin=c[e]}setMiterLimit(e){this.current.miterLimit=e}setStrokeAlpha(e){this.current.strokeAlpha=e}setStrokeRGBColor(e,t,n){this.current.strokeColor=i.Util.makeHexColor(e,t,n)}setFillAlpha(e){this.current.fillAlpha=e}setFillRGBColor(e,t,n){this.current.fillColor=i.Util.makeHexColor(e,t,n),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(e){this.current.strokeColor=this._makeColorN_Pattern(e)}setFillColorN(e){this.current.fillColor=this._makeColorN_Pattern(e)}shadingFill(e){const{width:t,height:n}=this.viewport,a=i.Util.inverseTransform(this.transformMatrix),[r,o,s,c]=i.Util.getAxialAlignedBoundingBox([0,0,t,n],a),d=this.svgFactory.createElement("svg:rect");d.setAttributeNS(null,"x",r),d.setAttributeNS(null,"y",o),d.setAttributeNS(null,"width",s-r),d.setAttributeNS(null,"height",c-o),d.setAttributeNS(null,"fill",this._makeShadingPattern(e)),this.current.fillAlpha<1&&d.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(d)}_makeColorN_Pattern(e){return"TilingPattern"===e[0]?this._makeTilingPattern(e):this._makeShadingPattern(e)}_makeTilingPattern(e){const t=e[1],n=e[2],a=e[3]||i.IDENTITY_MATRIX,[r,o,s,c]=e[4],d=e[5],l=e[6],u=e[7],f="shading"+h++,[p,m,_,b]=i.Util.normalizeRect([...i.Util.applyTransform([r,o],a),...i.Util.applyTransform([s,c],a)]),[g,v]=i.Util.singularValueDecompose2dScale(a),y=d*g,S=l*v,D=this.svgFactory.createElement("svg:pattern");D.setAttributeNS(null,"id",f),D.setAttributeNS(null,"patternUnits","userSpaceOnUse"),D.setAttributeNS(null,"width",y),D.setAttributeNS(null,"height",S),D.setAttributeNS(null,"x",`${p}`),D.setAttributeNS(null,"y",`${m}`);const I=this.svg,x=this.transformMatrix,C=this.current.fillColor,O=this.current.strokeColor,w=this.svgFactory.create(_-p,b-m);if(this.svg=w,this.transformMatrix=a,2===u){const e=i.Util.makeHexColor(...t);this.current.fillColor=e,this.current.strokeColor=e}return this.executeOpTree(this.convertOpList(n)),this.svg=I,this.transformMatrix=x,this.current.fillColor=C,this.current.strokeColor=O,D.append(w.childNodes[0]),this.defs.append(D),`url(#${f})`}_makeShadingPattern(e){switch("string"==typeof e&&(e=this.objs.get(e)),e[0]){case"RadialAxial":const t="shading"+h++,n=e[3];let a;switch(e[1]){case"axial":const n=e[4],i=e[5];a=this.svgFactory.createElement("svg:linearGradient"),a.setAttributeNS(null,"id",t),a.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),a.setAttributeNS(null,"x1",n[0]),a.setAttributeNS(null,"y1",n[1]),a.setAttributeNS(null,"x2",i[0]),a.setAttributeNS(null,"y2",i[1]);break;case"radial":const r=e[4],o=e[5],s=e[6],c=e[7];a=this.svgFactory.createElement("svg:radialGradient"),a.setAttributeNS(null,"id",t),a.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),a.setAttributeNS(null,"cx",o[0]),a.setAttributeNS(null,"cy",o[1]),a.setAttributeNS(null,"r",c),a.setAttributeNS(null,"fx",r[0]),a.setAttributeNS(null,"fy",r[1]),a.setAttributeNS(null,"fr",s);break;default:throw new Error(`Unknown RadialAxial type: ${e[1]}`)}for(const e of n){const t=this.svgFactory.createElement("svg:stop");t.setAttributeNS(null,"offset",e[0]),t.setAttributeNS(null,"stop-color",e[1]),a.append(t)}return this.defs.append(a),`url(#${t})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${e[0]}`)}}setDash(e,t){this.current.dashArray=e,this.current.dashPhase=t}constructPath(e,t){const n=this.current;let a=n.x,r=n.y,o=[],s=0;for(const n of e)switch(0|n){case i.OPS.rectangle:a=t[s++],r=t[s++];const e=a+t[s++],n=r+t[s++];o.push("M",f(a),f(r),"L",f(e),f(r),"L",f(e),f(n),"L",f(a),f(n),"Z");break;case i.OPS.moveTo:a=t[s++],r=t[s++],o.push("M",f(a),f(r));break;case i.OPS.lineTo:a=t[s++],r=t[s++],o.push("L",f(a),f(r));break;case i.OPS.curveTo:a=t[s+4],r=t[s+5],o.push("C",f(t[s]),f(t[s+1]),f(t[s+2]),f(t[s+3]),f(a),f(r)),s+=6;break;case i.OPS.curveTo2:o.push("C",f(a),f(r),f(t[s]),f(t[s+1]),f(t[s+2]),f(t[s+3])),a=t[s+2],r=t[s+3],s+=4;break;case i.OPS.curveTo3:a=t[s+2],r=t[s+3],o.push("C",f(t[s]),f(t[s+1]),f(a),f(r),f(a),f(r)),s+=4;break;case i.OPS.closePath:o.push("Z")}o=o.join(" "),n.path&&e.length>0&&e[0]!==i.OPS.rectangle&&e[0]!==i.OPS.moveTo?o=n.path.getAttributeNS(null,"d")+o:(n.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(n.path)),n.path.setAttributeNS(null,"d",o),n.path.setAttributeNS(null,"fill","none"),n.element=n.path,n.setCurrentPoint(a,r)}endPath(){const e=this.current;if(e.path=null,!this.pendingClip)return;if(!e.element)return void(this.pendingClip=null);const t="clippath"+m++,n=this.svgFactory.createElement("svg:clipPath");n.setAttributeNS(null,"id",t),n.setAttributeNS(null,"transform",p(this.transformMatrix));const a=e.element.cloneNode(!0);if("evenodd"===this.pendingClip?a.setAttributeNS(null,"clip-rule","evenodd"):a.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,n.append(a),this.defs.append(n),e.activeClipUrl){e.clipGroup=null;for(const e of this.extraStack)e.clipGroup=null;n.setAttributeNS(null,"clip-path",e.activeClipUrl)}e.activeClipUrl=`url(#${t})`,this.tgrp=null}clip(e){this.pendingClip=e}closePath(){const e=this.current;if(e.path){const t=`${e.path.getAttributeNS(null,"d")}Z`;e.path.setAttributeNS(null,"d",t)}}setLeading(e){this.current.leading=-e}setTextRise(e){this.current.textRise=e}setTextRenderingMode(e){this.current.textRenderingMode=e}setHScale(e){this.current.textHScale=e/100}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n);break;case"CA":this.setStrokeAlpha(n);break;case"ca":this.setFillAlpha(n);break;default:(0,i.warn)(`Unimplemented graphic state operator ${t}`)}}fill(){const e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())}stroke(){const e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=this.current;let a=n.dashArray;1!==t&&a.length>0&&(a=a.map(function(e){return t*e})),e.setAttributeNS(null,"stroke",n.strokeColor),e.setAttributeNS(null,"stroke-opacity",n.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",f(n.miterLimit)),e.setAttributeNS(null,"stroke-linecap",n.lineCap),e.setAttributeNS(null,"stroke-linejoin",n.lineJoin),e.setAttributeNS(null,"stroke-width",f(t*n.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",a.map(f).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",f(t*n.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(e)}paintImageXObject(e){const t=this.getObject(e);t?this.paintInlineImageXObject(t):(0,i.warn)(`Dependent image with object ID ${e} is not ready yet`)}paintInlineImageXObject(e,t){const n=e.width,a=e.height,i=l(e,this.forceDataSchema,!!t),r=this.svgFactory.createElement("svg:rect");r.setAttributeNS(null,"x","0"),r.setAttributeNS(null,"y","0"),r.setAttributeNS(null,"width",f(n)),r.setAttributeNS(null,"height",f(a)),this.current.element=r,this.clip("nonzero");const o=this.svgFactory.createElement("svg:image");o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i),o.setAttributeNS(null,"x","0"),o.setAttributeNS(null,"y",f(-a)),o.setAttributeNS(null,"width",f(n)+"px"),o.setAttributeNS(null,"height",f(a)+"px"),o.setAttributeNS(null,"transform",`scale(${f(1/n)} ${f(-1/a)})`),t?t.append(o):this._ensureTransformGroup().append(o)}paintImageMaskXObject(e){const t=this.getObject(e.data,e);if(t.bitmap)return void(0,i.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");const n=this.current,a=t.width,r=t.height,o=n.fillColor;n.maskId="mask"+_++;const s=this.svgFactory.createElement("svg:mask");s.setAttributeNS(null,"id",n.maskId);const c=this.svgFactory.createElement("svg:rect");c.setAttributeNS(null,"x","0"),c.setAttributeNS(null,"y","0"),c.setAttributeNS(null,"width",f(a)),c.setAttributeNS(null,"height",f(r)),c.setAttributeNS(null,"fill",o),c.setAttributeNS(null,"mask",`url(#${n.maskId})`),this.defs.append(s),this._ensureTransformGroup().append(c),this.paintInlineImageXObject(t,s)}paintFormXObjectBegin(e,t){if(Array.isArray(e)&&6===e.length&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t){const e=t[2]-t[0],n=t[3]-t[1],a=this.svgFactory.createElement("svg:rect");a.setAttributeNS(null,"x",t[0]),a.setAttributeNS(null,"y",t[1]),a.setAttributeNS(null,"width",f(e)),a.setAttributeNS(null,"height",f(n)),this.current.element=a,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(e){const t=this.svgFactory.create(e.width,e.height),n=this.svgFactory.createElement("svg:defs");t.append(n),this.defs=n;const a=this.svgFactory.createElement("svg:g");return a.setAttributeNS(null,"transform",p(e.transform)),t.append(a),this.svg=a,t}_ensureClipGroup(){if(!this.current.clipGroup){const e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(e),this.current.clipGroup=e}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",p(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}},(e,t,n)=>{var a=n(3),i=n(188),r=n(193);a({target:"Array",proto:!0},{group:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),r("group")},(e,t,n)=>{var a=n(99),i=n(14),r=n(13),o=n(40),s=n(18),c=n(64),d=n(189),l=n(108),u=Array,f=i([].push);e.exports=function(e,t,n,i){for(var p,m,_,h=o(e),b=r(h),g=a(t,n),v=d(null),y=c(b),S=0;y>S;S++)_=b[S],(m=s(g(_,S,h)))in v?f(v[m],_):v[m]=[_];if(i&&(p=i(h))!==u)for(m in v)v[m]=l(p,v[m]);return v}},(e,t,n)=>{var a,i=n(47),r=n(190),o=n(66),s=n(55),c=n(192),d=n(43),l=n(54),u="prototype",f="script",p=l("IE_PROTO"),m=function(){},_=function(e){return"<"+f+">"+e+"</"+f+">"},h=function(e){e.write(_("")),e.close();var t=e.parentWindow.Object;return e=null,t},b=function(){try{a=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;b="undefined"!=typeof document?document.domain&&a?h(a):(t=d("iframe"),n="java"+f+":",t.style.display="none",c.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(_("document.F=Object")),e.close(),e.F):h(a);for(var i=o.length;i--;)delete b[u][o[i]];return b()};s[p]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(m[u]=i(e),n=new m,m[u]=null,n[p]=e):n=b(),void 0===t?n:r.f(n,t)}},(e,t,n)=>{var a=n(6),i=n(46),r=n(45),o=n(47),s=n(12),c=n(191);t.f=a&&!i?Object.defineProperties:function(e,t){o(e);for(var n,a=s(t),i=c(t),d=i.length,l=0;d>l;)r.f(e,n=i[l++],a[n]);return e}},(e,t,n)=>{var a=n(59),i=n(66);e.exports=Object.keys||function(e){return a(e,i)}},(e,t,n)=>{var a=n(24);e.exports=a("document","documentElement")},(e,t,n)=>{var a=n(34),i=n(189),r=n(45).f,o=a("unscopables"),s=Array.prototype;void 0===s[o]&&r(s,o,{configurable:!0,value:i(null)}),e.exports=function(e){s[o][e]=!0}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0,n(89);class a{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};return function e(n){if(!n)return;let i=null;const r=n.name;if("#text"===r)i=n.value;else{if(!a.shouldBuildText(r))return;n?.attributes?.textContent?i=n.attributes.textContent:n.value&&(i=n.value)}if(null!==i&&t.push({str:i}),n.children)for(const t of n.children)e(t)}(e),n}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}t.XfaText=a},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=function(e){e.textContentSource||!e.textContent&&!e.textContentStream||((0,i.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),e.textContentSource=e.textContent||e.textContentStream);const{container:t,viewport:n}=e,a=getComputedStyle(t),r=a.getPropertyValue("visibility"),o=parseFloat(a.getPropertyValue("--scale-factor"));"visible"===r&&(!o||Math.abs(o-n.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const s=new l(e);return s._render(),s},t.updateTextLayer=function(e){let{container:t,viewport:n,textDivs:a,textDivProperties:r,isOffscreenCanvasSupported:o,mustRotate:c=!0,mustRescale:l=!0}=e;if(c&&(0,i.setLayerDimensions)(t,{rotation:n.rotation}),l){const e=s(0,o),t={prevFontSize:null,prevFontFamily:null,div:null,scale:n.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:e};for(const e of a)t.properties=r.get(e),t.div=e,d(t)}},n(89),n(2);var a=n(1),i=n(168);const r=30,o=new Map;function s(e,t){let n;if(t&&a.FeatureTest.isOffscreenCanvasSupported)n=new OffscreenCanvas(e,e).getContext("2d",{alpha:!1});else{const t=document.createElement("canvas");t.width=t.height=e,n=t.getContext("2d",{alpha:!1})}return n}function c(e,t,n){const i=document.createElement("span"),c={angle:0,canvasWidth:0,hasText:""!==t.str,hasEOL:t.hasEOL,fontSize:0};e._textDivs.push(i);const d=a.Util.transform(e._transform,t.transform);let l=Math.atan2(d[1],d[0]);const u=n[t.fontName];u.vertical&&(l+=Math.PI/2);const f=Math.hypot(d[2],d[3]),p=f*function(e,t){const n=o.get(e);if(n)return n;const a=s(r,t);a.font=`30px ${e}`;const i=a.measureText("");let c=i.fontBoundingBoxAscent,d=Math.abs(i.fontBoundingBoxDescent);if(c){const t=c/(c+d);return o.set(e,t),a.canvas.width=a.canvas.height=0,t}a.strokeStyle="red",a.clearRect(0,0,r,r),a.strokeText("g",0,0);let l=a.getImageData(0,0,r,r).data;d=0;for(let e=l.length-1-3;e>=0;e-=4)if(l[e]>0){d=Math.ceil(e/4/r);break}a.clearRect(0,0,r,r),a.strokeText("A",0,r),l=a.getImageData(0,0,r,r).data,c=0;for(let e=0,t=l.length;e<t;e+=4)if(l[e]>0){c=r-Math.floor(e/4/r);break}if(a.canvas.width=a.canvas.height=0,c){const t=c/(c+d);return o.set(e,t),t}return o.set(e,.8),.8}(u.fontFamily,e._isOffscreenCanvasSupported);let m,_;0===l?(m=d[4],_=d[5]-p):(m=d[4]+p*Math.sin(l),_=d[5]-p*Math.cos(l));const h="calc(var(--scale-factor)*",b=i.style;e._container===e._rootContainer?(b.left=`${(100*m/e._pageWidth).toFixed(2)}%`,b.top=`${(100*_/e._pageHeight).toFixed(2)}%`):(b.left=`${h}${m.toFixed(2)}px)`,b.top=`${h}${_.toFixed(2)}px)`),b.fontSize=`${h}${f.toFixed(2)}px)`,b.fontFamily=u.fontFamily,c.fontSize=f,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,e._fontInspectorEnabled&&(i.dataset.fontName=t.fontName),0!==l&&(c.angle=l*(180/Math.PI));let g=!1;if(t.str.length>1)g=!0;else if(" "!==t.str&&t.transform[0]!==t.transform[3]){const e=Math.abs(t.transform[0]),n=Math.abs(t.transform[3]);e!==n&&Math.max(e,n)/Math.min(e,n)>1.5&&(g=!0)}g&&(c.canvasWidth=u.vertical?t.height:t.width),e._textDivProperties.set(i,c),e._isReadableStream&&e._layoutText(i)}function d(e){const{div:t,scale:n,properties:a,ctx:i,prevFontSize:r,prevFontFamily:o}=e,{style:s}=t;let c="";if(0!==a.canvasWidth&&a.hasText){const{fontFamily:d}=s,{canvasWidth:l,fontSize:u}=a;r===u&&o===d||(i.font=`${u*n}px ${d}`,e.prevFontSize=u,e.prevFontFamily=d);const{width:f}=i.measureText(t.textContent);f>0&&(c=`scaleX(${l*n/f})`)}0!==a.angle&&(c=`rotate(${a.angle}deg) ${c}`),c.length>0&&(s.transform=c)}class l{constructor(e){let{textContentSource:t,container:n,viewport:r,textDivs:o,textDivProperties:c,textContentItemsStr:d,isOffscreenCanvasSupported:l}=e;this._textContentSource=t,this._isReadableStream=t instanceof ReadableStream,this._container=this._rootContainer=n,this._textDivs=o||[],this._textContentItemsStr=d||[],this._isOffscreenCanvasSupported=l,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=c||new WeakMap,this._canceled=!1,this._capability=new a.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:r.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:s(0,l)};const{pageWidth:u,pageHeight:f,pageX:p,pageY:m}=r.rawDims;this._transform=[1,0,0,-1,-p,m+f],this._pageWidth=u,this._pageHeight=f,(0,i.setLayerDimensions)(n,r),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new a.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new a.AbortException("TextLayer task cancelled."))}_processItems(e,t){for(const n of e)if(void 0!==n.str)this._textContentItemsStr.push(n.str),c(this,n,t);else if("beginMarkedContentProps"===n.type||"beginMarkedContent"===n.type){const e=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==n.id&&this._container.setAttribute("id",`${n.id}`),e.append(this._container)}else"endMarkedContent"===n.type&&(this._container=this._container.parentNode)}_layoutText(e){const t=this._layoutTextParams.properties=this._textDivProperties.get(e);if(this._layoutTextParams.div=e,d(this._layoutTextParams),t.hasText&&this._container.append(e),t.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),this._container.append(e)}}_render(){const e=new a.PromiseCapability;let t=Object.create(null);if(this._isReadableStream){const n=()=>{this._reader.read().then(a=>{let{value:i,done:r}=a;r?e.resolve():(Object.assign(t,i.styles),this._processItems(i.items,t),n())},e.reject)};this._reader=this._textContentSource.getReader(),n()}else{if(!this._textContentSource)throw new Error('No "textContentSource" parameter specified.');{const{items:t,styles:n}=this._textContentSource;this._processItems(t,n),e.resolve()}}e.promise.then(()=>{t=null,function(e){if(e._canceled)return;const t=e._textDivs,n=e._capability;if(t.length>1e5)n.resolve();else{if(!e._isReadableStream)for(const n of t)e._layoutText(n);n.resolve()}}(this)},this._capability.reject)}}t.TextLayerRenderTask=l},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0,n(125),n(136),n(138),n(141),n(143),n(145),n(147);var a=n(1),i=n(164),r=n(197),o=n(202),s=n(168),c=n(203);class d{#Dt;#It=!1;#xt=null;#Ct=this.pointerup.bind(this);#Ot=this.pointerdown.bind(this);#wt=new Map;#Et=!1;#At=!1;#Lt=!1;#kt;static _initialized=!1;constructor(e){let{uiManager:t,pageIndex:n,div:a,accessibilityManager:i,annotationLayer:s,viewport:l,l10n:u}=e;const f=[r.FreeTextEditor,o.InkEditor,c.StampEditor];if(!d._initialized){d._initialized=!0;for(const e of f)e.initialize(u)}t.registerEditorTypes(f),this.#kt=t,this.pageIndex=n,this.div=a,this.#Dt=i,this.#xt=s,this.viewport=l,this.#kt.addLayer(this)}get isEmpty(){return 0===this.#wt.size}updateToolbar(e){this.#kt.updateToolbar(e)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.#kt.getMode();this.#Mt(),e===a.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),e!==a.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",e===a.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",e===a.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",e===a.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(e){if(e||this.#kt.getMode()===a.AnnotationEditorType.INK){if(!e)for(const e of this.#wt.values())if(e.isEmpty())return void e.setInBackground();this.#Pt({offsetX:0,offsetY:0},!1).setInBackground()}}setEditingState(e){this.#kt.setEditingState(e)}addCommands(e){this.#kt.addCommands(e)}enable(){this.div.style.pointerEvents="auto";const e=new Set;for(const t of this.#wt.values())t.enableEditing(),t.annotationElementId&&e.add(t.annotationElementId);if(!this.#xt)return;const t=this.#xt.getEditableAnnotations();for(const n of t){if(n.hide(),this.#kt.isDeletedAnnotationElement(n.data.id))continue;if(e.has(n.data.id))continue;const t=this.deserialize(n);t&&(this.addOrRebuild(t),t.enableEditing())}}disable(){this.#Lt=!0,this.div.style.pointerEvents="none";const e=new Set;for(const t of this.#wt.values())t.disableEditing(),t.annotationElementId&&null===t.serialize()?(this.getEditableAnnotation(t.annotationElementId)?.show(),t.remove()):e.add(t.annotationElementId);if(this.#xt){const t=this.#xt.getEditableAnnotations();for(const n of t){const{id:t}=n.data;e.has(t)||this.#kt.isDeletedAnnotationElement(t)||n.show()}}this.#Mt(),this.isEmpty&&(this.div.hidden=!0),this.#Lt=!1}getEditableAnnotation(e){return this.#xt?.getEditableAnnotation(e)||null}setActiveEditor(e){this.#kt.getActive()!==e&&this.#kt.setActiveEditor(e)}enableClick(){this.div.addEventListener("pointerdown",this.#Ot),this.div.addEventListener("pointerup",this.#Ct)}disableClick(){this.div.removeEventListener("pointerdown",this.#Ot),this.div.removeEventListener("pointerup",this.#Ct)}attach(e){this.#wt.set(e.id,e);const{annotationElementId:t}=e;t&&this.#kt.isDeletedAnnotationElement(t)&&this.#kt.removeDeletedAnnotationElement(e)}detach(e){this.#wt.delete(e.id),this.#Dt?.removePointerInTextLayer(e.contentDiv),!this.#Lt&&e.annotationElementId&&this.#kt.addDeletedAnnotationElement(e)}remove(e){this.detach(e),this.#kt.removeEditor(e),e.div.contains(document.activeElement)&&setTimeout(()=>{this.#kt.focusMainContainer()},0),e.div.remove(),e.isAttachedToDOM=!1,this.#At||this.addInkEditorIfNeeded(!1)}changeParent(e){e.parent!==this&&(e.annotationElementId&&(this.#kt.addDeletedAnnotationElement(e.annotationElementId),i.AnnotationEditor.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),e.parent?.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(this.changeParent(e),this.#kt.addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(),this.#kt.addToAnnotationStorage(e)}moveEditorInDOM(e){if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&(e._focusEventsAllowed=!1,setTimeout(()=>{e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0}),t.focus())},0)),e._structTreeParentId=this.#Dt?.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?e.rebuild():this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getNextId(){return this.#kt.getId()}#Tt(e){switch(this.#kt.getMode()){case a.AnnotationEditorType.FREETEXT:return new r.FreeTextEditor(e);case a.AnnotationEditorType.INK:return new o.InkEditor(e);case a.AnnotationEditorType.STAMP:return new c.StampEditor(e)}return null}pasteEditor(e,t){this.#kt.updateToolbar(e),this.#kt.updateMode(e);const{offsetX:n,offsetY:a}=this.#Ut(),i=this.getNextId(),r=this.#Tt({parent:this,id:i,x:n,y:a,uiManager:this.#kt,isCentered:!0,...t});r&&this.add(r)}deserialize(e){switch(e.annotationType??e.annotationEditorType){case a.AnnotationEditorType.FREETEXT:return r.FreeTextEditor.deserialize(e,this,this.#kt);case a.AnnotationEditorType.INK:return o.InkEditor.deserialize(e,this,this.#kt);case a.AnnotationEditorType.STAMP:return c.StampEditor.deserialize(e,this,this.#kt)}return null}#Pt(e,t){const n=this.getNextId(),a=this.#Tt({parent:this,id:n,x:e.offsetX,y:e.offsetY,uiManager:this.#kt,isCentered:t});return a&&this.add(a),a}#Ut(){const{x:e,y:t,width:n,height:a}=this.div.getBoundingClientRect(),i=Math.max(0,e),r=Math.max(0,t),o=(i+Math.min(window.innerWidth,e+n))/2-e,s=(r+Math.min(window.innerHeight,t+a))/2-t,[c,d]=this.viewport.rotation%180==0?[o,s]:[s,o];return{offsetX:c,offsetY:d}}addNewEditor(){this.#Pt(this.#Ut(),!0)}setSelected(e){this.#kt.setSelected(e)}toggleSelected(e){this.#kt.toggleSelected(e)}isSelected(e){return this.#kt.isSelected(e)}unselect(e){this.#kt.unselect(e)}pointerup(e){const{isMac:t}=a.FeatureTest.platform;0!==e.button||e.ctrlKey&&t||e.target===this.div&&this.#Et&&(this.#Et=!1,this.#It?this.#kt.getMode()!==a.AnnotationEditorType.STAMP?this.#Pt(e,!1):this.#kt.unselectAll():this.#It=!0)}pointerdown(e){if(this.#Et)return void(this.#Et=!1);const{isMac:t}=a.FeatureTest.platform;if(0!==e.button||e.ctrlKey&&t)return;if(e.target!==this.div)return;this.#Et=!0;const n=this.#kt.getActive();this.#It=!n||n.isEmpty()}findNewParent(e,t,n){const a=this.#kt.findParent(t,n);return null!==a&&a!==this&&(a.changeParent(e),!0)}destroy(){this.#kt.getActive()?.parent===this&&(this.#kt.commitOrRemove(),this.#kt.setActiveEditor(null));for(const e of this.#wt.values())this.#Dt?.removePointerInTextLayer(e.contentDiv),e.setParent(null),e.isAttachedToDOM=!1,e.div.remove();this.div=null,this.#wt.clear(),this.#kt.removeLayer(this)}#Mt(){this.#At=!0;for(const e of this.#wt.values())e.isEmpty()&&e.remove();this.#At=!1}render(e){let{viewport:t}=e;this.viewport=t,(0,s.setLayerDimensions)(this.div,t);for(const e of this.#kt.getEditors(this.pageIndex))this.add(e);this.updateMode()}update(e){let{viewport:t}=e;this.#kt.commitOrRemove(),this.viewport=t,(0,s.setLayerDimensions)(this.div,{rotation:t.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}}t.AnnotationEditorLayer=d},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0,n(89);var a=n(1),i=n(165),r=n(164),o=n(198);class s extends r.AnnotationEditor{#Ft=this.editorDivBlur.bind(this);#Ht=this.editorDivFocus.bind(this);#Rt=this.editorDivInput.bind(this);#Nt=this.editorDivKeydown.bind(this);#Bt;#jt="";#Vt=`${this.id}-editor`;#zt;#Gt=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const e=s.prototype,t=e=>e.isEmpty(),n=i.AnnotationEditorUIManager.TRANSLATE_SMALL,r=i.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new i.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}]]))}static _type="freetext";constructor(e){super({...e,name:"freeTextEditor"}),this.#Bt=e.color||s._defaultColor||r.AnnotationEditor._defaultLineColor,this.#zt=e.fontSize||s._defaultFontSize}static initialize(e){r.AnnotationEditor.initialize(e,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const t=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(t.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case a.AnnotationEditorParamsType.FREETEXT_SIZE:s._defaultFontSize=t;break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:s._defaultColor=t}}updateParams(e,t){switch(e){case a.AnnotationEditorParamsType.FREETEXT_SIZE:this.#Kt(t);break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:this.#Wt(t)}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,s._defaultFontSize],[a.AnnotationEditorParamsType.FREETEXT_COLOR,s._defaultColor||r.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,this.#zt],[a.AnnotationEditorParamsType.FREETEXT_COLOR,this.#Bt]]}#Kt(e){const t=e=>{this.editorDiv.style.fontSize=`calc(${e}px * var(--scale-factor))`,this.translate(0,-(e-this.#zt)*this.parentScale),this.#zt=e,this.#qt()},n=this.#zt;this.addCommands({cmd:()=>{t(e)},undo:()=>{t(n)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#Wt(e){const t=this.#Bt;this.addCommands({cmd:()=>{this.#Bt=this.editorDiv.style.color=e},undo:()=>{this.#Bt=this.editorDiv.style.color=t},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-s._internalPadding*e,-(s._internalPadding+this.#zt)*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(a.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#Nt),this.editorDiv.addEventListener("focus",this.#Ht),this.editorDiv.addEventListener("blur",this.#Ft),this.editorDiv.addEventListener("input",this.#Rt))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#Vt),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#Nt),this.editorDiv.removeEventListener("focus",this.#Ht),this.editorDiv.removeEventListener("blur",this.#Ft),this.editorDiv.removeEventListener("input",this.#Rt),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){this.width?this.#Qt():(this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#Yt(){const e=this.editorDiv.getElementsByTagName("div");if(0===e.length)return this.editorDiv.innerText;const t=[];for(const n of e)t.push(n.innerText.replace(/\r\n?|\n/,""));return t.join("\n")}#qt(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:e,div:t}=this,a=t.style.display;t.style.display="hidden",e.div.append(this.div),n=t.getBoundingClientRect(),t.remove(),t.style.display=a}this.rotation%180==this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=this.#jt,t=this.#jt=this.#Yt().trimEnd();if(e===t)return;const n=e=>{this.#jt=e,e?(this.#Jt(),this._uiManager.rebuild(this),this.#qt()):this.remove()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),this.#qt()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){s._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#Vt),this.enableEditing(),r.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(e=>this.editorDiv?.setAttribute("aria-label",e)),r.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(e=>this.editorDiv?.setAttribute("default-content",e)),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${this.#zt}px * var(--scale-factor))`,n.color=this.#Bt,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,i.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[n,a]=this.parentDimensions;if(this.annotationElementId){const{position:i}=this.#Gt;let[r,o]=this.getInitialTranslation();[r,o]=this.pageTranslationToScreen(r,o);const[s,c]=this.pageDimensions,[d,l]=this.pageTranslation;let u,f;switch(this.rotation){case 0:u=e+(i[0]-d)/s,f=t+this.height-(i[1]-l)/c;break;case 90:u=e+(i[0]-d)/s,f=t-(i[1]-l)/c,[r,o]=[o,-r];break;case 180:u=e-this.width+(i[0]-d)/s,f=t-(i[1]-l)/c,[r,o]=[-r,-o];break;case 270:u=e+(i[0]-d-this.height*c)/s,f=t+(i[1]-l-this.width*s)/c,[r,o]=[-o,r]}this.setAt(u*n,f*a,r,o)}else this.setAt(e*n,t*a,this.width*n,this.height*a);this.#Jt(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#Jt(){if(this.editorDiv.replaceChildren(),this.#jt)for(const e of this.#jt.split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}get contentDiv(){return this.editorDiv}static deserialize(e,t,n){let i=null;if(e instanceof o.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:t,fontColor:n},rect:r,rotation:o,id:s},textContent:c,textPosition:d,parent:{page:{pageNumber:l}}}=e;if(!c||0===c.length)return null;i=e={annotationType:a.AnnotationEditorType.FREETEXT,color:Array.from(n),fontSize:t,value:c.join("\n"),position:d,pageIndex:l-1,rect:r,rotation:o,id:s,deleted:!1}}const r=super.deserialize(e,t,n);return r.#zt=e.fontSize,r.#Bt=a.Util.makeHexColor(...e.color),r.#jt=e.value,r.annotationElementId=e.id||null,r.#Gt=i,r}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const t=s._internalPadding*this.parentScale,n=this.getRect(t,t),i=r.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#Bt),o={annotationType:a.AnnotationEditorType.FREETEXT,color:i,fontSize:this.#zt,value:this.#jt,pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?o:this.annotationElementId&&!this.#Xt(o)?null:(o.id=this.annotationElementId,o)}#Xt(e){const{value:t,fontSize:n,color:a,rect:i,pageIndex:r}=this.#Gt;return e.value!==t||e.fontSize!==n||e.rect.some((e,t)=>Math.abs(e-i[t])>=1)||e.color.some((e,t)=>e!==a[t])||e.pageIndex!==r}#Qt(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.annotationElementId)return;if(this.#qt(),!e&&(0===this.width||0===this.height))return void setTimeout(()=>this.#Qt(!0),0);const t=s._internalPadding*this.parentScale;this.#Gt.rect=this.getRect(t,t)}}t.FreeTextEditor=s},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StampAnnotationElement=t.InkAnnotationElement=t.FreeTextAnnotationElement=t.AnnotationLayer=void 0,n(89),n(125),n(136),n(138),n(141),n(143),n(145),n(147);var a=n(1),i=n(168),r=n(163),o=n(199),s=n(200),c=n(201);const d=1e3,l=new WeakSet;function u(e){return{width:e[2]-e[0],height:e[3]-e[1]}}class f{static create(e){switch(e.data.annotationType){case a.AnnotationType.LINK:return new m(e);case a.AnnotationType.TEXT:return new _(e);case a.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new b(e);case"Btn":return e.data.radioButton?new y(e):e.data.checkBox?new v(e):new S(e);case"Ch":return new D(e);case"Sig":return new g(e)}return new h(e);case a.AnnotationType.POPUP:return new I(e);case a.AnnotationType.FREETEXT:return new C(e);case a.AnnotationType.LINE:return new O(e);case a.AnnotationType.SQUARE:return new w(e);case a.AnnotationType.CIRCLE:return new E(e);case a.AnnotationType.POLYLINE:return new A(e);case a.AnnotationType.CARET:return new k(e);case a.AnnotationType.INK:return new M(e);case a.AnnotationType.POLYGON:return new L(e);case a.AnnotationType.HIGHLIGHT:return new P(e);case a.AnnotationType.UNDERLINE:return new T(e);case a.AnnotationType.SQUIGGLY:return new U(e);case a.AnnotationType.STRIKEOUT:return new F(e);case a.AnnotationType.STAMP:return new H(e);case a.AnnotationType.FILEATTACHMENT:return new R(e);default:return new p(e)}}}class p{#Zt=!1;constructor(e){let{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:a=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),a&&this._createQuadrilaterals()}static _hasPopupData(e){let{titleObj:t,contentsObj:n,richText:a}=e;return!!(t?.str||n?.str||a?.str)}get hasPopupData(){return p._hasPopupData(this.data)}_createContainer(e){const{data:t,parent:{page:n,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",t.id),this instanceof h||(r.tabIndex=d),r.style.zIndex=this.parent.zIndex++,this.data.popupRef&&r.setAttribute("aria-haspopup","dialog"),t.noRotate&&r.classList.add("norotate");const{pageWidth:o,pageHeight:s,pageX:c,pageY:l}=i.rawDims;if(!t.rect||this instanceof I){const{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,r),r}const{width:f,height:p}=u(t.rect),m=a.Util.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]);if(!e&&t.borderStyle.width>0){r.style.borderWidth=`${t.borderStyle.width}px`;const e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;if(e>0||n>0){const t=`calc(${e}px * var(--scale-factor)) / calc(${n}px * var(--scale-factor))`;r.style.borderRadius=t}else if(this instanceof y){const e=`calc(${f}px * var(--scale-factor)) / calc(${p}px * var(--scale-factor))`;r.style.borderRadius=e}switch(t.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:r.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:r.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:r.style.borderBottomStyle="solid"}const i=t.borderColor||null;i?(this.#Zt=!0,r.style.borderColor=a.Util.makeHexColor(0|i[0],0|i[1],0|i[2])):r.style.borderWidth=0}r.style.left=100*(m[0]-c)/o+"%",r.style.top=100*(m[1]-l)/s+"%";const{rotation:_}=t;return t.hasOwnCanvas||0===_?(r.style.width=100*f/o+"%",r.style.height=100*p/s+"%"):this.setRotation(_,r),r}setRotation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:n,pageHeight:a}=this.parent.viewport.rawDims,{width:i,height:r}=u(this.data.rect);let o,s;e%180==0?(o=100*i/n,s=100*r/a):(o=100*r/n,s=100*i/a),t.style.width=`${o}%`,t.style.height=`${s}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(e,t,n)=>{const a=n.detail[e],i=a[0],r=a.slice(1);n.target.style[t]=o.ColorConverters[`${i}_HTML`](r),this.annotationStorage.setValue(this.data.id,{[t]:o.ColorConverters[`${i}_rgb`](r)})};return(0,a.shadow)(this,"_commonActions",{display:e=>{const{display:t}=e.detail,n=t%2==1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{const t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const a of Object.keys(t.detail)){const i=e[a]||n[a];i?.(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[a,i]of Object.entries(t)){const r=n[a];r&&(r({detail:{[a]:i},target:e}),delete t[a])}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,a,i]=this.data.rect;if(1===e.length){const[,{x:r,y:o},{x:s,y:c}]=e[0];if(a===r&&i===o&&t===s&&n===c)return}const{style:r}=this.container;let o;if(this.#Zt){const{borderColor:e,borderWidth:t}=r;r.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${e}" stroke-width="${t}">`],this.container.classList.add("hasBorder")}const s=a-t,c=i-n,{svgFactory:d}=this,l=d.createElement("svg");l.classList.add("quadrilateralsContainer"),l.setAttribute("width",0),l.setAttribute("height",0);const u=d.createElement("defs");l.append(u);const f=d.createElement("clipPath"),p=`clippath_${this.data.id}`;f.setAttribute("id",p),f.setAttribute("clipPathUnits","objectBoundingBox"),u.append(f);for(const[,{x:n,y:a},{x:r,y:l}]of e){const e=d.createElement("rect"),u=(r-t)/s,p=(i-a)/c,m=(n-r)/s,_=(a-l)/c;e.setAttribute("x",u),e.setAttribute("y",p),e.setAttribute("width",m),e.setAttribute("height",_),f.append(e),o?.push(`<rect vector-effect="non-scaling-stroke" x="${u}" y="${p}" width="${m}" height="${_}"/>`)}this.#Zt&&(o.push("</g></svg>')"),r.backgroundImage=o.join("")),this.container.append(l),this.container.style.clipPath=`url(#${p})`}_createPopup(){const{container:e,data:t}=this;e.setAttribute("aria-haspopup","dialog");const n=new I({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]});this.parent.div.append(n.render())}render(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];if(this._fieldObjects){const i=this._fieldObjects[e];if(i)for(const{page:e,id:r,exportValues:o}of i){if(-1===e)continue;if(r===t)continue;const i="string"==typeof o?o:null,s=document.querySelector(`[data-element-id="${r}"]`);!s||l.has(s)?n.push({id:r,exportValue:i,domElement:s}):(0,a.warn)(`_getElementsByName - element not allowed: ${r}`)}return n}for(const a of document.getElementsByName(e)){const{exportValue:e}=a,i=a.getAttribute("data-element-id");i!==t&&l.has(a)&&n.push({id:i,exportValue:e,domElement:a})}return n}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}}class m extends p{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,{isRenderable:!0,ignoreBorder:!!t?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let a=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),a=!0):e.action?(this._bindNamedAction(n,e.action),a=!0):e.attachment?(this._bindAttachment(n,e.attachment),a=!0):e.setOCGState?(this.#$t(n,e.setOCGState),a=!0):e.dest?(this._bindLink(n,e.dest),a=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),a=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(n,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(n),this.container}#en(){this.container.setAttribute("data-internal-link","")}_bindLink(e,t){e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&this.#en()}_bindNamedAction(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),this.#en()}_bindAttachment(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,t.content,t.filename),!1),this.#en()}#$t(e,t){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),this.#en()}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(t.actions)){const i=n.get(a);i&&(e[i]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:a}}),!1))}e.onclick||(e.onclick=()=>!1),this.#en()}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),this.#en(),!this._fieldObjects)return(0,a.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(e.onclick=()=>!1));e.onclick=()=>{n?.();const{fields:e,refs:i,include:r}=t,o=[];if(0!==e.length||0!==i.length){const t=new Set(i);for(const n of e){const e=this._fieldObjects[n]||[];for(const{id:n}of e)t.add(n)}for(const e of Object.values(this._fieldObjects))for(const n of e)t.has(n.id)===r&&o.push(n)}else for(const e of Object.values(this._fieldObjects))o.push(...e);const s=this.annotationStorage,c=[];for(const e of o){const{id:t}=e;switch(c.push(t),e.type){case"text":{const n=e.defaultValue||"";s.setValue(t,{value:n});break}case"checkbox":case"radiobutton":{const n=e.defaultValue===e.exportValues;s.setValue(t,{value:n});break}case"combobox":case"listbox":{const n=e.defaultValue||"";s.setValue(t,{value:n});break}default:continue}const n=document.querySelector(`[data-element-id="${t}"]`);n&&(l.has(n)?n.dispatchEvent(new Event("resetform")):(0,a.warn)(`_bindResetFormAction - element not allowed: ${t}`))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}}),!1}}}class _ extends p{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class h extends p{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(e){this.data.hasOwnCanvas&&("CANVAS"===e.previousSibling?.nodeName&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){const{isWin:t,isMac:n}=a.FeatureTest.platform;return t&&e.ctrlKey||n&&e.metaKey}_setEventListener(e,t,n,a,i){n.includes("mouse")?e.addEventListener(n,e=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:i(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})}):e.addEventListener(n,e=>{if("blur"===n){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===n){if(t.focused)return;t.focused=!0}i&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:a,value:i(e)}})})}_setEventListeners(e,t,n,a){for(const[i,r]of n)("Action"===r||this.data.actions?.[r])&&("Focus"!==r&&"Blur"!==r||(t||={focused:!1}),this._setEventListener(e,t,i,r,a),"Focus"!==r||this.data.actions?.Blur?"Blur"!==r||this.data.actions?.Focus||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":a.Util.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const{fontColor:t}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||9,i=e.style;let r;const o=e=>Math.round(10*e)/10;if(this.data.multiLine){const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),t=e/(Math.round(e/(a.LINE_FACTOR*n))||1);r=Math.min(n,o(t/a.LINE_FACTOR))}else{const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2);r=Math.min(n,o(e/a.LINE_FACTOR))}i.fontSize=`calc(${r}px * var(--scale-factor))`,i.color=a.Util.makeHexColor(t[0],t[1],t[2]),null!==this.data.textAlignment&&(i.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class b extends h{constructor(e){super(e,{isRenderable:e.renderForms||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,n,a){const i=this.annotationStorage;for(const r of this._getElementsByName(e.name,e.id))r.domElement&&(r.domElement[t]=n),i.setValue(r.id,{[a]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let i=a.value||"";const r=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;r&&i.length>r&&(i=i.slice(0,r));let o=a.formattedValue||this.data.textContent?.join("\n")||null;o&&this.data.comb&&(o=o.replaceAll(/\s+/g,""));const s={userValue:i,formattedValue:o,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=o??i,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",o??i),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),l.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=d,this._setRequired(n,this.data.required),r&&(n.maxLength=r),n.addEventListener("input",a=>{e.setValue(t,{value:a.target.value}),this.setPropertyOnSiblings(n,"value",a.target.value,"value"),s.formattedValue=null}),n.addEventListener("resetform",e=>{const t=this.data.defaultFieldValue??"";n.value=s.userValue=t,s.formattedValue=null});let c=e=>{const{formattedValue:t}=s;null!=t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",e=>{if(s.focused)return;const{target:t}=e;s.userValue&&(t.value=s.userValue),s.lastCommittedValue=t.value,s.commitKey=1,s.focused=!0}),n.addEventListener("updatefromsandbox",n=>{this.showElementAndHideCanvas(n.target);const a={value(n){s.userValue=n.detail.value??"",e.setValue(t,{value:s.userValue.toString()}),n.target.value=s.userValue},formattedValue(n){const{formattedValue:a}=n.detail;s.formattedValue=a,null!=a&&n.target!==document.activeElement&&(n.target.value=a),e.setValue(t,{formattedValue:a})},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:n=>{const{charLimit:a}=n.detail,{target:i}=n;if(0===a)return void i.removeAttribute("maxLength");i.setAttribute("maxLength",a);let r=s.userValue;!r||r.length<=a||(r=r.slice(0,a),i.value=s.userValue=r,e.setValue(t,{value:r}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:r,willCommit:!0,commitKey:1,selStart:i.selectionStart,selEnd:i.selectionEnd}}))}};this._dispatchEventFromSandbox(a,n)}),n.addEventListener("keydown",e=>{s.commitKey=1;let n=-1;if("Escape"===e.key?n=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(s.commitKey=3):n=2,-1===n)return;const{value:a}=e.target;s.lastCommittedValue!==a&&(s.lastCommittedValue=a,s.userValue=a,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,willCommit:!0,commitKey:n,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))});const a=c;c=null,n.addEventListener("blur",e=>{if(!s.focused||!e.relatedTarget)return;s.focused=!1;const{value:n}=e.target;s.userValue=n,s.lastCommittedValue!==n&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:n,willCommit:!0,commitKey:s.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}),a(e)}),this.data.actions?.Keystroke&&n.addEventListener("beforeinput",e=>{s.lastCommittedValue=null;const{data:n,target:a}=e,{value:i,selectionStart:r,selectionEnd:o}=a;let c=r,d=o;switch(e.inputType){case"deleteWordBackward":{const e=i.substring(0,r).match(/\w*[^\w]*$/);e&&(c-=e[0].length);break}case"deleteWordForward":{const e=i.substring(r).match(/^[^\w]*\w*/);e&&(d+=e[0].length);break}case"deleteContentBackward":r===o&&(c-=1);break;case"deleteContentForward":r===o&&(d+=1)}e.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:i,change:n||"",willCommit:!1,selStart:c,selEnd:d}})}),this._setEventListeners(n,s,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.value)}if(c&&n.addEventListener("blur",c),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/r;n.classList.add("comb"),n.style.letterSpacing=`calc(${e}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell";return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class g extends h{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class v extends h{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let a=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;"string"==typeof a&&(a="Off"!==a,e.setValue(n,{value:a})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return l.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,a&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=d,i.addEventListener("change",a=>{const{name:i,checked:r}=a.target;for(const a of this._getElementsByName(i,n)){const n=r&&a.exportValue===t.exportValue;a.domElement&&(a.domElement.checked=n),e.setValue(a.id,{value:n})}e.setValue(n,{value:r})}),i.addEventListener("resetform",e=>{const n=t.defaultFieldValue||"Off";e.target.checked=n===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",t=>{const a={value(t){t.target.checked="Off"!==t.detail.value,e.setValue(n,{value:t.target.checked})}};this._dispatchEventFromSandbox(a,t)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class y extends h{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let a=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;"string"==typeof a&&(a=a!==t.buttonValue,e.setValue(n,{value:a}));const i=document.createElement("input");if(l.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,a&&i.setAttribute("checked",!0),i.tabIndex=d,i.addEventListener("change",t=>{const{name:a,checked:i}=t.target;for(const t of this._getElementsByName(a,n))e.setValue(t.id,{value:!1});e.setValue(n,{value:i})}),i.addEventListener("resetform",e=>{const n=t.defaultFieldValue;e.target.checked=null!=n&&n===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;i.addEventListener("updatefromsandbox",t=>{const i={value:t=>{const i=a===t.detail.value;for(const a of this._getElementsByName(t.target.name)){const t=i&&a.id===n;a.domElement&&(a.domElement.checked=t),e.setValue(a.id,{value:t})}}};this._dispatchEventFromSandbox(i,t)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class S extends m{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(e.title=this.data.alternativeText);const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",e=>{this._dispatchEventFromSandbox({},e)})),e}}class D extends h{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),a=document.createElement("select");l.add(a),a.setAttribute("data-element-id",t),a.disabled=this.data.readOnly,this._setRequired(a,this.data.required),a.name=this.data.fieldName,a.tabIndex=d;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(a.size=this.data.options.length,this.data.multiSelect&&(a.multiple=!0)),a.addEventListener("resetform",e=>{const t=this.data.defaultFieldValue;for(const e of a.options)e.selected=e.value===t});for(const e of this.data.options){const t=document.createElement("option");t.textContent=e.displayValue,t.value=e.exportValue,n.value.includes(e.exportValue)&&(t.setAttribute("selected",!0),i=!1),a.append(t)}let r=null;if(i){const e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),a.prepend(e),r=()=>{e.remove(),a.removeEventListener("input",r),r=null},a.addEventListener("input",r)}const o=e=>{const t=e?"value":"textContent",{options:n,multiple:i}=a;return i?Array.prototype.filter.call(n,e=>e.selected).map(e=>e[t]):-1===n.selectedIndex?null:n[n.selectedIndex][t]};let s=o(!1);const c=e=>{const t=e.target.options;return Array.prototype.map.call(t,e=>({displayValue:e.textContent,exportValue:e.value}))};return this.enableScripting&&this.hasJSActions?(a.addEventListener("updatefromsandbox",n=>{const i={value(n){r?.();const i=n.detail.value,c=new Set(Array.isArray(i)?i:[i]);for(const e of a.options)e.selected=c.has(e.value);e.setValue(t,{value:o(!0)}),s=o(!1)},multipleSelection(e){a.multiple=!0},remove(n){const i=a.options,r=n.detail.remove;i[r].selected=!1,a.remove(r),i.length>0&&-1===Array.prototype.findIndex.call(i,e=>e.selected)&&(i[0].selected=!0),e.setValue(t,{value:o(!0),items:c(n)}),s=o(!1)},clear(n){for(;0!==a.length;)a.remove(0);e.setValue(t,{value:null,items:[]}),s=o(!1)},insert(n){const{index:i,displayValue:r,exportValue:d}=n.detail.insert,l=a.children[i],u=document.createElement("option");u.textContent=r,u.value=d,l?l.before(u):a.append(u),e.setValue(t,{value:o(!0),items:c(n)}),s=o(!1)},items(n){const{items:i}=n.detail;for(;0!==a.length;)a.remove(0);for(const e of i){const{displayValue:t,exportValue:n}=e,i=document.createElement("option");i.textContent=t,i.value=n,a.append(i)}a.options.length>0&&(a.options[0].selected=!0),e.setValue(t,{value:o(!0),items:c(n)}),s=o(!1)},indices(n){const a=new Set(n.detail.indices);for(const e of n.target.options)e.selected=a.has(e.index);e.setValue(t,{value:o(!0)}),s=o(!1)},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(i,n)}),a.addEventListener("input",n=>{const a=o(!0);e.setValue(t,{value:a}),n.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,changeEx:a,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(a,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],e=>e.target.value)):a.addEventListener("input",function(n){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(a),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class I extends p{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:p._hasPopupData(t)}),this.elements=n}render(){this.container.classList.add("popupAnnotation");const e=new x({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(e=>`${a.AnnotationPrefix}${e}`).join(",")),this.container}}class x{#tn=null;#nn=this.#an.bind(this);#rn=this.#on.bind(this);#sn=this.#cn.bind(this);#dn=this.#ln.bind(this);#Bt=null;#Me=null;#un=null;#fn=null;#pn=null;#mn=null;#_n=!1;#hn=null;#bn=null;#gn=null;#vn=null;#yn=!1;constructor(e){let{container:t,color:n,elements:a,titleObj:r,modificationDate:o,contentsObj:s,richText:c,parent:d,rect:l,parentRect:u,open:f}=e;this.#Me=t,this.#vn=r,this.#un=s,this.#gn=c,this.#pn=d,this.#Bt=n,this.#bn=l,this.#mn=u,this.#fn=a;const p=i.PDFDateString.toDateObject(o);p&&(this.#tn=d.l10n.get("annotation_date_string",{date:p.toLocaleDateString(),time:p.toLocaleTimeString()})),this.trigger=a.flatMap(e=>e.getElementsToTriggerPopup());for(const e of this.trigger)e.addEventListener("click",this.#dn),e.addEventListener("mouseenter",this.#sn),e.addEventListener("mouseleave",this.#rn),e.classList.add("popupTriggerArea");for(const e of a)e.container?.addEventListener("keydown",this.#nn);this.#Me.hidden=!0,f&&this.#ln()}render(){if(this.#hn)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:i,pageY:r}}}=this.#pn,o=this.#hn=document.createElement("div");if(o.className="popup",this.#Bt){const e=o.style.outlineColor=a.Util.makeHexColor(...this.#Bt);if(CSS.supports("background-color","color-mix(in srgb, red 30%, white)"))o.style.backgroundColor=`color-mix(in srgb, ${e} 30%, white)`;else{const e=.7;o.style.backgroundColor=a.Util.makeHexColor(...this.#Bt.map(t=>Math.floor(e*(255-t)+t)))}}const s=document.createElement("span");s.className="header";const d=document.createElement("h1");if(s.append(d),({dir:d.dir,str:d.textContent}=this.#vn),o.append(s),this.#tn){const e=document.createElement("span");e.classList.add("popupDate"),this.#tn.then(t=>{e.textContent=t}),s.append(e)}const l=this.#un,u=this.#gn;if(!u?.str||l?.str&&l.str!==u.str){const e=this._formatContents(l);o.append(e)}else c.XfaLayer.render({xfaHtml:u.html,intent:"richText",div:o}),o.lastChild.classList.add("richText","popupContent");let f=!!this.#mn,p=f?this.#mn:this.#bn;for(const e of this.#fn)if(!p||null!==a.Util.intersect(e.data.rect,p)){p=e.data.rect,f=!0;break}const m=a.Util.normalizeRect([p[0],e[3]-p[1]+e[1],p[2],e[3]-p[3]+e[1]]),_=f?p[2]-p[0]+5:0,h=m[0]+_,b=m[1],{style:g}=this.#Me;g.left=100*(h-i)/t+"%",g.top=100*(b-r)/n+"%",this.#Me.append(o)}_formatContents(e){let{str:t,dir:n}=e;const a=document.createElement("p");a.classList.add("popupContent"),a.dir=n;const i=t.split(/(?:\r\n?|\n)/);for(let e=0,t=i.length;e<t;++e){const n=i[e];a.append(document.createTextNode(n)),e<t-1&&a.append(document.createElement("br"))}return a}#an(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&this.#_n)&&this.#ln()}#ln(){this.#_n=!this.#_n,this.#_n?(this.#cn(),this.#Me.addEventListener("click",this.#dn),this.#Me.addEventListener("keydown",this.#nn)):(this.#on(),this.#Me.removeEventListener("click",this.#dn),this.#Me.removeEventListener("keydown",this.#nn))}#cn(){this.#hn||this.render(),this.isVisible?this.#_n&&this.#Me.classList.add("focused"):(this.#Me.hidden=!1,this.#Me.style.zIndex=parseInt(this.#Me.style.zIndex)+1e3)}#on(){this.#Me.classList.remove("focused"),!this.#_n&&this.isVisible&&(this.#Me.hidden=!0,this.#Me.style.zIndex=parseInt(this.#Me.style.zIndex)-1e3)}forceHide(){this.#yn=this.isVisible,this.#yn&&(this.#Me.hidden=!0)}maybeShow(){this.#yn&&(this.#yn=!1,this.#Me.hidden=!1)}get isVisible(){return!1===this.#Me.hidden}}class C extends p{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=a.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}t.FreeTextAnnotationElement=C;class O extends p{#Sn=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const e=this.data,{width:t,height:n}=u(e.rect),a=this.svgFactory.create(t,n,!0),i=this.#Sn=this.svgFactory.createElement("svg:line");return i.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),i.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),i.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),i.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),i.setAttribute("stroke-width",e.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),a.append(i),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#Sn}addHighlightArea(){this.container.classList.add("highlightArea")}}class w extends p{#Dn=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const e=this.data,{width:t,height:n}=u(e.rect),a=this.svgFactory.create(t,n,!0),i=e.borderStyle.width,r=this.#Dn=this.svgFactory.createElement("svg:rect");return r.setAttribute("x",i/2),r.setAttribute("y",i/2),r.setAttribute("width",t-i),r.setAttribute("height",n-i),r.setAttribute("stroke-width",i||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),a.append(r),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#Dn}addHighlightArea(){this.container.classList.add("highlightArea")}}class E extends p{#In=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const e=this.data,{width:t,height:n}=u(e.rect),a=this.svgFactory.create(t,n,!0),i=e.borderStyle.width,r=this.#In=this.svgFactory.createElement("svg:ellipse");return r.setAttribute("cx",t/2),r.setAttribute("cy",n/2),r.setAttribute("rx",t/2-i/2),r.setAttribute("ry",n/2-i/2),r.setAttribute("stroke-width",i||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),a.append(r),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#In}addHighlightArea(){this.container.classList.add("highlightArea")}}class A extends p{#xn=null;constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:t,height:n}=u(e.rect),a=this.svgFactory.create(t,n,!0);let i=[];for(const t of e.vertices){const n=t.x-e.rect[0],a=e.rect[3]-t.y;i.push(n+","+a)}i=i.join(" ");const r=this.#xn=this.svgFactory.createElement(this.svgElementName);return r.setAttribute("points",i),r.setAttribute("stroke-width",e.borderStyle.width||1),r.setAttribute("stroke","transparent"),r.setAttribute("fill","transparent"),a.append(r),this.container.append(a),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#xn}addHighlightArea(){this.container.classList.add("highlightArea")}}class L extends A{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class k extends p{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class M extends p{#Cn=[];constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=a.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const e=this.data,{width:t,height:n}=u(e.rect),a=this.svgFactory.create(t,n,!0);for(const t of e.inkLists){let n=[];for(const a of t){const t=a.x-e.rect[0],i=e.rect[3]-a.y;n.push(`${t},${i}`)}n=n.join(" ");const i=this.svgFactory.createElement(this.svgElementName);this.#Cn.push(i),i.setAttribute("points",n),i.setAttribute("stroke-width",e.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),!e.popupRef&&this.hasPopupData&&this._createPopup(),a.append(i)}return this.container.append(a),this.container}getElementsToTriggerPopup(){return this.#Cn}addHighlightArea(){this.container.classList.add("highlightArea")}}t.InkAnnotationElement=M;class P extends p{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class T extends p{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class U extends p{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class F extends p{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class H extends p{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}t.StampAnnotationElement=H;class R extends p{#On=null;constructor(e){super(e,{isRenderable:!0});const{filename:t,content:n}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(t,!0),this.content=n,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:t,content:n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||0===t.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(t.name)?"paperclip":"pushpin"}.svg`,t.fillAlpha&&t.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(100*t.fillAlpha)}%);`)),n.addEventListener("dblclick",this.#wn.bind(this)),this.#On=n;const{isMac:i}=a.FeatureTest.platform;return e.addEventListener("keydown",e=>{"Enter"===e.key&&(i?e.metaKey:e.ctrlKey)&&this.#wn()}),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return this.#On}addHighlightArea(){this.container.classList.add("highlightArea")}#wn(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}t.AnnotationLayer=class{#Dt=null;#En=null;#An=new Map;constructor(e){let{div:t,accessibilityManager:n,annotationCanvasMap:a,l10n:i,page:r,viewport:o}=e;this.div=t,this.#Dt=n,this.#En=a,this.l10n=i,this.page=r,this.viewport=o,this.zIndex=0,this.l10n||=s.NullL10n}#Ln(e,t){const n=e.firstChild||e;n.id=`${a.AnnotationPrefix}${t}`,this.div.append(e),this.#Dt?.moveElementInDOM(this.div,e,n,!1)}async render(e){const{annotations:t}=e,n=this.div;(0,i.setLayerDimensions)(n,this.viewport);const o=new Map,s={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new i.DOMSVGFactory,annotationStorage:e.annotationStorage||new r.AnnotationStorage,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const e of t){if(e.noHTML)continue;const t=e.annotationType===a.AnnotationType.POPUP;if(t){const t=o.get(e.id);if(!t)continue;s.elements=t}else{const{width:t,height:n}=u(e.rect);if(t<=0||n<=0)continue}s.data=e;const n=f.create(s);if(!n.isRenderable)continue;if(!t&&e.popupRef){const t=o.get(e.popupRef);t?t.push(n):o.set(e.popupRef,[n])}n.annotationEditorType>0&&this.#An.set(n.data.id,n);const i=n.render();e.hidden&&(i.style.visibility="hidden"),this.#Ln(i,e.id)}this.#kn(),await this.l10n.translate(n)}update(e){let{viewport:t}=e;const n=this.div;this.viewport=t,(0,i.setLayerDimensions)(n,{rotation:t.rotation}),this.#kn(),n.hidden=!1}#kn(){if(!this.#En)return;const e=this.div;for(const[t,n]of this.#En){const a=e.querySelector(`[data-annotation-id="${t}"]`);if(!a)continue;const{firstChild:i}=a;i?"CANVAS"===i.nodeName?i.replaceWith(n):i.before(n):a.append(n)}this.#En.clear()}getEditableAnnotations(){return Array.from(this.#An.values())}getEditableAnnotation(e){return this.#An.get(e)}}},(e,t)=>{function n(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function a(e){return Math.max(0,Math.min(255,255*e))}Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0,t.ColorConverters=class{static CMYK_G(e){let[t,n,a,i]=e;return["G",1-Math.min(1,.3*t+.59*a+.11*n+i)]}static G_CMYK(e){let[t]=e;return["CMYK",0,0,0,1-t]}static G_RGB(e){let[t]=e;return["RGB",t,t,t]}static G_rgb(e){let[t]=e;return t=a(t),[t,t,t]}static G_HTML(e){let[t]=e;const a=n(t);return`#${a}${a}${a}`}static RGB_G(e){let[t,n,a]=e;return["G",.3*t+.59*n+.11*a]}static RGB_rgb(e){return e.map(a)}static RGB_HTML(e){return`#${e.map(n).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(e){let[t,n,a,i]=e;return["RGB",1-Math.min(1,t+i),1-Math.min(1,a+i),1-Math.min(1,n+i)]}static CMYK_rgb(e){let[t,n,i,r]=e;return[a(1-Math.min(1,t+r)),a(1-Math.min(1,i+r)),a(1-Math.min(1,n+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK(e){let[t,n,a]=e;const i=1-t,r=1-n,o=1-a;return["CMYK",i,r,o,Math.min(i,r,o)]}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NullL10n=void 0,t.getL10nFallback=a;const n={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};function a(e,t){switch(e){case"find_match_count":e=`find_match_count[${1===t.total?"one":"other"}]`;break;case"find_match_count_limit":e=`find_match_count_limit[${1===t.limit?"one":"other"}]`}return n[e]||""}n.print_progress_percent="{{progress}}%";const i={getLanguage:async()=>"en-us",getDirection:async()=>"ltr",async get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(e,t){return t?e.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(e,n)=>n in t?t[n]:"{{"+n+"}}"):e}(arguments.length>2&&void 0!==arguments[2]?arguments[2]:a(e,t),t)},async translate(e){}};t.NullL10n=i},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0,n(89);var a=n(194);t.XfaLayer=class{static setupStorage(e,t,n,a,i){const r=a.getValue(t,{value:null});switch(n.name){case"textarea":if(null!==r.value&&(e.textContent=r.value),"print"===i)break;e.addEventListener("input",e=>{a.setValue(t,{value:e.target.value})});break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(r.value===n.attributes.xfaOn?e.setAttribute("checked",!0):r.value===n.attributes.xfaOff&&e.removeAttribute("checked"),"print"===i)break;e.addEventListener("change",e=>{a.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})})}else{if(null!==r.value&&e.setAttribute("value",r.value),"print"===i)break;e.addEventListener("input",e=>{a.setValue(t,{value:e.target.value})})}break;case"select":if(null!==r.value){e.setAttribute("value",r.value);for(const e of n.children)e.attributes.value===r.value?e.attributes.selected=!0:e.attributes.hasOwnProperty("selected")&&delete e.attributes.selected}e.addEventListener("input",e=>{const n=e.target.options,i=-1===n.selectedIndex?"":n[n.selectedIndex].value;a.setValue(t,{value:i})})}}static setAttributes(e){let{html:t,element:n,storage:a=null,intent:i,linkService:r}=e;const{attributes:o}=n,s=t instanceof HTMLAnchorElement;"radio"===o.type&&(o.name=`${o.name}-${i}`);for(const[e,n]of Object.entries(o))if(null!=n)switch(e){case"class":n.length&&t.setAttribute(e,n.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",n);break;case"style":Object.assign(t.style,n);break;case"textContent":t.textContent=n;break;default:(!s||"href"!==e&&"newWindow"!==e)&&t.setAttribute(e,n)}s&&r.addLinkAttributes(t,o.href,o.newWindow),a&&o.dataId&&this.setupStorage(t,o.dataId,n,a)}static render(e){const t=e.annotationStorage,n=e.linkService,i=e.xfaHtml,r=e.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:r,linkService:n});const s=[[i,-1,o]],c=e.div;if(c.append(o),e.viewport){const t=`matrix(${e.viewport.transform.join(",")})`;c.style.transform=t}"richText"!==r&&c.setAttribute("class","xfaLayer xfaFont");const d=[];for(;s.length>0;){const[e,i,o]=s.at(-1);if(i+1===e.children.length){s.pop();continue}const c=e.children[++s.at(-1)[1]];if(null===c)continue;const{name:l}=c;if("#text"===l){const e=document.createTextNode(c.value);d.push(e),o.append(e);continue}const u=c?.attributes?.xmlns?document.createElementNS(c.attributes.xmlns,l):document.createElement(l);if(o.append(u),c.attributes&&this.setAttributes({html:u,element:c,storage:t,intent:r,linkService:n}),c.children&&c.children.length>0)s.push([c,-1,u]);else if(c.value){const e=document.createTextNode(c.value);a.XfaText.shouldBuildText(l)&&d.push(e),u.append(e)}}for(const e of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))e.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0,n(89),n(2);var a=n(1),i=n(164),r=n(198),o=n(168),s=n(165);class c extends i.AnnotationEditor{#Mn=0;#Pn=0;#Tn=this.canvasPointermove.bind(this);#Un=this.canvasPointerleave.bind(this);#Fn=this.canvasPointerup.bind(this);#Hn=this.canvasPointerdown.bind(this);#Rn=new Path2D;#Nn=!1;#Bn=!1;#jn=!1;#Vn=null;#zn=0;#Gn=0;#Kn=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(e){super({...e,name:"inkEditor"}),this.color=e.color||null,this.thickness=e.thickness||null,this.opacity=e.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(e){i.AnnotationEditor.initialize(e,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(e,t){switch(e){case a.AnnotationEditorParamsType.INK_THICKNESS:c._defaultThickness=t;break;case a.AnnotationEditorParamsType.INK_COLOR:c._defaultColor=t;break;case a.AnnotationEditorParamsType.INK_OPACITY:c._defaultOpacity=t/100}}updateParams(e,t){switch(e){case a.AnnotationEditorParamsType.INK_THICKNESS:this.#Wn(t);break;case a.AnnotationEditorParamsType.INK_COLOR:this.#Wt(t);break;case a.AnnotationEditorParamsType.INK_OPACITY:this.#qn(t)}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,c._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,c._defaultColor||i.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*c._defaultOpacity)]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||c._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,this.color||c._defaultColor||i.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??c._defaultOpacity))]]}#Wn(e){const t=this.thickness;this.addCommands({cmd:()=>{this.thickness=e,this.#Qn()},undo:()=>{this.thickness=t,this.#Qn()},mustExec:!0,type:a.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#Wt(e){const t=this.color;this.addCommands({cmd:()=>{this.color=e,this.#Yn()},undo:()=>{this.color=t,this.#Yn()},mustExec:!0,type:a.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#qn(e){e/=100;const t=this.opacity;this.addCommands({cmd:()=>{this.opacity=e,this.#Yn()},undo:()=>{this.opacity=t,this.#Yn()},mustExec:!0,type:a.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.canvas||(this.#Jn(),this.#Xn()),this.isAttachedToDOM||(this.parent.add(this),this.#Zn()),this.#Qn()))}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#Vn.disconnect(),this.#Vn=null,super.remove())}setParent(e){!this.parent&&e?this._uiManager.removeShouldRescale(this):this.parent&&null===e&&this._uiManager.addShouldRescale(this),super.setParent(e)}onScaleChanging(){const[e,t]=this.parentDimensions,n=this.width*e,a=this.height*t;this.setDimensions(n,a)}enableEditMode(){this.#Nn||null===this.canvas||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#Hn))}disableEditMode(){this.isInEditMode()&&null!==this.canvas&&(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#Hn))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#$n(){const{parentRotation:e,parentDimensions:[t,n]}=this;switch(e){case 90:return[0,n,n,t];case 180:return[t,n,t,n];case 270:return[t,0,n,t];default:return[0,0,t,n]}}#ea(){const{ctx:e,color:t,opacity:n,thickness:a,parentScale:i,scaleFactor:r}=this;e.lineWidth=a*i/r,e.lineCap="round",e.lineJoin="round",e.miterLimit=10,e.strokeStyle=`${t}${(0,s.opacityToHex)(n)}`}#ta(e,t){this.canvas.addEventListener("contextmenu",o.noContextMenu),this.canvas.addEventListener("pointerleave",this.#Un),this.canvas.addEventListener("pointermove",this.#Tn),this.canvas.addEventListener("pointerup",this.#Fn),this.canvas.removeEventListener("pointerdown",this.#Hn),this.isEditing=!0,this.#jn||(this.#jn=!0,this.#Zn(),this.thickness||=c._defaultThickness,this.color||=c._defaultColor||i.AnnotationEditor._defaultLineColor,this.opacity??=c._defaultOpacity),this.currentPath.push([e,t]),this.#Bn=!1,this.#ea(),this.#Kn=()=>{this.#na(),this.#Kn&&window.requestAnimationFrame(this.#Kn)},window.requestAnimationFrame(this.#Kn)}#aa(e,t){const[n,a]=this.currentPath.at(-1);if(this.currentPath.length>1&&e===n&&t===a)return;const i=this.currentPath;let r=this.#Rn;if(i.push([e,t]),this.#Bn=!0,i.length<=2)return r.moveTo(...i[0]),void r.lineTo(e,t);3===i.length&&(this.#Rn=r=new Path2D,r.moveTo(...i[0])),this.#ia(r,...i.at(-3),...i.at(-2),e,t)}#ra(){if(0===this.currentPath.length)return;const e=this.currentPath.at(-1);this.#Rn.lineTo(...e)}#oa(e,t){let n;if(this.#Kn=null,e=Math.min(Math.max(e,0),this.canvas.width),t=Math.min(Math.max(t,0),this.canvas.height),this.#aa(e,t),this.#ra(),1!==this.currentPath.length)n=this.#sa();else{const a=[e,t];n=[[a,a.slice(),a.slice(),a]]}const a=this.#Rn,i=this.currentPath;this.currentPath=[],this.#Rn=new Path2D,this.addCommands({cmd:()=>{this.allRawPaths.push(i),this.paths.push(n),this.bezierPath2D.push(a),this.rebuild()},undo:()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#Jn(),this.#Xn()),this.#Qn())},mustExec:!0})}#na(){if(!this.#Bn)return;this.#Bn=!1,Math.ceil(this.thickness*this.parentScale);const e=this.currentPath.slice(-3),t=e.map(e=>e[0]),n=e.map(e=>e[1]),{ctx:a}=(Math.min(...t),Math.max(...t),Math.min(...n),Math.max(...n),this);a.save(),a.clearRect(0,0,this.canvas.width,this.canvas.height);for(const e of this.bezierPath2D)a.stroke(e);a.stroke(this.#Rn),a.restore()}#ia(e,t,n,a,i,r,o){const s=(t+a)/2,c=(n+i)/2,d=(a+r)/2,l=(i+o)/2;e.bezierCurveTo(s+2*(a-s)/3,c+2*(i-c)/3,d+2*(a-d)/3,l+2*(i-l)/3,d,l)}#sa(){const e=this.currentPath;if(e.length<=2)return[[e[0],e[0],e.at(-1),e.at(-1)]];const t=[];let n,[a,i]=e[0];for(n=1;n<e.length-2;n++){const[r,o]=e[n],[s,c]=e[n+1],d=(r+s)/2,l=(o+c)/2,u=[a+2*(r-a)/3,i+2*(o-i)/3],f=[d+2*(r-d)/3,l+2*(o-l)/3];t.push([[a,i],u,f,[d,l]]),[a,i]=[d,l]}const[r,o]=e[n],[s,c]=e[n+1],d=[a+2*(r-a)/3,i+2*(o-i)/3],l=[s+2*(r-s)/3,c+2*(o-c)/3];return t.push([[a,i],d,l,[s,c]]),t}#Yn(){if(this.isEmpty())return void this.#ca();this.#ea();const{canvas:e,ctx:t}=this;t.setTransform(1,0,0,1,0,0),t.clearRect(0,0,e.width,e.height),this.#ca();for(const e of this.bezierPath2D)t.stroke(e)}commit(){this.#Nn||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#Nn=!0,this.div.classList.add("disabled"),this.#Qn(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),this.enableEditMode())}canvasPointerdown(e){0===e.button&&this.isInEditMode()&&!this.#Nn&&(this.setInForeground(),e.preventDefault(),"mouse"!==e.type&&this.div.focus(),this.#ta(e.offsetX,e.offsetY))}canvasPointermove(e){e.preventDefault(),this.#aa(e.offsetX,e.offsetY)}canvasPointerup(e){e.preventDefault(),this.#da(e)}canvasPointerleave(e){this.#da(e)}#da(e){this.canvas.removeEventListener("pointerleave",this.#Un),this.canvas.removeEventListener("pointermove",this.#Tn),this.canvas.removeEventListener("pointerup",this.#Fn),this.canvas.addEventListener("pointerdown",this.#Hn),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",o.noContextMenu)},10),this.#oa(e.offsetX,e.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#Jn(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",i.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(e=>this.canvas?.setAttribute("aria-label",e)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#Xn(){this.#Vn=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.setDimensions(t.width,t.height)}),this.#Vn.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#Nn}render(){if(this.div)return this.div;let e,t;this.width&&(e=this.x,t=this.y),super.render(),i.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(e=>this.div?.setAttribute("aria-label",e));const[n,a,r,o]=this.#$n();if(this.setAt(n,a,0,0),this.setDims(r,o),this.#Jn(),this.width){const[n,a]=this.parentDimensions;this.setAspectRatio(this.width*n,this.height*a),this.setAt(e*n,t*a,this.width*n,this.height*a),this.#jn=!0,this.#Zn(),this.setDims(this.width*n,this.height*a),this.#Yn(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#Xn(),this.div}#Zn(){if(!this.#jn)return;const[e,t]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*e),this.canvas.height=Math.ceil(this.height*t),this.#ca()}setDimensions(e,t){const n=Math.round(e),a=Math.round(t);if(this.#zn===n&&this.#Gn===a)return;this.#zn=n,this.#Gn=a,this.canvas.style.visibility="hidden";const[i,r]=this.parentDimensions;this.width=e/i,this.height=t/r,this.fixAndSetPosition(),this.#Nn&&this.#la(e,t),this.#Zn(),this.#Yn(),this.canvas.style.visibility="visible",this.fixDims()}#la(e,t){const n=this.#ua(),a=(e-n)/this.#Pn,i=(t-n)/this.#Mn;this.scaleFactor=Math.min(a,i)}#ca(){const e=this.#ua()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+e,this.translationY*this.scaleFactor+e)}static#fa(e){const t=new Path2D;for(let n=0,a=e.length;n<a;n++){const[a,i,r,o]=e[n];0===n&&t.moveTo(...a),t.bezierCurveTo(i[0],i[1],r[0],r[1],o[0],o[1])}return t}static#pa(e,t,n){const[a,i,r,o]=t;switch(n){case 0:for(let t=0,n=e.length;t<n;t+=2)e[t]+=a,e[t+1]=o-e[t+1];break;case 90:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=e[t+1]+a,e[t+1]=n+i}break;case 180:for(let t=0,n=e.length;t<n;t+=2)e[t]=r-e[t],e[t+1]+=i;break;case 270:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=r-e[t+1],e[t+1]=o-n}break;default:throw new Error("Invalid rotation")}return e}static#ma(e,t,n){const[a,i,r,o]=t;switch(n){case 0:for(let t=0,n=e.length;t<n;t+=2)e[t]-=a,e[t+1]=o-e[t+1];break;case 90:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=e[t+1]-i,e[t+1]=n-a}break;case 180:for(let t=0,n=e.length;t<n;t+=2)e[t]=r-e[t],e[t+1]-=i;break;case 270:for(let t=0,n=e.length;t<n;t+=2){const n=e[t];e[t]=o-e[t+1],e[t+1]=r-n}break;default:throw new Error("Invalid rotation")}return e}#_a(e,t,n,a){const i=[],r=this.thickness/2,o=e*t+r,s=e*n+r;for(const t of this.paths){const n=[],r=[];for(let a=0,i=t.length;a<i;a++){const[c,d,l,u]=t[a],f=e*c[0]+o,p=e*c[1]+s,m=e*d[0]+o,_=e*d[1]+s,h=e*l[0]+o,b=e*l[1]+s,g=e*u[0]+o,v=e*u[1]+s;0===a&&(n.push(f,p),r.push(f,p)),n.push(m,_,h,b,g,v),r.push(m,_),a===i-1&&r.push(g,v)}i.push({bezier:c.#pa(n,a,this.rotation),points:c.#pa(r,a,this.rotation)})}return i}#ha(){let e=1/0,t=-1/0,n=1/0,i=-1/0;for(const r of this.paths)for(const[o,s,c,d]of r){const r=a.Util.bezierBoundingBox(...o,...s,...c,...d);e=Math.min(e,r[0]),n=Math.min(n,r[1]),t=Math.max(t,r[2]),i=Math.max(i,r[3])}return[e,n,t,i]}#ua(){return this.#Nn?Math.ceil(this.thickness*this.parentScale):0}#Qn(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return;if(!this.#Nn)return void this.#Yn();const t=this.#ha(),n=this.#ua();this.#Pn=Math.max(i.AnnotationEditor.MIN_SIZE,t[2]-t[0]),this.#Mn=Math.max(i.AnnotationEditor.MIN_SIZE,t[3]-t[1]);const a=Math.ceil(n+this.#Pn*this.scaleFactor),r=Math.ceil(n+this.#Mn*this.scaleFactor),[o,s]=this.parentDimensions;this.width=a/o,this.height=r/s,this.setAspectRatio(a,r);const c=this.translationX,d=this.translationY;this.translationX=-t[0],this.translationY=-t[1],this.#Zn(),this.#Yn(),this.#zn=a,this.#Gn=r,this.setDims(a,r);const l=e?n/this.scaleFactor/2:0;this.translate(c-this.translationX-l,d-this.translationY-l)}static deserialize(e,t,n){if(e instanceof r.InkAnnotationElement)return null;const o=super.deserialize(e,t,n);o.thickness=e.thickness,o.color=a.Util.makeHexColor(...e.color),o.opacity=e.opacity;const[s,d]=o.pageDimensions,l=o.width*s,u=o.height*d,f=o.parentScale,p=e.thickness/2;o.#Nn=!0,o.#zn=Math.round(l),o.#Gn=Math.round(u);const{paths:m,rect:_,rotation:h}=e;for(let{bezier:e}of m){e=c.#ma(e,_,h);const t=[];o.paths.push(t);let n=f*(e[0]-p),a=f*(e[1]-p);for(let i=2,r=e.length;i<r;i+=6){const r=f*(e[i]-p),o=f*(e[i+1]-p),s=f*(e[i+2]-p),c=f*(e[i+3]-p),d=f*(e[i+4]-p),l=f*(e[i+5]-p);t.push([[n,a],[r,o],[s,c],[d,l]]),n=d,a=l}const i=this.#fa(t);o.bezierPath2D.push(i)}const b=o.#ha();return o.#Pn=Math.max(i.AnnotationEditor.MIN_SIZE,b[2]-b[0]),o.#Mn=Math.max(i.AnnotationEditor.MIN_SIZE,b[3]-b[1]),o.#la(l,u),o}serialize(){if(this.isEmpty())return null;const e=this.getRect(0,0),t=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:a.AnnotationEditorType.INK,color:t,thickness:this.thickness,opacity:this.opacity,paths:this.#_a(this.scaleFactor/this.parentScale,this.translationX,this.translationY,e),pageIndex:this.pageIndex,rect:e,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}t.InkEditor=c},(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.StampEditor=void 0,n(149),n(152);var a=n(1),i=n(164),r=n(168),o=n(198);class s extends i.AnnotationEditor{#ba=null;#ga=null;#va=null;#ya=null;#Sa=null;#Da=null;#Vn=null;#Ia=null;#xa=!1;#Ca=!1;static _type="stamp";constructor(e){super({...e,name:"stampEditor"}),this.#ya=e.bitmapUrl,this.#Sa=e.bitmapFile}static initialize(e){i.AnnotationEditor.initialize(e)}static get supportedTypes(){return(0,a.shadow)(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(e=>`image/${e}`))}static get supportedTypesStr(){return(0,a.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(e){return this.supportedTypes.includes(e)}static paste(e,t){t.pasteEditor(a.AnnotationEditorType.STAMP,{bitmapFile:e.getAsFile()})}#Oa(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?(this.#ba=e.bitmap,t||(this.#ga=e.id,this.#xa=e.isSvg),this.#Jn()):this.remove()}#wa(){this.#va=null,this._uiManager.enableWaiting(!1),this.#Da&&this.div.focus()}#Ea(){if(this.#ga)return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(this.#ga).then(e=>this.#Oa(e,!0)).finally(()=>this.#wa());if(this.#ya){const e=this.#ya;return this.#ya=null,this._uiManager.enableWaiting(!0),void(this.#va=this._uiManager.imageManager.getFromUrl(e).then(e=>this.#Oa(e)).finally(()=>this.#wa()))}if(this.#Sa){const e=this.#Sa;return this.#Sa=null,this._uiManager.enableWaiting(!0),void(this.#va=this._uiManager.imageManager.getFromFile(e).then(e=>this.#Oa(e)).finally(()=>this.#wa()))}const e=document.createElement("input");e.type="file",e.accept=s.supportedTypesStr,this.#va=new Promise(t=>{e.addEventListener("change",async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);const t=await this._uiManager.imageManager.getFromFile(e.files[0]);this.#Oa(t)}else this.remove();t()}),e.addEventListener("cancel",()=>{this.remove(),t()})}).finally(()=>this.#wa()),e.click()}remove(){this.#ga&&(this.#ba=null,this._uiManager.imageManager.deleteId(this.#ga),this.#Da?.remove(),this.#Da=null,this.#Vn?.disconnect(),this.#Vn=null),super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(this.#ga&&this.#Ea(),this.isAttachedToDOM||this.parent.add(this))):this.#ga&&this.#Ea()}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#va||this.#ba||this.#ya||this.#Sa)}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;if(this.width&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.#ba?this.#Jn():this.#Ea(),this.width){const[n,a]=this.parentDimensions;this.setAt(e*n,t*a,this.width*n,this.height*a)}return this.div}#Jn(){const{div:e}=this;let{width:t,height:n}=this.#ba;const[a,i]=this.pageDimensions,r=.75;if(this.width)t=this.width*a,n=this.height*i;else if(t>r*a||n>r*i){const e=Math.min(r*a/t,r*i/n);t*=e,n*=e}const[o,s]=this.parentDimensions;this.setDims(t*o/a,n*s/i),this._uiManager.enableWaiting(!1);const c=this.#Da=document.createElement("canvas");e.append(c),e.hidden=!1,this.#Aa(t,n),this.#Xn(),this.#Ca||(this.parent.addUndoableEditor(this),this.#Ca=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#La(e,t){const[n,a]=this.parentDimensions;this.width=e/n,this.height=t/a,this.setDims(e,t),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,null!==this.#Ia&&clearTimeout(this.#Ia),this.#Ia=setTimeout(()=>{this.#Ia=null,this.#Aa(e,t)},200)}#ka(e,t){const{width:n,height:a}=this.#ba;let i=n,r=a,o=this.#ba;for(;i>2*e||r>2*t;){const n=i,a=r;i>2*e&&(i=i>=16384?Math.floor(i/2)-1:Math.ceil(i/2)),r>2*t&&(r=r>=16384?Math.floor(r/2)-1:Math.ceil(r/2));const s=new OffscreenCanvas(i,r);s.getContext("2d").drawImage(o,0,0,n,a,0,0,i,r),o=s.transferToImageBitmap()}return o}#Aa(e,t){e=Math.ceil(e),t=Math.ceil(t);const n=this.#Da;if(!n||n.width===e&&n.height===t)return;n.width=e,n.height=t;const a=this.#xa?this.#ba:this.#ka(e,t),i=n.getContext("2d");i.filter=this._uiManager.hcmFilter,i.drawImage(a,0,0,a.width,a.height,0,0,e,t)}#Ma(e){if(e){if(this.#xa){const e=this._uiManager.imageManager.getSvgUrl(this.#ga);if(e)return e}const e=document.createElement("canvas");return({width:e.width,height:e.height}=this.#ba),e.getContext("2d").drawImage(this.#ba,0,0),e.toDataURL()}if(this.#xa){const[e,t]=this.pageDimensions,n=Math.round(this.width*e*r.PixelsPerInch.PDF_TO_CSS_UNITS),a=Math.round(this.height*t*r.PixelsPerInch.PDF_TO_CSS_UNITS),i=new OffscreenCanvas(n,a);return i.getContext("2d").drawImage(this.#ba,0,0,this.#ba.width,this.#ba.height,0,0,n,a),i.transferToImageBitmap()}return structuredClone(this.#ba)}#Xn(){this.#Vn=new ResizeObserver(e=>{const t=e[0].contentRect;t.width&&t.height&&this.#La(t.width,t.height)}),this.#Vn.observe(this.div)}static deserialize(e,t,n){if(e instanceof o.StampAnnotationElement)return null;const a=super.deserialize(e,t,n),{rect:i,bitmapUrl:r,bitmapId:s,isSvg:c,accessibilityData:d}=e;s&&n.imageManager.isValidId(s)?a.#ga=s:a.#ya=r,a.#xa=c;const[l,u]=a.pageDimensions;return a.width=(i[2]-i[0])/l,a.height=(i[3]-i[1])/u,d&&(a.altTextData=d),a}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;const n={annotationType:a.AnnotationEditorType.STAMP,bitmapId:this.#ga,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#xa,structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=this.#Ma(!0),n.accessibilityData=this.altTextData,n;const{decorative:i,altText:r}=this.altTextData;if(!i&&r&&(n.accessibilityData={type:"Figure",alt:r}),null===t)return n;t.stamps||=new Map;const o=this.#xa?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(t.stamps.has(this.#ga)){if(this.#xa){const e=t.stamps.get(this.#ga);o>e.area&&(e.area=o,e.serialized.bitmap.close(),e.serialized.bitmap=this.#Ma(!1))}}else t.stamps.set(this.#ga,{area:o,serialized:n}),n.bitmap=this.#Ma(!1);return n}}t.StampEditor=s}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__w_pdfjs_require__),n.exports}var __nested_webpack_exports__={};return(()=>{var e=__nested_webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return r.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return o.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return s.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"DOMSVGFactory",{enumerable:!0,get:function(){return a.DOMSVGFactory}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return c.GlobalWorkerOptions}}),Object.defineProperty(e,"ImageKind",{enumerable:!0,get:function(){return t.ImageKind}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return n.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return a.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return n.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return a.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return a.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return n.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return d.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return n.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return n.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return a.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return a.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return a.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return a.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return a.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return a.loadScript}}),Object.defineProperty(e,"noContextMenu",{enumerable:!0,get:function(){return a.noContextMenu}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return i.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return a.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return i.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return n.version}});var t=__w_pdfjs_require__(1),n=__w_pdfjs_require__(124),a=__w_pdfjs_require__(168),i=__w_pdfjs_require__(195),r=__w_pdfjs_require__(196),o=__w_pdfjs_require__(165),s=__w_pdfjs_require__(198),c=__w_pdfjs_require__(176),d=__w_pdfjs_require__(201)})(),__nested_webpack_exports__})(),module.exports=root.pdfjsLib=factory()}
}]);